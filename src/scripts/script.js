"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(n,e,e.document,e.Math)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&exports?module.exports=t(require("jquery"),e,e.document,e.Math):t(jQuery,e,e.document,e.Math)}("undefined"!=typeof window?window:void 0,function(e,t,n,o,a){var i="fullpage-wrapper",s="."+i,r="fp-responsive",l="fp-notransition",c="fp-destroyed",u="fp-enabled",d="fp-viewing",f="active",h="."+f,v="fp-completely",p="."+v,m="fp-section",g="."+m,y=g+h,k=g+":first",w=g+":last",b="fp-tableCell",S="."+b,C="fp-auto-height",x="fp-normal-scroll",M="fp-nav",T="#"+M,A="fp-tooltip",I="."+A,E="fp-show-active",P="fp-slide",L="."+P,O=L+h,R="fp-slides",z="."+R,F="fp-slidesContainer",B="."+F,D="fp-table",j="fp-slidesNav",H="."+j,V=H+" a",_=".fp-controlArrow",q="fp-prev",W="fp-controlArrow "+q,$=_+("."+q),G="fp-controlArrow fp-next",N=_+".fp-next",Y=e(t),U=e(n);e.fn.fullpage=function(X){function K(t,n){t||ut(0),ht("autoScrolling",t,n);var o=e(y);X.autoScrolling&&!X.scrollBar?(mt.css({overflow:"hidden",height:"100%"}),Z(qt.recordHistory,"internal"),Tt.css({"-ms-touch-action":"none","touch-action":"none"}),o.length&&ut(o.position().top)):(mt.css({overflow:"visible",height:"initial"}),Z(!1,"internal"),Tt.css({"-ms-touch-action":"","touch-action":""}),o.length&&mt.scrollTop(o.position().top))}function Z(e,t){ht("recordHistory",e,t)}function Q(e,t){ht("scrollingSpeed",e,t)}function J(e,t){ht("fitToSection",e,t)}function ee(e){e?(!function(){var e,o="";t.addEventListener?e="addEventListener":(e="attachEvent",o="on");var i="onwheel"in n.createElement("div")?"wheel":n.onmousewheel!==a?"mousewheel":"DOMMouseScroll";"DOMMouseScroll"==i?n[e](o+"MozMousePixelScroll",we,!1):n[e](o+i,we,!1)}(),Tt.on("mousedown",De).on("mouseup",je)):(n.addEventListener?(n.removeEventListener("mousewheel",we,!1),n.removeEventListener("wheel",we,!1),n.removeEventListener("MozMousePixelScroll",we,!1)):n.detachEvent("onmousewheel",we),Tt.off("mousedown",De).off("mouseup",je))}function te(t,n){void 0!==n?(n=n.replace(/ /g,"").split(","),e.each(n,function(e,n){ft(t,n,"m")})):(ft(t,"all","m"),t?(ee(!0),(xt||Mt)&&(X.autoScrolling&&gt.off(_t.touchmove).on(_t.touchmove,pe),e(s).off(_t.touchstart).on(_t.touchstart,ye).off(_t.touchmove).on(_t.touchmove,me))):(ee(!1),(xt||Mt)&&(X.autoScrolling&&gt.off(_t.touchmove),e(s).off(_t.touchstart).off(_t.touchmove))))}function ne(t,n){void 0!==n?(n=n.replace(/ /g,"").split(","),e.each(n,function(e,n){ft(t,n,"k")})):(ft(t,"all","k"),X.keyboardScrolling=t)}function oe(){var t=e(y).prev(g);t.length||!X.loopTop&&!X.continuousVertical||(t=e(g).last()),t.length&&Ce(t,null,!0)}function ae(){var t=e(y).next(g);t.length||!X.loopBottom&&!X.continuousVertical||(t=e(g).first()),t.length&&Ce(t,null,!1)}function ie(e,t){Q(0,"internal"),se(e,t),Q(qt.scrollingSpeed,"internal")}function se(e,t){var n=tt(e);void 0!==t?nt(e,t):n.length>0&&Ce(n)}function re(e){be("right",e)}function le(e){be("left",e)}function ce(t){if(!Tt.hasClass(c)){It=!0,At=Y.height(),e(g).each(function(){var t=e(this).find(z),n=e(this).find(L);X.verticalCentered&&e(this).find(S).css("height",Je(e(this))+"px"),e(this).css("height",At+"px"),n.length>1&&$e(t,t.find(O))}),X.scrollOverflow&&Rt.createScrollBarForAll();var n=e(y).index(g);n&&ie(n+1),It=!1,e.isFunction(X.afterResize)&&t&&X.afterResize.call(Tt),e.isFunction(X.afterReBuild)&&!t&&X.afterReBuild.call(Tt)}}function ue(t){var n=gt.hasClass(r);t?n||(K(!1,"internal"),J(!1,"internal"),e(T).hide(),gt.addClass(r),e.isFunction(X.afterResponsive)&&X.afterResponsive.call(Tt,t)):n&&(K(qt.autoScrolling,"internal"),J(qt.autoScrolling,"internal"),e(T).show(),gt.removeClass(r),e.isFunction(X.afterResponsive)&&X.afterResponsive.call(Tt,t))}function de(){var t=e(y);t.addClass(v),Te(t),Ae(t),X.scrollOverflow&&X.scrollOverflowHandler.afterLoad(),function(){var e=tt(Re().section);return!e.length||e.length&&e.index()===St.index()}()&&e.isFunction(X.afterLoad)&&X.afterLoad.call(t,t.data("anchor"),t.index(g)+1),e.isFunction(X.afterRender)&&X.afterRender.call(Tt)}function fe(){var t;if(!X.autoScrolling||X.scrollBar){var o=Y.scrollTop(),a=function(e){var t=e>$t?"down":"up";return $t=e,Kt=e,t}(o),i=0,s=o+Y.height()/2,r=gt.height()-Y.height()===o,l=n.querySelectorAll(g);if(r)i=l.length-1;else if(o)for(var c=0;c<l.length;++c){l[c].offsetTop<=s&&(i=c)}else i=0;if(function(t){var n=e(y).position().top,o=n+Y.height();if("up"==t)return o>=Y.scrollTop()+Y.height();return n<=Y.scrollTop()}(a)&&(e(y).hasClass(v)||e(y).addClass(v).siblings().removeClass(v)),!(t=e(l).eq(i)).hasClass(f)){Wt=!0;var u,d,h=e(y),p=h.index(g)+1,m=Ze(t),k=t.data("anchor"),w=t.index(g)+1,b=t.find(O);b.length&&(d=b.data("anchor"),u=b.index()),Pt&&(t.addClass(f).siblings().removeClass(f),e.isFunction(X.onLeave)&&X.onLeave.call(h,p,w,m),e.isFunction(X.afterLoad)&&X.afterLoad.call(t,k,w),Ee(h),Te(t),Ae(t),Ke(k,w-1),X.anchors.length&&(kt=k),at(u,d,k,w)),clearTimeout(Dt),Dt=setTimeout(function(){Wt=!1},100)}X.fitToSection&&(clearTimeout(jt),jt=setTimeout(function(){X.fitToSection&&e(y).outerHeight()<=At&&he()},X.fitToSectionDelay))}}function he(){Pt&&(It=!0,Ce(e(y)),It=!1)}function ve(t){if(Ot.m[t]){var n="down"===t?ae:oe;if(X.scrollOverflow){var o=X.scrollOverflowHandler.scrollable(e(y)),a="down"===t?"bottom":"top";if(o.length>0){if(!X.scrollOverflowHandler.isScrolled(a,o))return!0;n()}else n()}else n()}}function pe(e){var t=e.originalEvent;X.autoScrolling&&ge(t)&&e.preventDefault()}function me(t){var n=t.originalEvent,a=e(n.target).closest(g);if(ge(n)){X.autoScrolling&&t.preventDefault();var i=lt(n);Yt=i.y,Ut=i.x,a.find(z).length&&o.abs(Nt-Ut)>o.abs(Gt-Yt)?!Ct&&o.abs(Nt-Ut)>Y.outerWidth()/100*X.touchSensitivity&&(Nt>Ut?Ot.m.right&&re(a):Ot.m.left&&le(a)):X.autoScrolling&&Pt&&o.abs(Gt-Yt)>Y.height()/100*X.touchSensitivity&&(Gt>Yt?ve("down"):Yt>Gt&&ve("up"))}}function ge(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function ye(e){var t=e.originalEvent;if(X.fitToSection&&mt.stop(),ge(t)){var n=lt(t);Gt=n.y,Nt=n.x}}function ke(e,t){for(var n=0,a=e.slice(o.max(e.length-t,1)),i=0;i<a.length;i++)n+=a[i];return o.ceil(n/t)}function we(n){var a=(new Date).getTime(),i=e(p).hasClass(x);if(X.autoScrolling&&!bt&&!i){var s=(n=n||t.event).wheelDelta||-n.deltaY||-n.detail,r=o.max(-1,o.min(1,s)),l=void 0!==n.wheelDeltaX||void 0!==n.deltaX,c=o.abs(n.wheelDeltaX)<o.abs(n.wheelDelta)||o.abs(n.deltaX)<o.abs(n.deltaY)||!l;Lt.length>149&&Lt.shift(),Lt.push(o.abs(s)),X.scrollBar&&(n.preventDefault?n.preventDefault():n.returnValue=!1);var u=a-Xt;if(Xt=a,u>200&&(Lt=[]),Pt){ke(Lt,10)>=ke(Lt,70)&&c&&ve(r<0?"down":"up")}return!1}X.fitToSection&&mt.stop()}function be(t,n){var o=(void 0===n?e(y):n).find(z),a=o.find(L).length;if(!(!o.length||Ct||a<2)){var i=o.find(O),s=null;if(!(s="left"===t?i.prev(L):i.next(L)).length){if(!X.loopHorizontal)return;s="left"===t?i.siblings(":last"):i.siblings(":first")}Ct=!0,$e(o,s,t)}}function Se(){e(O).each(function(){ct(e(this),"internal")})}function Ce(t,n,a){if(void 0!==t){var i,r,l={element:t,callback:n,isMovementUp:a,dtop:function(e){var t=e.position(),n=t.top,o=t.top>Kt,a=n-At+e.outerHeight(),i=X.bigSectionsDestination;return e.outerHeight()>At?(o||i)&&"bottom"!==i||(n=a):(o||It&&e.is(":last-child"))&&(n=a),Kt=n,n}(t),yMovement:Ze(t),anchorLink:t.data("anchor"),sectionIndex:t.index(g),activeSlide:t.find(O),activeSection:e(y),leavingSection:e(y).index(g)+1,localIsResizing:It};l.activeSection.is(t)&&!It||X.scrollBar&&Y.scrollTop()===l.dtop&&!t.hasClass(C)||(l.activeSlide.length&&(i=l.activeSlide.data("anchor"),r=l.activeSlide.index()),e.isFunction(X.onLeave)&&!l.localIsResizing&&!1===X.onLeave.call(l.activeSection,l.leavingSection,l.sectionIndex+1,l.yMovement)||(X.autoScrolling&&X.continuousVertical&&void 0!==l.isMovementUp&&(!l.isMovementUp&&"up"==l.yMovement||l.isMovementUp&&"down"==l.yMovement)&&(l=function(t){t.isMovementUp?e(y).before(t.activeSection.nextAll(g)):e(y).after(t.activeSection.prevAll(g).get().reverse());return ut(e(y).position().top),Se(),t.wrapAroundElements=t.activeSection,t.dtop=t.element.position().top,t.yMovement=Ze(t.element),t.leavingSection=t.activeSection.index(g)+1,t.sectionIndex=t.element.index(g),t}(l)),l.localIsResizing||Ee(l.activeSection),X.scrollOverflow&&X.scrollOverflowHandler.beforeLeave(),t.addClass(f).siblings().removeClass(f),Te(t),X.scrollOverflow&&X.scrollOverflowHandler.onLeave(),Pt=!1,at(r,i,l.anchorLink,l.sectionIndex),function(t){if(X.css3&&X.autoScrolling&&!X.scrollBar){et("translate3d(0px, -"+o.round(t.dtop)+"px, 0px)",!0),X.scrollingSpeed?(clearTimeout(Ft),Ft=setTimeout(function(){xe(t)},X.scrollingSpeed)):xe(t)}else{var n=function(e){var t={};X.autoScrolling&&!X.scrollBar?(t.options={top:-e.dtop},t.element=s):(t.options={scrollTop:e.dtop},t.element="html, body");return t}(t);e(n.element).animate(n.options,X.scrollingSpeed,X.easing).promise().done(function(){X.scrollBar?setTimeout(function(){xe(t)},30):xe(t)})}}(l),kt=l.anchorLink,Ke(l.anchorLink,l.sectionIndex)))}}function xe(t){!function(t){t.wrapAroundElements&&t.wrapAroundElements.length&&(t.isMovementUp?e(k).before(t.wrapAroundElements):e(w).after(t.wrapAroundElements),ut(e(y).position().top),Se())}(t),e.isFunction(X.afterLoad)&&!t.localIsResizing&&X.afterLoad.call(t.element,t.anchorLink,t.sectionIndex+1),X.scrollOverflow&&X.scrollOverflowHandler.afterLoad(),t.localIsResizing||Ae(t.element),t.element.addClass(v).siblings().removeClass(v),Pt=!0,e.isFunction(t.callback)&&t.callback.call(this)}function Me(e,t){e.attr(t,e.data(t)).removeAttr("data-"+t)}function Te(t){if(X.lazyLoading){var n;Pe(t).find("img[data-src], img[data-srcset], source[data-src], video[data-src], audio[data-src], iframe[data-src]").each(function(){if(n=e(this),e.each(["src","srcset"],function(e,t){var o=n.attr("data-"+t);void 0!==o&&o&&Me(n,t)}),n.is("source")){var t=n.closest("video").length?"video":"audio";n.closest(t).get(0).load()}})}}function Ae(t){var n=Pe(t);n.find("video, audio").each(function(){var t=e(this).get(0);t.hasAttribute("data-autoplay")&&"function"==typeof t.play&&t.play()}),n.find('iframe[src*="youtube.com/embed/"]').each(function(){var t=e(this).get(0);t.hasAttribute("data-autoplay")&&Ie(t),t.onload=function(){t.hasAttribute("data-autoplay")&&Ie(t)}})}function Ie(e){e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}function Ee(t){var n=Pe(t);n.find("video, audio").each(function(){var t=e(this).get(0);t.hasAttribute("data-keepplaying")||"function"!=typeof t.pause||t.pause()}),n.find('iframe[src*="youtube.com/embed/"]').each(function(){var t=e(this).get(0);/youtube\.com\/embed\//.test(e(this).attr("src"))&&!t.hasAttribute("data-keepplaying")&&e(this).get(0).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})}function Pe(t){var n=t.find(O);return n.length&&(t=e(n)),t}function Le(){var e=Re(),t=e.section,n=e.slide;t&&(X.animateAnchor?nt(t,n):ie(t,n))}function Oe(){if(!Wt&&!X.lockAnchors){var e=Re(),t=e.section,n=e.slide,o=void 0===kt,a=void 0===kt&&void 0===n&&!Ct;t.length&&(t&&t!==kt&&!o||a||!Ct&&wt!=n)&&nt(t,n)}}function Re(){var e=t.location.hash,n=e.replace("#","").split("/"),o=e.indexOf("#/")>-1;return{section:o?"/"+n[1]:decodeURIComponent(n[0]),slide:o?decodeURIComponent(n[2]):decodeURIComponent(n[1])}}function ze(t){clearTimeout(Ht);var n=e(":focus");if(!n.is("textarea")&&!n.is("input")&&!n.is("select")&&"true"!==n.attr("contentEditable")&&""!==n.attr("contentEditable")&&X.keyboardScrolling&&X.autoScrolling){var o=t.which;e.inArray(o,[40,38,32,33,34])>-1&&t.preventDefault(),bt=t.ctrlKey,Ht=setTimeout(function(){!function(t){var n=t.shiftKey;if(!Pt&&[37,39].indexOf(t.which)<0)return;switch(t.which){case 38:case 33:Ot.k.up&&oe();break;case 32:if(n&&Ot.k.up){oe();break}case 40:case 34:Ot.k.down&&ae();break;case 36:Ot.k.up&&se(1);break;case 35:Ot.k.down&&se(e(g).length);break;case 37:Ot.k.left&&le();break;case 39:Ot.k.right&&re();break;default:;}}(t)},150)}}function Fe(){e(this).prev().trigger("click")}function Be(e){Et&&(bt=e.ctrlKey)}function De(e){2==e.which&&(Zt=e.pageY,Tt.on("mousemove",We))}function je(e){2==e.which&&Tt.off("mousemove")}function He(){var t=e(this).closest(g);e(this).hasClass(q)?Ot.m.left&&le(t):Ot.m.right&&re(t)}function Ve(){Et=!1,bt=!1}function _e(t){t.preventDefault();var n=e(this).parent().index();Ce(e(g).eq(n))}function qe(t){t.preventDefault();var n=e(this).closest(g).find(z);$e(n,n.find(L).eq(e(this).closest("li").index()))}function We(e){Pt&&(e.pageY<Zt&&Ot.m.up?oe():e.pageY>Zt&&Ot.m.down&&ae()),Zt=e.pageY}function $e(t,n,a){var i=t.closest(g),s={slides:t,destiny:n,direction:a,destinyPos:n.position(),slideIndex:n.index(),section:i,sectionIndex:i.index(g),anchorLink:i.data("anchor"),slidesNav:i.find(H),slideAnchor:st(n),prevSlide:i.find(O),prevSlideIndex:i.find(O).index(),localIsResizing:It};s.xMovement=function(e,t){if(e==t)return"none";if(e>t)return"left";return"right"}(s.prevSlideIndex,s.slideIndex),s.localIsResizing||(Pt=!1),X.onSlideLeave&&!s.localIsResizing&&"none"!==s.xMovement&&e.isFunction(X.onSlideLeave)&&!1===X.onSlideLeave.call(s.prevSlide,s.anchorLink,s.sectionIndex+1,s.prevSlideIndex,s.direction,s.slideIndex)?Ct=!1:(n.addClass(f).siblings().removeClass(f),s.localIsResizing||(Ee(s.prevSlide),Te(n)),!X.loopHorizontal&&X.controlArrows&&(i.find($).toggle(0!==s.slideIndex),i.find(N).toggle(!n.is(":last-child"))),i.hasClass(f)&&!s.localIsResizing&&at(s.slideIndex,s.slideAnchor,s.anchorLink,s.sectionIndex),function(e,t,n){var a=t.destinyPos;if(X.css3){var i="translate3d(-"+o.round(a.left)+"px, 0px, 0px)";Ue(e.find(B)).css(dt(i)),Bt=setTimeout(function(){n&&Ge(t)},X.scrollingSpeed,X.easing)}else e.animate({scrollLeft:o.round(a.left)},X.scrollingSpeed,X.easing,function(){n&&Ge(t)})}(t,s,!0))}function Ge(t){!function(e,t){e.find(h).removeClass(f),e.find("li").eq(t).find("a").addClass(f)}(t.slidesNav,t.slideIndex),t.localIsResizing||(e.isFunction(X.afterSlideLoad)&&X.afterSlideLoad.call(t.destiny,t.anchorLink,t.sectionIndex+1,t.slideAnchor,t.slideIndex),Pt=!0,Ae(t.destiny)),Ct=!1}function Ne(){if(Ye(),xt){var t=e(n.activeElement);if(!t.is("textarea")&&!t.is("input")&&!t.is("select")){var a=Y.height();o.abs(a-Qt)>20*o.max(Qt,a)/100&&(ce(!0),Qt=a)}}else clearTimeout(zt),zt=setTimeout(function(){ce(!0)},350)}function Ye(){var e=X.responsive||X.responsiveWidth,t=X.responsiveHeight,n=e&&Y.outerWidth()<e,o=t&&Y.height()<t;e&&t?ue(n||o):e?ue(n):t&&ue(o)}function Ue(e){var t="all "+X.scrollingSpeed+"ms "+X.easingcss3;return e.removeClass(l),e.css({"-webkit-transition":t,transition:t})}function Xe(e){return e.addClass(l)}function Ke(t,n){!function(t){X.menu&&(e(X.menu).find(h).removeClass(f),e(X.menu).find('[data-menuanchor="'+t+'"]').addClass(f))}(t),function(t,n){X.navigation&&(e(T).find(h).removeClass(f),t?e(T).find('a[href="#'+t+'"]').addClass(f):e(T).find("li").eq(n).find("a").addClass(f))}(t,n)}function Ze(t){var n=e(y).index(g),o=t.index(g);return n==o?"none":n>o?"up":"down"}function Qe(e){e.hasClass(D)||e.addClass(D).wrapInner('<div class="'+b+'" style="height:'+Je(e)+'px;" />')}function Je(e){var t=At;if(X.paddingTop||X.paddingBottom){var n=e;n.hasClass(m)||(n=e.closest(g));var o=parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom"));t=At-o}return t}function et(e,t){t?Ue(Tt):Xe(Tt),Tt.css(dt(e)),setTimeout(function(){Tt.removeClass(l)},10)}function tt(t){if(!t)return[];var n=Tt.find(g+'[data-anchor="'+t+'"]');return n.length||(n=e(g).eq(t-1)),n}function nt(e,t){var n=tt(e);n.length&&(void 0===t&&(t=0),e===kt||n.hasClass(f)?ot(n,t):Ce(n,function(){ot(n,t)}))}function ot(e,t){if(void 0!==t){var n=e.find(z),o=function(e,t){var n=t.find(z),o=n.find(L+'[data-anchor="'+e+'"]');return o.length||(o=n.find(L).eq(e)),o}(t,e);o.length&&$e(n,o)}}function at(e,t,n,o){var a="";X.anchors.length&&!X.lockAnchors&&(e?(void 0!==n&&(a=n),void 0===t&&(t=e),wt=t,it(a+"/"+t)):void 0!==e?(wt=t,it(n)):it(n)),rt()}function it(e){if(X.recordHistory)location.hash=e;else if(xt||Mt)t.history.replaceState(a,a,"#"+e);else{var n=t.location.href.split("#")[0];t.location.replace(n+"#"+e)}}function st(e){var t=e.data("anchor"),n=e.index();return void 0===t&&(t=n),t}function rt(){var t=e(y),n=t.find(O),o=st(t),a=st(n),i=String(o);n.length&&(i=i+"-"+a),i=i.replace("/","-").replace("#","");var s=new RegExp("\\b\\s?"+d+"-[^\\s]+\\b","g");gt[0].className=gt[0].className.replace(s,""),gt.addClass(d+"-"+i)}function lt(e){var t=[];return t.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,Mt&&ge(e)&&X.scrollBar&&(t.y=e.touches[0].pageY,t.x=e.touches[0].pageX),t}function ct(e,t){Q(0,"internal"),void 0!==t&&(It=!0),$e(e.closest(z),e),void 0!==t&&(It=!1),Q(qt.scrollingSpeed,"internal")}function ut(e){var t=o.round(e);if(X.css3&&X.autoScrolling&&!X.scrollBar){et("translate3d(0px, -"+t+"px, 0px)",!1)}else X.autoScrolling&&!X.scrollBar?Tt.css("top",-t):mt.scrollTop(t)}function dt(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}function ft(t,n,o){"all"!==n?Ot[o][n]=t:e.each(Object.keys(Ot[o]),function(e,n){Ot[o][n]=t})}function ht(e,t,n){X[e]=t,"internal"!==n&&(qt[e]=t)}function vt(){e("html").hasClass(u)?pt("error","Fullpage.js can only be initialized once and you are doing it multiple times!"):(X.continuousVertical&&(X.loopTop||X.loopBottom)&&(X.continuousVertical=!1,pt("warn","Option `loopTop/loopBottom` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),X.scrollBar&&X.scrollOverflow&&pt("warn","Option `scrollBar` is mutually exclusive with `scrollOverflow`. Sections with scrollOverflow might not work well in Firefox"),!X.continuousVertical||!X.scrollBar&&X.autoScrolling||(X.continuousVertical=!1,pt("warn","Scroll bars (`scrollBar:true` or `autoScrolling:false`) are mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),X.scrollOverflow&&!X.scrollOverflowHandler&&(X.scrollOverflow=!1,pt("error","The option `scrollOverflow:true` requires the file `scrolloverflow.min.js`. Please include it before fullPage.js.")),e.each(["fadingEffect","continuousHorizontal","scrollHorizontally","interlockedSlides","resetSliders","responsiveSlides","offsetSections","dragAndMove","scrollOverflowReset","parallax"],function(e,t){X[t]&&pt("warn","fullpage.js extensions require jquery.fullpage.extensions.min.js file instead of the usual jquery.fullpage.js. Requested: "+t)}),e.each(X.anchors,function(t,n){var o=U.find("[name]").filter(function(){return e(this).attr("name")&&e(this).attr("name").toLowerCase()==n.toLowerCase()}),a=U.find("[id]").filter(function(){return e(this).attr("id")&&e(this).attr("id").toLowerCase()==n.toLowerCase()});(a.length||o.length)&&(pt("error","data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE)."),a.length&&pt("error",'"'+n+'" is is being used by another element `id` property'),o.length&&pt("error",'"'+n+'" is is being used by another element `name` property'))}))}function pt(e,t){console&&console[e]&&console[e]("fullPage: "+t)}if(e("html").hasClass(u))vt();else{var mt=e("html, body"),gt=e("body"),yt=e.fn.fullpage;X=e.extend({menu:!1,anchors:[],lockAnchors:!1,navigation:!1,navigationPosition:"right",navigationTooltips:[],showActiveTooltip:!1,slidesNavigation:!1,slidesNavPosition:"bottom",scrollBar:!1,hybrid:!1,css3:!0,scrollingSpeed:700,autoScrolling:!0,fitToSection:!0,fitToSectionDelay:1e3,easing:"easeInOutCubic",easingcss3:"ease",loopBottom:!1,loopTop:!1,loopHorizontal:!0,continuousVertical:!1,continuousHorizontal:!1,scrollHorizontally:!1,interlockedSlides:!1,dragAndMove:!1,offsetSections:!1,resetSliders:!1,fadingEffect:!1,normalScrollElements:null,scrollOverflow:!1,scrollOverflowReset:!1,scrollOverflowHandler:e.fn.fp_scrolloverflow?e.fn.fp_scrolloverflow.iscrollHandler:null,scrollOverflowOptions:null,touchSensitivity:5,normalScrollElementTouchThreshold:5,bigSectionsDestination:null,keyboardScrolling:!0,animateAnchor:!0,recordHistory:!0,controlArrows:!0,controlArrowColor:"#fff",verticalCentered:!0,sectionsColor:[],paddingTop:0,paddingBottom:0,fixedElements:null,responsive:0,responsiveWidth:0,responsiveHeight:0,responsiveSlides:!1,parallax:!1,parallaxOptions:{type:"reveal",percentage:62,property:"translate"},sectionSelector:".section",slideSelector:".slide",afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterReBuild:null,afterSlideLoad:null,onSlideLeave:null,afterResponsive:null,lazyLoading:!0},X);var kt,wt,bt,St,Ct=!1,xt=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),Mt="ontouchstart"in t||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,Tt=e(this),At=Y.height(),It=!1,Et=!0,Pt=!0,Lt=[],Ot={};Ot.m={up:!0,down:!0,left:!0,right:!0},Ot.k=e.extend(!0,{},Ot.m);var Rt,zt,Ft,Bt,Dt,jt,Ht,Vt=t.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"},_t={touchmove:"ontouchmove"in t?"touchmove":Vt.move,touchstart:"ontouchstart"in t?"touchstart":Vt.down},qt=e.extend(!0,{},X);vt(),e.extend(e.easing,{easeInOutCubic:function(e,t,n,o,a){return(t/=a/2)<1?o/2*t*t*t+n:o/2*((t-=2)*t*t+2)+n}}),e(this).length&&(yt.version="2.9.5",yt.setAutoScrolling=K,yt.setRecordHistory=Z,yt.setScrollingSpeed=Q,yt.setFitToSection=J,yt.setLockAnchors=function(e){X.lockAnchors=e},yt.setMouseWheelScrolling=ee,yt.setAllowScrolling=te,yt.setKeyboardScrolling=ne,yt.moveSectionUp=oe,yt.moveSectionDown=ae,yt.silentMoveTo=ie,yt.moveTo=se,yt.moveSlideRight=re,yt.moveSlideLeft=le,yt.fitToSection=he,yt.reBuild=ce,yt.setResponsive=ue,yt.destroy=function(t){K(!1,"internal"),te(!1),ne(!1),Tt.addClass(c),clearTimeout(Bt),clearTimeout(Ft),clearTimeout(zt),clearTimeout(Dt),clearTimeout(jt),Y.off("scroll",fe).off("hashchange",Oe).off("resize",Ne),U.off("click touchstart",T+" a").off("mouseenter",T+" li").off("mouseleave",T+" li").off("click touchstart",V).off("mouseover",X.normalScrollElements).off("mouseout",X.normalScrollElements),e(g).off("click touchstart",_),clearTimeout(Bt),clearTimeout(Ft),t&&function(){ut(0),Tt.find("img[data-src], source[data-src], audio[data-src], iframe[data-src]").each(function(){Me(e(this),"src")}),Tt.find("img[data-srcset]").each(function(){Me(e(this),"srcset")}),e(T+", "+H+", "+_).remove(),e(g).css({height:"","background-color":"",padding:""}),e(L).css({width:""}),Tt.css({height:"",position:"","-ms-touch-action":"","touch-action":""}),mt.css({overflow:"",height:""}),e("html").removeClass(u),gt.removeClass(r),e.each(gt.get(0).className.split(/\s+/),function(e,t){0===t.indexOf(d)&&gt.removeClass(t)}),e(g+", "+L).each(function(){X.scrollOverflowHandler&&X.scrollOverflowHandler.remove(e(this)),e(this).removeClass(D+" "+f)}),Xe(Tt),Tt.find(S+", "+B+", "+z).each(function(){e(this).replaceWith(this.childNodes)}),Tt.css({"-webkit-transition":"none",transition:"none"}),mt.scrollTop(0);var t=[m,P,F];e.each(t,function(t,n){e("."+n).removeClass(n)})}()},yt.shared={afterRenderActions:de},X.css3&&(X.css3=function(){var e,o=n.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};n.body.insertBefore(o,null);for(var s in i)o.style[s]!==a&&(o.style[s]="translate3d(1px,1px,1px)",e=t.getComputedStyle(o).getPropertyValue(i[s]));return n.body.removeChild(o),e!==a&&e.length>0&&"none"!==e}()),X.scrollBar=X.scrollBar||X.hybrid,function(){var t=Tt.find(X.sectionSelector);X.anchors.length||(X.anchors=t.filter("[data-anchor]").map(function(){return e(this).data("anchor").toString()}).get()),X.navigationTooltips.length||(X.navigationTooltips=t.filter("[data-tooltip]").map(function(){return e(this).data("tooltip").toString()}).get())}(),Tt.css({height:"100%",position:"relative"}),Tt.addClass(i),e("html").addClass(u),At=Y.height(),Tt.removeClass(c),Tt.find(X.sectionSelector).addClass(m),Tt.find(X.slideSelector).addClass(P),e(g).each(function(t){var n=e(this),o=n.find(L),a=o.length;!function(t,n){n||0!==e(y).length||t.addClass(f),St=e(y),t.css("height",At+"px"),X.paddingTop&&t.css("padding-top",X.paddingTop),X.paddingBottom&&t.css("padding-bottom",X.paddingBottom),void 0!==X.sectionsColor[n]&&t.css("background-color",X.sectionsColor[n]),void 0!==X.anchors[n]&&t.attr("data-anchor",X.anchors[n])}(n,t),function(t,n){void 0!==X.anchors[n]&&t.hasClass(f)&&Ke(X.anchors[n],n),X.menu&&X.css3&&e(X.menu).closest(s).length&&e(X.menu).appendTo(gt)}(n,t),a>0?function(t,n,o){var a=100*o,i=100/o;n.wrapAll('<div class="'+F+'" />'),n.parent().wrap('<div class="'+R+'" />'),t.find(B).css("width",a+"%"),o>1&&(X.controlArrows&&function(e){e.find(z).after('<div class="'+W+'"></div><div class="'+G+'"></div>'),"#fff"!=X.controlArrowColor&&(e.find(N).css("border-color","transparent transparent transparent "+X.controlArrowColor),e.find($).css("border-color","transparent "+X.controlArrowColor+" transparent transparent")),X.loopHorizontal||e.find($).hide()}(t),X.slidesNavigation&&function(e,t){e.append('<div class="'+j+'"><ul></ul></div>');var n=e.find(H);n.addClass(X.slidesNavPosition);for(var o=0;o<t;o++)n.find("ul").append('<li><a href="#"><span></span></a></li>');n.css("margin-left","-"+n.width()/2+"px"),n.find("li").first().find("a").addClass(f)}(t,o)),n.each(function(t){e(this).css("width",i+"%"),X.verticalCentered&&Qe(e(this))});var s=t.find(O);s.length&&(0!==e(y).index(g)||0===e(y).index(g)&&0!==s.index())?ct(s,"internal"):n.eq(0).addClass(f)}(n,o,a):X.verticalCentered&&Qe(n)}),X.fixedElements&&X.css3&&e(X.fixedElements).appendTo(gt),X.navigation&&function(){gt.append('<div id="'+M+'"><ul></ul></div>');var t=e(T);t.addClass(function(){return X.showActiveTooltip?E+" "+X.navigationPosition:X.navigationPosition});for(var n=0;n<e(g).length;n++){var o="";X.anchors.length&&(o=X.anchors[n]);var a='<li><a href="#'+o+'"><span></span></a>',i=X.navigationTooltips[n];void 0!==i&&""!==i&&(a+='<div class="'+A+" "+X.navigationPosition+'">'+i+"</div>"),a+="</li>",t.find("ul").append(a)}e(T).css("margin-top","-"+e(T).height()/2+"px"),e(T).find("li").eq(e(y).index(g)).find("a").addClass(f)}(),Tt.find('iframe[src*="youtube.com/embed/"]').each(function(){!function(e,t){var n=e.attr("src");e.attr("src",n+(/\?/.test(n)?"&":"?")+t)}(e(this),"enablejsapi=1")}),X.scrollOverflow?Rt=X.scrollOverflowHandler.init(X):de(),te(!0),K(X.autoScrolling,"internal"),Ye(),rt(),"complete"===n.readyState&&Le(),Y.on("load",Le),Y.on("scroll",fe).on("hashchange",Oe).blur(Ve).resize(Ne),U.keydown(ze).keyup(Be).on("click touchstart",T+" a",_e).on("click touchstart",V,qe).on("click",I,Fe),e(g).on("click touchstart",_,He),X.normalScrollElements&&(U.on("mouseenter touchstart",X.normalScrollElements,function(){te(!1)}),U.on("mouseleave touchend",X.normalScrollElements,function(){te(!0)})));var Wt=!1,$t=0,Gt=0,Nt=0,Yt=0,Ut=0,Xt=(new Date).getTime(),Kt=0,Zt=0,Qt=At}}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Animate=function(){function e(){_classCallCheck(this,e),this.gradientInterval,this.params={load:{selector:"mainMask",beginStep:-2e3,finishStep:1e3,step:50},main:{selector:"mainMask",beginStep:-2900,finishStep:1e3,step:50,time:2500},mobile:{selector:"mainMobileMask",beginStep:-700,finishStep:400,step:25,time:3e3}}}return _createClass(e,[{key:"animateTransform",value:function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"X",i=document.getElementById(e);requestAnimationFrame(function e(){var s="X"===a?t:"0, "+t;t+=o,i.setAttribute("transform","translate("+s+")"),t===n?cancelAnimationFrame(e):requestAnimationFrame(e)})}},{key:"startAnimation",value:function(){this.animateTransform("first-fill",100,-5,-5,"Y"),this.animateTransform("second-fill",-200,10,10,"Y"),this.animateTransform("third-fill",-100,5,5,"Y"),this.animateTransform("fourth-fill",200,-10,-10,"Y")}},{key:"initGradient",value:function(e){this.animateTransform(this.params[e].selector,this.params[e].beginStep,this.params[e].finishStep,this.params[e].step)}},{key:"initGradientInterval",value:function(e){var t=this;this.gradientInterval=setInterval(function(){t.initGradient(e)},this.params[e].time)}},{key:"clearGradientInterval",value:function(){clearInterval(this.gradientInterval)}}]),e}(),Validate=function(){function e(){_classCallCheck(this,e),this.emailParams={}}return _createClass(e,[{key:"checkValidField",value:function(e){this.pattern=new RegExp(e.pattern),this.result="email-field"===e.id?this.pattern.exec(e.value.toLowerCase()):this.pattern.exec(e.value),this.checkEmptyField(e),!this.result||"message-field"===e.id&&e.value.length<50?this.setErrorClass(e):(this.clearErrors(e),this.emailParams[e.name]=e.value)}},{key:"setErrorClass",value:function(e){e.parentElement.classList.add("error"),e.validFieldCount=!1}},{key:"clearErrors",value:function(e){e.parentElement.classList.remove("error"),e.validFieldCount=!0}},{key:"checkEmptyField",value:function(e){this.blockClassList=e.parentElement.classList,e.value?this.blockClassList.add("not-empty"):this.blockClassList.remove("not-empty")}},{key:"sendForm",value:function(){var e=this,t=$("#form .field");this.validFieldsCount=0,t.each(function(t,n){e.checkValidField(n),""!==n.value&&n.validFieldCount?e.validFieldsCount+=1:e.validFieldsCount-=1}),this.validFieldsCount===t.length&&_sendForm.send(this.emailParams)}}]),e}(),Plugin=function(){function e(){_classCallCheck(this,e),this.statePluginWorking}return _createClass(e,[{key:"init",value:function(){this.statePluginWorking=!0,$("#fullpage").fullpage({navigation:!0,navigationPosition:"right",navigationTooltips:["Home","About","Contact Us"],showActiveTooltip:!0,scrollingSpeed:1e3,easingcss3:"none",fadingEffect:!1,afterRender:function(){animate.startAnimation(),animate.initGradientInterval("main")}})}},{key:"destroy",value:function(){this.statePluginWorking=!1,$.fn.fullpage.destroy("all")}}]),e}(),WindowResize=function(){function e(){_classCallCheck(this,e),this.resizePoint=767}return _createClass(e,[{key:"init",value:function(){$(".loader").remove(),$("body").removeClass("loading"),document.documentElement.clientWidth>this.resizePoint&&!plugin.statePluginWorking?this.desktopView():document.documentElement.clientWidth<=this.resizePoint&&(animate.clearGradientInterval(),animate.initGradientInterval("mobile"),plugin.statePluginWorking&&this.mobileView())}},{key:"desktopView",value:function(){animate.clearGradientInterval(),$(".anchor").removeAttr("name"),plugin.init()}},{key:"mobileView",value:function(){plugin.destroy(),$("#section2 .anchor").attr("name","AboutUs"),$("#section3 .anchor").attr("name","ContactUS")}}]),e}(),SendForm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"send",value:function(e){var t={to:"insurancerevenuetest@gmail.com",url:"https://api:key-af9370a96ee53df27a764555aacb37f4@api.mailgun.net/v3/sandboxb17b077be1ce4b0caf2433578761d938.mailgun.org/messages",method:"POST",subject:"Contact Us Message",text:"Name: "+e.name+" \nEmail: "+e.email+" \nPhone Number: "+e.phone+" \nMessage: "+e.message,from:"From Ivan <Ivan@sandboxb17b077be1ce4b0caf2433578761d938.mailgun.org>"};this.success(),console.log(t,"params for send"),$.ajax(t).done(function(e){console.log(e,"response after send")})}},{key:"success",value:function(){$("#form").addClass("invisible"),$(".success-message").addClass("active")}}]),e}(),Menu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"checkSate",value:function(){$(".open-menu").length?$(".menu-wrap").removeClass("open-menu"):$(".menu-wrap").addClass("open-menu")}}]),e}(),animate=new Animate,validate=new Validate,plugin=new Plugin,windowResize=new WindowResize,menu=new Menu,_sendForm=new SendForm;$(document).ready(function(){setTimeout(function(){animate.startAnimation(),animate.initGradient("load")},300),setTimeout(function(){windowResize.init()},2e3),$("#phone-field").mask("### ###",{translation:{"#":{pattern:/a-zA-Z/,recursive:!0}}});var e=document.getElementById("form");e.addEventListener("focus",function(e){validate.clearErrors(e.target)},!0),e.addEventListener("blur",function(e){validate.checkEmptyField(e.target)},!0),$(".menu-wrap").click(function(){menu.checkSate()}),$("#send-button").click(function(e){e.preventDefault(),validate.sendForm()})}),$(window).resize(function(){return windowResize.init()});_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,n){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(t||n)}(function(e){var t=function(t,n,o){var a={invalid:[],getCaret:function(){try{var e,n=0,o=t.get(0),i=document.selection,s=o.selectionStart;return i&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=i.createRange()).moveStart("character",-a.val().length),n=e.text.length):(s||"0"===s)&&(n=s),n}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var n,o=t.get(0);o.setSelectionRange?o.setSelectionRange(e,e):((n=o.createTextRange()).collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select())}}catch(e){}},events:function(){t.on("keydown.mask",function(e){t.data("mask-keycode",e.keyCode||e.which),t.data("mask-previus-value",t.val()),t.data("mask-previus-caret-pos",a.getCaret()),a.maskDigitPosMapOld=a.maskDigitPosMap}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",a.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){r===a.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("blur.mask",function(){r=a.val()}).on("focus.mask",function(t){!0===o.selectOnFocus&&e(t.target).select()}).on("focusout.mask",function(){o.clearIfNotMatch&&!i.test(a.val())&&a.val("")})},getRegexMask:function(){for(var e,t,o,a,i,r,l=[],c=0;c<n.length;c++)(e=s.translation[n.charAt(c)])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),o=e.optional,(a=e.recursive)?(l.push(n.charAt(c)),i={digit:n.charAt(c),pattern:t}):l.push(o||a?t+"?":t)):l.push(n.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=l.join(""),i&&(r=r.replace(new RegExp("("+i.digit+"(.*"+i.digit+")?)"),"($1)?").replace(new RegExp(i.digit,"g"),i.pattern)),new RegExp(r)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var n,o=t.is("input")?"val":"text";return arguments.length>0?(t[o]()!==e&&t[o](e),n=t):n=t[o](),n},calculateCaretPosition:function(){var e=t.data("mask-previus-value")||"",n=a.getMasked(),o=a.getCaret();if(e!==n){var i=t.data("mask-previus-caret-pos")||0,s=n.length,r=e.length,l=0,c=0,u=0,d=0,f=0;for(f=o;f<s&&a.maskDigitPosMap[f];f++)c++;for(f=o-1;f>=0&&a.maskDigitPosMap[f];f--)l++;for(f=o-1;f>=0;f--)a.maskDigitPosMap[f]&&u++;for(f=i-1;f>=0;f--)a.maskDigitPosMapOld[f]&&d++;if(o>r)o=10*s;else if(i>=o&&i!==r){if(!a.maskDigitPosMapOld[o]){var h=o;o-=d-u,o-=l,a.maskDigitPosMap[o]&&(o=h)}}else o>i&&(o+=u-d,o+=c)}return o},behaviour:function(n){n=n||window.event,a.invalid=[];var o=t.data("mask-keycode");if(-1===e.inArray(o,s.byPassKeys)){var i=a.getMasked(),r=a.getCaret();return setTimeout(function(){a.setCaret(a.calculateCaretPosition())},10),a.val(i),a.setCaret(r),a.callbacks(n)}},getMasked:function(e,t){var i,r,l=[],c=void 0===t?a.val():t+"",u=0,d=n.length,f=0,h=c.length,v=1,p="push",m=-1,g=0,y=[];o.reverse?(p="unshift",v=-1,i=0,u=d-1,f=h-1,r=function(){return u>-1&&f>-1}):(i=d-1,r=function(){return u<d&&f<h});for(var k;r();){var w=n.charAt(u),b=c.charAt(f),S=s.translation[w];S?(b.match(S.pattern)?(l[p](b),S.recursive&&(-1===m?m=u:u===i&&(u=m-v),i===m&&(u-=v)),u+=v):b===k?(g--,k=void 0):S.optional?(u+=v,f-=v):S.fallback?(l[p](S.fallback),u+=v,f-=v):a.invalid.push({p:f,v:b,e:S.pattern}),f+=v):(e||l[p](w),b===w?(y.push(f),f+=v):(k=w,y.push(f+g),g++),u+=v)}var C=n.charAt(i);d!==h+1||s.translation[C]||l.push(C);var x=l.join("");return a.mapMaskdigitPositions(x,y,h),x},mapMaskdigitPositions:function(e,t,n){var i=o.reverse?e.length-n:0;a.maskDigitPosMap={};for(var s=0;s<t.length;s++)a.maskDigitPosMap[t[s]+i]=1},callbacks:function(e){var i=a.val(),s=i!==r,l=[i,e,t,o],c=function(e,t,n){"function"==typeof o[e]&&t&&o[e].apply(this,n)};c("onChange",!0===s,l),c("onKeyPress",!0===s,l),c("onComplete",i.length===n.length,l),c("onInvalid",a.invalid.length>0,[i,e,t,a.invalid,o])}};t=e(t);var i,s=this,r=a.val();n="function"==typeof n?n(a.val(),void 0,t,o):n,s.mask=n,s.options=o,s.remove=function(){var e=a.getCaret();return a.destroyEvents(),a.val(s.getCleanVal()),a.setCaret(e),t},s.getCleanVal=function(){return a.getMasked(!0)},s.getMaskedVal=function(e){return a.getMasked(!1,e)},s.init=function(r){if(r=r||!1,o=o||{},s.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,s.byPassKeys=e.jMaskGlobals.byPassKeys,s.translation=e.extend({},e.jMaskGlobals.translation,o.translation),s=e.extend(!0,{},s,o),i=a.getRegexMask(),r)a.events(),a.val(a.getMasked());else{o.placeholder&&t.attr("placeholder",o.placeholder),t.data("mask")&&t.attr("autocomplete","off");for(var l=0,c=!0;l<n.length;l++){var u=s.translation[n.charAt(l)];if(u&&u.recursive){c=!1;break}}c&&t.attr("maxlength",n.length),a.destroyEvents(),a.events();var d=a.getCaret();a.val(a.getMasked()),a.setCaret(d)}},s.init(!t.is("input"))};e.maskWatchers={};var n=function(){var n=e(this),a={},i=n.attr("data-mask");if(n.attr("data-mask-reverse")&&(a.reverse=!0),n.attr("data-mask-clearifnotmatch")&&(a.clearIfNotMatch=!0),"true"===n.attr("data-mask-selectonfocus")&&(a.selectOnFocus=!0),o(n,i,a))return n.data("mask",new t(this,i,a))},o=function(t,n,o){o=o||{};var a=e(t).data("mask"),i=JSON.stringify,s=e(t).val()||e(t).text();try{return"function"==typeof n&&(n=n(s)),"object"!==(void 0===a?"undefined":_typeof(a))||i(a.options)!==i(o)||a.mask!==n}catch(e){}};e.fn.mask=function(n,a){a=a||{};var i=this.selector,s=e.jMaskGlobals,r=s.watchInterval,l=a.watchInputs||s.watchInputs,c=function(){if(o(this,n,a))return e(this).data("mask",new t(this,n,a))};return e(this).each(c),i&&""!==i&&l&&(clearInterval(e.maskWatchers[i]),e.maskWatchers[i]=setInterval(function(){e(document).find(i).each(c)},r)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){((t=t||e.jMaskGlobals.maskElements)instanceof e?t:e(t)).filter(e.jMaskGlobals.dataMaskAttr).each(n)};var a={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&function(e){var t,n=document.createElement("div");return e="on"+e,(t=e in n)||(n.setAttribute(e,"return;"),t="function"==typeof n[e]),n=null,t}("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},(a=e.jMaskGlobals=e.extend(!0,{},a,e.jMaskGlobals)).dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},a.watchInterval)},window.jQuery,window.Zepto);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bGxQYWdlLmpzIiwibWFpbi5qcyIsIm1hc2tlZGlucHV0LmpzIl0sIm5hbWVzIjpbIl90eXBlb2YiLCJTeW1ib2wiLCJfdHlwZW9mMiIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJnbG9iYWwiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiJCIsImRvY3VtZW50IiwiTWF0aCIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwialF1ZXJ5Iiwid2luZG93IiwidW5kZWZpbmVkIiwiV1JBUFBFUiIsIldSQVBQRVJfU0VMIiwiUkVTUE9OU0lWRSIsIk5PX1RSQU5TSVRJT04iLCJERVNUUk9ZRUQiLCJFTkFCTEVEIiwiVklFV0lOR19QUkVGSVgiLCJBQ1RJVkUiLCJBQ1RJVkVfU0VMIiwiQ09NUExFVEVMWSIsIkNPTVBMRVRFTFlfU0VMIiwiU0VDVElPTiIsIlNFQ1RJT05fU0VMIiwiU0VDVElPTl9BQ1RJVkVfU0VMIiwiU0VDVElPTl9GSVJTVF9TRUwiLCJTRUNUSU9OX0xBU1RfU0VMIiwiVEFCTEVfQ0VMTCIsIlRBQkxFX0NFTExfU0VMIiwiQVVUT19IRUlHSFQiLCJOT1JNQUxfU0NST0xMIiwiU0VDVElPTl9OQVYiLCJTRUNUSU9OX05BVl9TRUwiLCJTRUNUSU9OX05BVl9UT09MVElQIiwiU0VDVElPTl9OQVZfVE9PTFRJUF9TRUwiLCJTSE9XX0FDVElWRV9UT09MVElQIiwiU0xJREUiLCJTTElERV9TRUwiLCJTTElERV9BQ1RJVkVfU0VMIiwiU0xJREVTX1dSQVBQRVIiLCJTTElERVNfV1JBUFBFUl9TRUwiLCJTTElERVNfQ09OVEFJTkVSIiwiU0xJREVTX0NPTlRBSU5FUl9TRUwiLCJUQUJMRSIsIlNMSURFU19OQVYiLCJTTElERVNfTkFWX1NFTCIsIlNMSURFU19OQVZfTElOS19TRUwiLCJTTElERVNfQVJST1dfU0VMIiwiU0xJREVTX1BSRVYiLCJTTElERVNfQVJST1dfUFJFViIsIlNMSURFU19BUlJPVyIsIlNMSURFU19BUlJPV19QUkVWX1NFTCIsIlNMSURFU19BUlJPV19ORVhUIiwiU0xJREVTX0FSUk9XX05FWFRfU0VMIiwiJHdpbmRvdyIsIiRkb2N1bWVudCIsImZuIiwiZnVsbHBhZ2UiLCJvcHRpb25zIiwic2V0QXV0b1Njcm9sbGluZyIsInZhbHVlIiwidHlwZSIsInNpbGVudFNjcm9sbCIsInNldFZhcmlhYmxlU3RhdGUiLCJlbGVtZW50IiwiYXV0b1Njcm9sbGluZyIsInNjcm9sbEJhciIsIiRodG1sQm9keSIsImNzcyIsIm92ZXJmbG93IiwiaGVpZ2h0Iiwic2V0UmVjb3JkSGlzdG9yeSIsIm9yaWdpbmFscyIsInJlY29yZEhpc3RvcnkiLCJjb250YWluZXIiLCItbXMtdG91Y2gtYWN0aW9uIiwidG91Y2gtYWN0aW9uIiwibGVuZ3RoIiwicG9zaXRpb24iLCJ0b3AiLCJzY3JvbGxUb3AiLCJzZXRTY3JvbGxpbmdTcGVlZCIsInNldEZpdFRvU2VjdGlvbiIsInNldE1vdXNlV2hlZWxTY3JvbGxpbmciLCJfYWRkRXZlbnRMaXN0ZW5lciIsInByZWZpeCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdXBwb3J0IiwiY3JlYXRlRWxlbWVudCIsIm9ubW91c2V3aGVlbCIsIk1vdXNlV2hlZWxIYW5kbGVyIiwiYWRkTW91c2VXaGVlbEhhbmRsZXIiLCJvbiIsIm1vdXNlRG93bkhhbmRsZXIiLCJtb3VzZVVwSGFuZGxlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsIm9mZiIsInNldEFsbG93U2Nyb2xsaW5nIiwiZGlyZWN0aW9ucyIsInJlcGxhY2UiLCJzcGxpdCIsImVhY2giLCJpbmRleCIsImRpcmVjdGlvbiIsInNldElzU2Nyb2xsQWxsb3dlZCIsImlzVG91Y2hEZXZpY2UiLCJpc1RvdWNoIiwiJGJvZHkiLCJldmVudHMiLCJ0b3VjaG1vdmUiLCJwcmV2ZW50Qm91bmNpbmciLCJ0b3VjaHN0YXJ0IiwidG91Y2hTdGFydEhhbmRsZXIiLCJ0b3VjaE1vdmVIYW5kbGVyIiwic2V0S2V5Ym9hcmRTY3JvbGxpbmciLCJrZXlib2FyZFNjcm9sbGluZyIsIm1vdmVTZWN0aW9uVXAiLCJwcmV2IiwibG9vcFRvcCIsImNvbnRpbnVvdXNWZXJ0aWNhbCIsImxhc3QiLCJzY3JvbGxQYWdlIiwibW92ZVNlY3Rpb25Eb3duIiwibmV4dCIsImxvb3BCb3R0b20iLCJmaXJzdCIsInNpbGVudE1vdmVUbyIsInNlY3Rpb25BbmNob3IiLCJzbGlkZUFuY2hvciIsIm1vdmVUbyIsInNjcm9sbGluZ1NwZWVkIiwiZGVzdGlueSIsImdldFNlY3Rpb25CeUFuY2hvciIsInNjcm9sbFBhZ2VBbmRTbGlkZSIsIm1vdmVTbGlkZVJpZ2h0Iiwic2VjdGlvbiIsIm1vdmVTbGlkZSIsIm1vdmVTbGlkZUxlZnQiLCJyZUJ1aWxkIiwicmVzaXppbmciLCJoYXNDbGFzcyIsImlzUmVzaXppbmciLCJ3aW5kb3dzSGVpZ2h0Iiwic2xpZGVzV3JhcCIsInRoaXMiLCJmaW5kIiwic2xpZGVzIiwidmVydGljYWxDZW50ZXJlZCIsImdldFRhYmxlSGVpZ2h0IiwibGFuZHNjYXBlU2Nyb2xsIiwic2Nyb2xsT3ZlcmZsb3ciLCJzY3JvbGxCYXJIYW5kbGVyIiwiY3JlYXRlU2Nyb2xsQmFyRm9yQWxsIiwic2VjdGlvbkluZGV4IiwiaXNGdW5jdGlvbiIsImFmdGVyUmVzaXplIiwiY2FsbCIsImFmdGVyUmVCdWlsZCIsInNldFJlc3BvbnNpdmUiLCJhY3RpdmUiLCJpc1Jlc3BvbnNpdmUiLCJoaWRlIiwiYWRkQ2xhc3MiLCJhZnRlclJlc3BvbnNpdmUiLCJzaG93IiwicmVtb3ZlQ2xhc3MiLCJhZnRlclJlbmRlckFjdGlvbnMiLCJsYXp5TG9hZCIsInBsYXlNZWRpYSIsInNjcm9sbE92ZXJmbG93SGFuZGxlciIsImFmdGVyTG9hZCIsImRlc3RpbmF0aW9uU2VjdGlvbiIsImdldEFuY2hvcnNVUkwiLCJzdGFydGluZ1NlY3Rpb24iLCJpc0Rlc3RpbnlUaGVTdGFydGluZ1NlY3Rpb24iLCJkYXRhIiwiYWZ0ZXJSZW5kZXIiLCJzY3JvbGxIYW5kbGVyIiwiY3VycmVudFNlY3Rpb24iLCJjdXJyZW50U2Nyb2xsIiwic2Nyb2xsRGlyZWN0aW9uIiwibGFzdFNjcm9sbCIsInByZXZpb3VzRGVzdFRvcCIsImdldFNjcm9sbERpcmVjdGlvbiIsInZpc2libGVTZWN0aW9uSW5kZXgiLCJzY3JlZW5fbWlkIiwiaXNBdEJvdHRvbSIsInNlY3Rpb25zIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJvZmZzZXRUb3AiLCJtb3ZlbWVudCIsImJvdHRvbSIsImlzQ29tcGxldGVseUluVmlld1BvcnQiLCJzaWJsaW5ncyIsImVxIiwiaXNTY3JvbGxpbmciLCJzbGlkZUluZGV4Iiwic2xpZGVBbmNob3JMaW5rIiwibGVhdmluZ1NlY3Rpb24iLCJsZWF2aW5nU2VjdGlvbkluZGV4IiwieU1vdmVtZW50IiwiZ2V0WW1vdmVtZW50IiwiYW5jaG9yTGluayIsImFjdGl2ZVNsaWRlIiwiY2FuU2Nyb2xsIiwib25MZWF2ZSIsInN0b3BNZWRpYSIsImFjdGl2YXRlTWVudUFuZE5hdiIsImFuY2hvcnMiLCJsYXN0U2Nyb2xsZWREZXN0aW55Iiwic2V0U3RhdGUiLCJjbGVhclRpbWVvdXQiLCJzY3JvbGxJZCIsInNldFRpbWVvdXQiLCJmaXRUb1NlY3Rpb24iLCJzY3JvbGxJZDIiLCJvdXRlckhlaWdodCIsImZpdFRvU2VjdGlvbkRlbGF5Iiwic2Nyb2xsaW5nIiwiaXNTY3JvbGxBbGxvd2VkIiwibSIsInNjcm9sbFNlY3Rpb24iLCJzY3JvbGxhYmxlIiwiY2hlY2siLCJpc1Njcm9sbGVkIiwiZXZlbnQiLCJlIiwib3JpZ2luYWxFdmVudCIsImlzUmVhbGx5VG91Y2giLCJwcmV2ZW50RGVmYXVsdCIsImFjdGl2ZVNlY3Rpb24iLCJ0YXJnZXQiLCJjbG9zZXN0IiwidG91Y2hFdmVudHMiLCJnZXRFdmVudHNQYWdlIiwidG91Y2hFbmRZIiwieSIsInRvdWNoRW5kWCIsIngiLCJhYnMiLCJ0b3VjaFN0YXJ0WCIsInRvdWNoU3RhcnRZIiwic2xpZGVNb3ZpbmciLCJvdXRlcldpZHRoIiwidG91Y2hTZW5zaXRpdml0eSIsInJpZ2h0IiwibGVmdCIsInBvaW50ZXJUeXBlIiwic3RvcCIsImdldEF2ZXJhZ2UiLCJlbGVtZW50cyIsIm51bWJlciIsInN1bSIsImxhc3RFbGVtZW50cyIsInNsaWNlIiwibWF4IiwiY2VpbCIsImN1clRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsImlzTm9ybWFsU2Nyb2xsIiwiY29udHJvbFByZXNzZWQiLCJ3aGVlbERlbHRhIiwiZGVsdGFZIiwiZGV0YWlsIiwiZGVsdGEiLCJtaW4iLCJob3Jpem9udGFsRGV0ZWN0aW9uIiwid2hlZWxEZWx0YVgiLCJkZWx0YVgiLCJpc1Njcm9sbGluZ1ZlcnRpY2FsbHkiLCJzY3JvbGxpbmdzIiwic2hpZnQiLCJwdXNoIiwicmV0dXJuVmFsdWUiLCJ0aW1lRGlmZiIsInByZXZUaW1lIiwibnVtU2xpZGVzIiwiY3VycmVudFNsaWRlIiwibG9vcEhvcml6b250YWwiLCJrZWVwU2xpZGVzUG9zaXRpb24iLCJzaWxlbnRMYW5kc2NhcGVTY3JvbGwiLCJjYWxsYmFjayIsImlzTW92ZW1lbnRVcCIsInYiLCJkdG9wIiwiZWxlbVBvc2l0aW9uIiwiaXNTY3JvbGxpbmdEb3duIiwic2VjdGlvbkJvdHRvbSIsImJpZ1NlY3Rpb25zRGVzdGluYXRpb24iLCJpcyIsImdldERlc3RpbmF0aW9uUG9zaXRpb24iLCJsb2NhbElzUmVzaXppbmciLCJiZWZvcmUiLCJuZXh0QWxsIiwiYWZ0ZXIiLCJwcmV2QWxsIiwiZ2V0IiwicmV2ZXJzZSIsIndyYXBBcm91bmRFbGVtZW50cyIsImNyZWF0ZUluZmluaXRlU2VjdGlvbnMiLCJiZWZvcmVMZWF2ZSIsImNzczMiLCJ0cmFuc2Zvcm1Db250YWluZXIiLCJyb3VuZCIsImFmdGVyU2VjdGlvbkxvYWRzSWQiLCJhZnRlclNlY3Rpb25Mb2FkcyIsInNjcm9sbFNldHRpbmdzIiwic2Nyb2xsIiwiZ2V0U2Nyb2xsU2V0dGluZ3MiLCJhbmltYXRlIiwiZWFzaW5nIiwicHJvbWlzZSIsImRvbmUiLCJwZXJmb3JtTW92ZW1lbnQiLCJjb250aW51b3VzVmVydGljYWxGaXhTZWN0aW9uT3JkZXIiLCJzZXRTcmMiLCJhdHRyaWJ1dGUiLCJhdHRyIiwicmVtb3ZlQXR0ciIsImxhenlMb2FkaW5nIiwiZ2V0U2xpZGVPclNlY3Rpb24iLCJ0eXBlVG9QbGF5IiwibG9hZCIsInBhbmVsIiwiaGFzQXR0cmlidXRlIiwicGxheSIsInBsYXlZb3V0dWJlIiwib25sb2FkIiwiY29udGVudFdpbmRvdyIsInBvc3RNZXNzYWdlIiwicGF1c2UiLCJ0ZXN0Iiwic2xpZGUiLCJzY3JvbGxUb0FuY2hvciIsImFuaW1hdGVBbmNob3IiLCJoYXNoQ2hhbmdlSGFuZGxlciIsImxvY2tBbmNob3JzIiwiaXNGaXJzdFNsaWRlTW92ZSIsImlzRmlyc3RTY3JvbGxNb3ZlIiwibGFzdFNjcm9sbGVkU2xpZGUiLCJoYXNoIiwibG9jYXRpb24iLCJhbmNob3JzUGFydHMiLCJpc0Z1bmt5QW5jaG9yIiwiaW5kZXhPZiIsImRlY29kZVVSSUNvbXBvbmVudCIsImtleWRvd25IYW5kbGVyIiwia2V5ZG93bklkIiwiYWN0aXZlRWxlbWVudCIsImtleUNvZGUiLCJ3aGljaCIsImluQXJyYXkiLCJjdHJsS2V5Iiwic2hpZnRQcmVzc2VkIiwic2hpZnRLZXkiLCJrIiwidXAiLCJkb3duIiwib25rZXlkb3duIiwidG9vbHRpcFRleHRIYW5kbGVyIiwidHJpZ2dlciIsImtleVVwSGFuZGxlciIsImlzV2luZG93Rm9jdXNlZCIsIm9sZFBhZ2VZIiwicGFnZVkiLCJtb3VzZU1vdmVIYW5kbGVyIiwic2xpZGVBcnJvd0hhbmRsZXIiLCJibHVySGFuZGxlciIsInNlY3Rpb25CdWxsZXRIYW5kbGVyIiwicGFyZW50Iiwic2xpZGVCdWxsZXRIYW5kbGVyIiwiZGVzdGlueVBvcyIsInNsaWRlc05hdiIsImdldEFuY2hvciIsInByZXZTbGlkZSIsInByZXZTbGlkZUluZGV4IiwieE1vdmVtZW50IiwiZnJvbUluZGV4IiwidG9JbmRleCIsImdldFhtb3ZlbWVudCIsIm9uU2xpZGVMZWF2ZSIsImNvbnRyb2xBcnJvd3MiLCJ0b2dnbGUiLCJmaXJlQ2FsbGJhY2siLCJ0cmFuc2xhdGUzZCIsImFkZEFuaW1hdGlvbiIsImdldFRyYW5zZm9ybXMiLCJhZnRlclNsaWRlTG9hZHNJZCIsImFmdGVyU2xpZGVMb2FkcyIsInNjcm9sbExlZnQiLCJwZXJmb3JtSG9yaXpvbnRhbE1vdmUiLCJhY3RpdmVTbGlkZXNOYXZpZ2F0aW9uIiwiYWZ0ZXJTbGlkZUxvYWQiLCJyZXNpemVIYW5kbGVyIiwicmVzcG9uc2l2ZSIsImN1cnJlbnRIZWlnaHQiLCJwcmV2aW91c0hlaWdodCIsInJlc2l6ZUlkIiwid2lkdGhMaW1pdCIsInJlc3BvbnNpdmVXaWR0aCIsImhlaWdodExpbWl0IiwicmVzcG9uc2l2ZUhlaWdodCIsImlzQnJlYWtpbmdQb2ludFdpZHRoIiwiaXNCcmVha2luZ1BvaW50SGVpZ2h0IiwidHJhbnNpdGlvbiIsImVhc2luZ2NzczMiLCItd2Via2l0LXRyYW5zaXRpb24iLCJyZW1vdmVBbmltYXRpb24iLCJhbmNob3IiLCJuYW1lIiwibWVudSIsImFjdGl2YXRlTWVudUVsZW1lbnQiLCJuYXZpZ2F0aW9uIiwiYWN0aXZhdGVOYXZEb3RzIiwiYWRkVGFibGVDbGFzcyIsIndyYXBJbm5lciIsInNlY3Rpb25IZWlnaHQiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsInBhZGRpbmdzIiwicGFyc2VJbnQiLCJhbmltYXRlZCIsInNjcm9sbFNsaWRlciIsImdldFNsaWRlQnlBbmNob3IiLCJzZWN0aW9uSGFzaCIsInNldFVybEhhc2giLCJzZXRCb2R5Q2xhc3MiLCJ1cmwiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiYmFzZVVybCIsImhyZWYiLCJ0ZXh0IiwiU3RyaW5nIiwiY2xhc3NSZSIsIlJlZ0V4cCIsImNsYXNzTmFtZSIsInBhZ2VYIiwidG91Y2hlcyIsIm5vQ2FsbGJhY2tzIiwicm91bmRlZFRvcCIsIi13ZWJraXQtdHJhbnNmb3JtIiwiLW1vei10cmFuc2Zvcm0iLCItbXMtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsInZhcmlhYmxlIiwiZGlzcGxheVdhcm5pbmdzIiwic2hvd0Vycm9yIiwiZXh0ZW5zaW9uIiwibmFtZUF0dHIiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsImlkQXR0ciIsImNvbnNvbGUiLCJGUCIsImV4dGVuZCIsIm5hdmlnYXRpb25Qb3NpdGlvbiIsIm5hdmlnYXRpb25Ub29sdGlwcyIsInNob3dBY3RpdmVUb29sdGlwIiwic2xpZGVzTmF2aWdhdGlvbiIsInNsaWRlc05hdlBvc2l0aW9uIiwiaHlicmlkIiwiY29udGludW91c0hvcml6b250YWwiLCJzY3JvbGxIb3Jpem9udGFsbHkiLCJpbnRlcmxvY2tlZFNsaWRlcyIsImRyYWdBbmRNb3ZlIiwib2Zmc2V0U2VjdGlvbnMiLCJyZXNldFNsaWRlcnMiLCJmYWRpbmdFZmZlY3QiLCJub3JtYWxTY3JvbGxFbGVtZW50cyIsInNjcm9sbE92ZXJmbG93UmVzZXQiLCJmcF9zY3JvbGxvdmVyZmxvdyIsImlzY3JvbGxIYW5kbGVyIiwic2Nyb2xsT3ZlcmZsb3dPcHRpb25zIiwibm9ybWFsU2Nyb2xsRWxlbWVudFRvdWNoVGhyZXNob2xkIiwiY29udHJvbEFycm93Q29sb3IiLCJzZWN0aW9uc0NvbG9yIiwiZml4ZWRFbGVtZW50cyIsInJlc3BvbnNpdmVTbGlkZXMiLCJwYXJhbGxheCIsInBhcmFsbGF4T3B0aW9ucyIsInBlcmNlbnRhZ2UiLCJwcm9wZXJ0eSIsInNlY3Rpb25TZWxlY3RvciIsInNsaWRlU2VsZWN0b3IiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsIm1zTWF4VG91Y2hQb2ludHMiLCJtYXhUb3VjaFBvaW50cyIsIk1TUG9pbnRlciIsIlBvaW50ZXJFdmVudCIsIm1vdmUiLCJlYXNlSW5PdXRDdWJpYyIsInQiLCJiIiwiYyIsImQiLCJ2ZXJzaW9uIiwic2V0TG9ja0FuY2hvcnMiLCJkZXN0cm95IiwiYWxsIiwicmVtb3ZlIiwiYmFja2dyb3VuZC1jb2xvciIsInBhZGRpbmciLCJ3aWR0aCIsInJlcGxhY2VXaXRoIiwiY2hpbGROb2RlcyIsInVzZWRTZWxlY3RvcnMiLCJkZXN0cm95U3RydWN0dXJlIiwic2hhcmVkIiwiaGFzM2QiLCJlbCIsInRyYW5zZm9ybXMiLCJ3ZWJraXRUcmFuc2Zvcm0iLCJPVHJhbnNmb3JtIiwibXNUcmFuc2Zvcm0iLCJNb3pUcmFuc2Zvcm0iLCJib2R5IiwiaW5zZXJ0QmVmb3JlIiwic3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInJlbW92ZUNoaWxkIiwic3VwcG9ydDNkIiwibWFwIiwidG9TdHJpbmciLCJzZXRPcHRpb25zRnJvbURPTSIsInN0eWxlU2VjdGlvbiIsImFwcGVuZFRvIiwic3R5bGVNZW51Iiwic2xpZGVyV2lkdGgiLCJzbGlkZVdpZHRoIiwid3JhcEFsbCIsIndyYXAiLCJjcmVhdGVTbGlkZUFycm93cyIsImFwcGVuZCIsIm5hdiIsImFkZFNsaWRlc05hdmlnYXRpb24iLCJzdGFydGluZ1NsaWRlIiwic3R5bGVTbGlkZXMiLCJsaW5rIiwibGkiLCJ0b29sdGlwIiwiYWRkVmVydGljYWxOYXZpZ2F0aW9uIiwibmV3UGFyYW0iLCJvcmlnaW5hbFNyYyIsImFkZFVSTFBhcmFtIiwiaW5pdCIsInJlYWR5U3RhdGUiLCJibHVyIiwicmVzaXplIiwia2V5ZG93biIsImtleXVwIiwiQW5pbWF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImdyYWRpZW50SW50ZXJ2YWwiLCJwYXJhbXMiLCJzZWxlY3RvciIsImJlZ2luU3RlcCIsImZpbmlzaFN0ZXAiLCJzdGVwIiwibWFpbiIsInRpbWUiLCJtb2JpbGUiLCJheGlzIiwiYXJndW1lbnRzIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0cmFuc2xhdGVBeGlzIiwic2V0QXR0cmlidXRlIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJhbmltYXRlVHJhbnNmb3JtIiwiX3RoaXMiLCJzZXRJbnRlcnZhbCIsImluaXRHcmFkaWVudCIsImNsZWFySW50ZXJ2YWwiLCJWYWxpZGF0ZSIsImVtYWlsUGFyYW1zIiwiZmllbGRFbGVtZW50IiwicGF0dGVybiIsInJlc3VsdCIsImlkIiwiZXhlYyIsImNoZWNrRW1wdHlGaWVsZCIsInNldEVycm9yQ2xhc3MiLCJjbGVhckVycm9ycyIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ2YWxpZEZpZWxkQ291bnQiLCJibG9ja0NsYXNzTGlzdCIsIl90aGlzMiIsImZpZWxkcyIsInZhbGlkRmllbGRzQ291bnQiLCJmaWVsZCIsImNoZWNrVmFsaWRGaWVsZCIsInNlbmRGb3JtIiwic2VuZCIsIlBsdWdpbiIsInN0YXRlUGx1Z2luV29ya2luZyIsInN0YXJ0QW5pbWF0aW9uIiwiaW5pdEdyYWRpZW50SW50ZXJ2YWwiLCJXaW5kb3dSZXNpemUiLCJyZXNpemVQb2ludCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwicGx1Z2luIiwiZGVza3RvcFZpZXciLCJjbGVhckdyYWRpZW50SW50ZXJ2YWwiLCJtb2JpbGVWaWV3IiwiU2VuZEZvcm0iLCJlbWFpbE1hc3NhZ2UiLCJzZXR0aW5ncyIsInRvIiwibWV0aG9kIiwic3ViamVjdCIsIm1lc3NhZ2UiLCJlbWFpbCIsInBob25lIiwiZnJvbSIsInN1Y2Nlc3MiLCJsb2ciLCJhamF4IiwicmVzcG9uc2UiLCJNZW51IiwidmFsaWRhdGUiLCJ3aW5kb3dSZXNpemUiLCJyZWFkeSIsIm1hc2siLCJ0cmFuc2xhdGlvbiIsIiMiLCJyZWN1cnNpdmUiLCJmb3JtIiwiY2xpY2siLCJjaGVja1NhdGUiLCJaZXB0byIsIk1hc2siLCJwIiwiaW52YWxpZCIsImdldENhcmV0Iiwic2VsIiwicG9zIiwiY3RybCIsImRTZWwiLCJzZWxlY3Rpb24iLCJjU2VsU3RhcnQiLCJzZWxlY3Rpb25TdGFydCIsImFwcFZlcnNpb24iLCJjcmVhdGVSYW5nZSIsIm1vdmVTdGFydCIsInZhbCIsInNldENhcmV0IiwicmFuZ2UiLCJzZXRTZWxlY3Rpb25SYW5nZSIsImNyZWF0ZVRleHRSYW5nZSIsImNvbGxhcHNlIiwibW92ZUVuZCIsInNlbGVjdCIsIm1hc2tEaWdpdFBvc01hcE9sZCIsIm1hc2tEaWdpdFBvc01hcCIsImpNYXNrR2xvYmFscyIsInVzZUlucHV0IiwiYmVoYXZpb3VyIiwib2xkVmFsdWUiLCJzZWxlY3RPbkZvY3VzIiwiY2xlYXJJZk5vdE1hdGNoIiwicmVnZXhNYXNrIiwiZ2V0UmVnZXhNYXNrIiwib3B0aW9uYWwiLCJvUmVjdXJzaXZlIiwiciIsIm1hc2tDaHVua3MiLCJqTWFzayIsImNoYXJBdCIsImRpZ2l0Iiwiam9pbiIsImRlc3Ryb3lFdmVudHMiLCJjYWxjdWxhdGVDYXJldFBvc2l0aW9uIiwib2xkVmFsIiwibmV3VmFsIiwiZ2V0TWFza2VkIiwiY2FyZXRQb3NOZXciLCJjYXJldFBvc09sZCIsIm5ld1ZhbEwiLCJvbGRWYWxMIiwibWFza0RpZ2l0c0JlZm9yZUNhcmV0IiwibWFza0RpZ2l0c0FmdGVyQ2FyZXQiLCJtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGwiLCJtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQiLCJjYXJldFBvcyIsImJ5UGFzc0tleXMiLCJjYWxsYmFja3MiLCJza2lwTWFza0NoYXJzIiwibGFzdE1hc2tDaGFyIiwiYnVmIiwibWFza0xlbiIsInZhbExlbiIsIm9mZnNldCIsImFkZE1ldGhvZCIsInJlc2V0UG9zIiwibWFza0RpZ2l0Q291bnQiLCJtYXNrRGlnaXRQb3NBcnIiLCJsYXN0VW50cmFuc2xhdGVkTWFza0NoYXIiLCJtYXNrRGlnaXQiLCJ2YWxEaWdpdCIsImZhbGxiYWNrIiwibGFzdE1hc2tDaGFyRGlnaXQiLCJtYXBNYXNrZGlnaXRQb3NpdGlvbnMiLCJtYXNrRGlmZiIsImNoYW5nZWQiLCJkZWZhdWx0QXJncyIsImNyaXRlcmlhIiwiYXJncyIsImFwcGx5IiwiY2FyZXQiLCJnZXRDbGVhblZhbCIsImdldE1hc2tlZFZhbCIsIm9ubHlNYXNrIiwicGxhY2Vob2xkZXIiLCJtYXhsZW5ndGgiLCJtYXNrV2F0Y2hlcnMiLCJIVE1MQXR0cmlidXRlcyIsImlucHV0Iiwibm90U2FtZU1hc2tPYmplY3QiLCJtYXNrT2JqZWN0Iiwic3RyaW5naWZ5IiwiSlNPTiIsImdsb2JhbHMiLCJpbnRlcnZhbCIsIndhdGNoSW50ZXJ2YWwiLCJ3YXRjaElucHV0cyIsIm1hc2tGdW5jdGlvbiIsIm1hc2tlZCIsInVubWFzayIsImRhdGFNYXNrIiwicmVtb3ZlRGF0YSIsImNsZWFuVmFsIiwiYXBwbHlEYXRhTWFzayIsIm1hc2tFbGVtZW50cyIsImRhdGFNYXNrQXR0ciIsImV2ZW50TmFtZSIsImlzU3VwcG9ydGVkIiwiZXZlbnRTdXBwb3J0ZWQiLCJ3YXRjaERhdGFNYXNrIiwiMCIsIjkiLCJBIiwiUyJdLCJtYXBwaW5ncyI6IkFBQUEsZ1ZBRUlBLFFBQTRCLG1CQUFYQyxRQUFvRCxXQUEzQkMsU0FBT0QsT0FBT0UsVUFBd0IsU0FBVUMsR0FBTyxZQUFBLElBQWNBLEVBQWQsWUFBQUYsU0FBY0UsSUFBUyxTQUFVQSxHQUFPLE9BQU9BLEdBQXlCLG1CQUFYSCxRQUF5QkcsRUFBSUMsY0FBZ0JKLFFBQVVHLElBQVFILE9BQU9LLFVBQVksY0FBaEcsSUFBa0hGLEVBQWxILFlBQUFGLFNBQWtIRSxLQVN0USxTQUFXRyxFQUFRQyxHQUdPLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDdkNELFFBQVEsVUFBVyxTQUFVRSxHQUN6QixPQUFPSCxFQUFRRyxFQUFHSixFQUFRQSxFQUFPSyxTQUFVTCxFQUFPTSxRQUV1QixZQUFsRCxvQkFBWkMsUUFBMEIsWUFBY2QsUUFBUWMsV0FBMEJBLFFBQ3pGQyxPQUFPRCxRQUFVTixFQUFRUSxRQUFRLFVBQVdULEVBQVFBLEVBQU9LLFNBQVVMLEVBQU9NLE1BRTVFTCxFQUFRUyxPQUFRVixFQUFRQSxFQUFPSyxTQUFVTCxFQUFPTSxNQVZ4RCxDQVlxQixvQkFBWEssT0FBeUJBLFlBQVNDLEVBQVcsU0FBVVIsRUFBR08sRUFBUU4sRUFBVUMsRUFBTU0sR0FLeEYsSUFBSUMsRUFB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Q2ZDLGFBQWEsRUFFYnJFLFVBQVcsb0NBQW9DOVUsS0FBS3JVLE9BQU9rZSxVQUFVQyxZQXRFcEQsU0FBUytQLEdBQ3RCLElBQXdDQyxFQUFwQ3RPLEVBQUtuZ0IsU0FBU3FGLGNBQWMsT0FXaEMsT0FUQW1wQixFQUFZLEtBQU9BLEdBQ25CQyxFQUFlRCxLQUFhck8sS0FHeEJBLEVBQUcwRCxhQUFhMkssRUFBVyxXQUMzQkMsRUFBdUMsbUJBQWxCdE8sRUFBR3FPLElBRTVCck8sRUFBSyxLQUVFc08sRUEwRHdFQyxDQUFlLFNBQ2xHQyxlQUFlLEVBQ2ZyRCxZQUFhLEVBQUcsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBQ2hEN0QsYUFDSW1ILEdBQU1ySyxRQUFTLE1BQ2ZzSyxHQUFNdEssUUFBUyxLQUFNeUYsVUFBVSxHQUMvQnRDLEtBQU1uRCxRQUFTLEtBQU1vRCxXQUFXLEdBQ2hDbUgsR0FBTXZLLFFBQVMsZUFDZndLLEdBQU14SyxRQUFTLGNBSXZCeGtCLEVBQUV5cEIsYUFBZXpwQixFQUFFeXBCLGtCQUNuQm1FLEVBQVU1dEIsRUFBRXlwQixhQUFlenBCLEVBQUUyYyxRQUFPLEtBQVVpUixFQUFTNXRCLEVBQUV5cEIsZUFHN0MwRSxVQUNSbnVCLEVBQUVzdUIsZ0JBR05wSyxZQUFZLFdBQ0psa0IsRUFBRXlwQixhQUFhbUYsZUFDZjV1QixFQUFFc3VCLGlCQUVQVixFQUFRRSxnQkFDWnZ0QixPQUFPRCxPQUFRQyxPQUFPeW5CIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4vKiFcclxuICogZnVsbFBhZ2UgMi45LjVcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2FsdmFyb3RyaWdvL2Z1bGxQYWdlLmpzXHJcbiAqIEBsaWNlbnNlIE1JVCBsaWNlbnNlZFxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTUgYWx2YXJvdHJpZ28uY29tIC0gQSBwcm9qZWN0IGJ5IEFsdmFybyBUcmlnb1xyXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZnVuY3Rpb24gKCQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KCQsIGdsb2JhbCwgZ2xvYmFsLmRvY3VtZW50LCBnbG9iYWwuTWF0aCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBleHBvcnRzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihleHBvcnRzKSkgPT09IFwib2JqZWN0XCIgJiYgZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIGdsb2JhbCwgZ2xvYmFsLmRvY3VtZW50LCBnbG9iYWwuTWF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShqUXVlcnksIGdsb2JhbCwgZ2xvYmFsLmRvY3VtZW50LCBnbG9iYWwuTWF0aCk7XG4gICAgfVxufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQsIGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCBNYXRoLCB1bmRlZmluZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBrZWVwaW5nIGNlbnRyYWwgc2V0IG9mIGNsYXNzbmFtZXMgYW5kIHNlbGVjdG9yc1xuXG4gICAgdmFyIFdSQVBQRVIgPSAnZnVsbHBhZ2Utd3JhcHBlcic7XG4gICAgdmFyIFdSQVBQRVJfU0VMID0gJy4nICsgV1JBUFBFUjtcblxuICAgIC8vIHNsaW1zY3JvbGxcbiAgICB2YXIgU0NST0xMQUJMRSA9ICdmcC1zY3JvbGxhYmxlJztcbiAgICB2YXIgU0NST0xMQUJMRV9TRUwgPSAnLicgKyBTQ1JPTExBQkxFO1xuXG4gICAgLy8gdXRpbFxuICAgIHZhciBSRVNQT05TSVZFID0gJ2ZwLXJlc3BvbnNpdmUnO1xuICAgIHZhciBOT19UUkFOU0lUSU9OID0gJ2ZwLW5vdHJhbnNpdGlvbic7XG4gICAgdmFyIERFU1RST1lFRCA9ICdmcC1kZXN0cm95ZWQnO1xuICAgIHZhciBFTkFCTEVEID0gJ2ZwLWVuYWJsZWQnO1xuICAgIHZhciBWSUVXSU5HX1BSRUZJWCA9ICdmcC12aWV3aW5nJztcbiAgICB2YXIgQUNUSVZFID0gJ2FjdGl2ZSc7XG4gICAgdmFyIEFDVElWRV9TRUwgPSAnLicgKyBBQ1RJVkU7XG4gICAgdmFyIENPTVBMRVRFTFkgPSAnZnAtY29tcGxldGVseSc7XG4gICAgdmFyIENPTVBMRVRFTFlfU0VMID0gJy4nICsgQ09NUExFVEVMWTtcblxuICAgIC8vIHNlY3Rpb25cbiAgICB2YXIgU0VDVElPTl9ERUZBVUxUX1NFTCA9ICcuc2VjdGlvbic7XG4gICAgdmFyIFNFQ1RJT04gPSAnZnAtc2VjdGlvbic7XG4gICAgdmFyIFNFQ1RJT05fU0VMID0gJy4nICsgU0VDVElPTjtcbiAgICB2YXIgU0VDVElPTl9BQ1RJVkVfU0VMID0gU0VDVElPTl9TRUwgKyBBQ1RJVkVfU0VMO1xuICAgIHZhciBTRUNUSU9OX0ZJUlNUX1NFTCA9IFNFQ1RJT05fU0VMICsgJzpmaXJzdCc7XG4gICAgdmFyIFNFQ1RJT05fTEFTVF9TRUwgPSBTRUNUSU9OX1NFTCArICc6bGFzdCc7XG4gICAgdmFyIFRBQkxFX0NFTEwgPSAnZnAtdGFibGVDZWxsJztcbiAgICB2YXIgVEFCTEVfQ0VMTF9TRUwgPSAnLicgKyBUQUJMRV9DRUxMO1xuICAgIHZhciBBVVRPX0hFSUdIVCA9ICdmcC1hdXRvLWhlaWdodCc7XG4gICAgdmFyIEFVVE9fSEVJR0hUX1NFTCA9ICcuZnAtYXV0by1oZWlnaHQnO1xuICAgIHZhciBOT1JNQUxfU0NST0xMID0gJ2ZwLW5vcm1hbC1zY3JvbGwnO1xuICAgIHZhciBOT1JNQUxfU0NST0xMX1NFTCA9ICcuZnAtbm9ybWFsLXNjcm9sbCc7XG5cbiAgICAvLyBzZWN0aW9uIG5hdlxuICAgIHZhciBTRUNUSU9OX05BViA9ICdmcC1uYXYnO1xuICAgIHZhciBTRUNUSU9OX05BVl9TRUwgPSAnIycgKyBTRUNUSU9OX05BVjtcbiAgICB2YXIgU0VDVElPTl9OQVZfVE9PTFRJUCA9ICdmcC10b29sdGlwJztcbiAgICB2YXIgU0VDVElPTl9OQVZfVE9PTFRJUF9TRUwgPSAnLicgKyBTRUNUSU9OX05BVl9UT09MVElQO1xuICAgIHZhciBTSE9XX0FDVElWRV9UT09MVElQID0gJ2ZwLXNob3ctYWN0aXZlJztcblxuICAgIC8vIHNsaWRlXG4gICAgdmFyIFNMSURFX0RFRkFVTFRfU0VMID0gJy5zbGlkZSc7XG4gICAgdmFyIFNMSURFID0gJ2ZwLXNsaWRlJztcbiAgICB2YXIgU0xJREVfU0VMID0gJy4nICsgU0xJREU7XG4gICAgdmFyIFNMSURFX0FDVElWRV9TRUwgPSBTTElERV9TRUwgKyBBQ1RJVkVfU0VMO1xuICAgIHZhciBTTElERVNfV1JBUFBFUiA9ICdmcC1zbGlkZXMnO1xuICAgIHZhciBTTElERVNfV1JBUFBFUl9TRUwgPSAnLicgKyBTTElERVNfV1JBUFBFUjtcbiAgICB2YXIgU0xJREVTX0NPTlRBSU5FUiA9ICdmcC1zbGlkZXNDb250YWluZXInO1xuICAgIHZhciBTTElERVNfQ09OVEFJTkVSX1NFTCA9ICcuJyArIFNMSURFU19DT05UQUlORVI7XG4gICAgdmFyIFRBQkxFID0gJ2ZwLXRhYmxlJztcblxuICAgIC8vIHNsaWRlIG5hdlxuICAgIHZhciBTTElERVNfTkFWID0gJ2ZwLXNsaWRlc05hdic7XG4gICAgdmFyIFNMSURFU19OQVZfU0VMID0gJy4nICsgU0xJREVTX05BVjtcbiAgICB2YXIgU0xJREVTX05BVl9MSU5LX1NFTCA9IFNMSURFU19OQVZfU0VMICsgJyBhJztcbiAgICB2YXIgU0xJREVTX0FSUk9XID0gJ2ZwLWNvbnRyb2xBcnJvdyc7XG4gICAgdmFyIFNMSURFU19BUlJPV19TRUwgPSAnLicgKyBTTElERVNfQVJST1c7XG4gICAgdmFyIFNMSURFU19QUkVWID0gJ2ZwLXByZXYnO1xuICAgIHZhciBTTElERVNfUFJFVl9TRUwgPSAnLicgKyBTTElERVNfUFJFVjtcbiAgICB2YXIgU0xJREVTX0FSUk9XX1BSRVYgPSBTTElERVNfQVJST1cgKyAnICcgKyBTTElERVNfUFJFVjtcbiAgICB2YXIgU0xJREVTX0FSUk9XX1BSRVZfU0VMID0gU0xJREVTX0FSUk9XX1NFTCArIFNMSURFU19QUkVWX1NFTDtcbiAgICB2YXIgU0xJREVTX05FWFQgPSAnZnAtbmV4dCc7XG4gICAgdmFyIFNMSURFU19ORVhUX1NFTCA9ICcuJyArIFNMSURFU19ORVhUO1xuICAgIHZhciBTTElERVNfQVJST1dfTkVYVCA9IFNMSURFU19BUlJPVyArICcgJyArIFNMSURFU19ORVhUO1xuICAgIHZhciBTTElERVNfQVJST1dfTkVYVF9TRUwgPSBTTElERVNfQVJST1dfU0VMICsgU0xJREVTX05FWFRfU0VMO1xuXG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgdmFyICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuXG4gICAgJC5mbi5mdWxscGFnZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIC8vb25seSBvbmNlIG15IGZyaWVuZCFcbiAgICAgICAgaWYgKCQoJ2h0bWwnKS5oYXNDbGFzcyhFTkFCTEVEKSkge1xuICAgICAgICAgICAgZGlzcGxheVdhcm5pbmdzKCk7cmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29tbW9uIGpRdWVyeSBvYmplY3RzXG4gICAgICAgIHZhciAkaHRtbEJvZHkgPSAkKCdodG1sLCBib2R5Jyk7XG4gICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcblxuICAgICAgICB2YXIgRlAgPSAkLmZuLmZ1bGxwYWdlO1xuXG4gICAgICAgIC8vIENyZWF0aW5nIHNvbWUgZGVmYXVsdHMsIGV4dGVuZGluZyB0aGVtIHdpdGggYW55IG9wdGlvbnMgdGhhdCB3ZXJlIHByb3ZpZGVkXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7XG4gICAgICAgICAgICAvL25hdmlnYXRpb25cbiAgICAgICAgICAgIG1lbnU6IGZhbHNlLFxuICAgICAgICAgICAgYW5jaG9yczogW10sXG4gICAgICAgICAgICBsb2NrQW5jaG9yczogZmFsc2UsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIG5hdmlnYXRpb25Qb3NpdGlvbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgIG5hdmlnYXRpb25Ub29sdGlwczogW10sXG4gICAgICAgICAgICBzaG93QWN0aXZlVG9vbHRpcDogZmFsc2UsXG4gICAgICAgICAgICBzbGlkZXNOYXZpZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHNsaWRlc05hdlBvc2l0aW9uOiAnYm90dG9tJyxcbiAgICAgICAgICAgIHNjcm9sbEJhcjogZmFsc2UsXG4gICAgICAgICAgICBoeWJyaWQ6IGZhbHNlLFxuXG4gICAgICAgICAgICAvL3Njcm9sbGluZ1xuICAgICAgICAgICAgY3NzMzogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbGluZ1NwZWVkOiA3MDAsXG4gICAgICAgICAgICBhdXRvU2Nyb2xsaW5nOiB0cnVlLFxuICAgICAgICAgICAgZml0VG9TZWN0aW9uOiB0cnVlLFxuICAgICAgICAgICAgZml0VG9TZWN0aW9uRGVsYXk6IDEwMDAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRDdWJpYycsXG4gICAgICAgICAgICBlYXNpbmdjc3MzOiAnZWFzZScsXG4gICAgICAgICAgICBsb29wQm90dG9tOiBmYWxzZSxcbiAgICAgICAgICAgIGxvb3BUb3A6IGZhbHNlLFxuICAgICAgICAgICAgbG9vcEhvcml6b250YWw6IHRydWUsXG4gICAgICAgICAgICBjb250aW51b3VzVmVydGljYWw6IGZhbHNlLFxuICAgICAgICAgICAgY29udGludW91c0hvcml6b250YWw6IGZhbHNlLFxuICAgICAgICAgICAgc2Nyb2xsSG9yaXpvbnRhbGx5OiBmYWxzZSxcbiAgICAgICAgICAgIGludGVybG9ja2VkU2xpZGVzOiBmYWxzZSxcbiAgICAgICAgICAgIGRyYWdBbmRNb3ZlOiBmYWxzZSxcbiAgICAgICAgICAgIG9mZnNldFNlY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc2V0U2xpZGVyczogZmFsc2UsXG4gICAgICAgICAgICBmYWRpbmdFZmZlY3Q6IGZhbHNlLFxuICAgICAgICAgICAgbm9ybWFsU2Nyb2xsRWxlbWVudHM6IG51bGwsXG4gICAgICAgICAgICBzY3JvbGxPdmVyZmxvdzogZmFsc2UsXG4gICAgICAgICAgICBzY3JvbGxPdmVyZmxvd1Jlc2V0OiBmYWxzZSxcbiAgICAgICAgICAgIHNjcm9sbE92ZXJmbG93SGFuZGxlcjogJC5mbi5mcF9zY3JvbGxvdmVyZmxvdyA/ICQuZm4uZnBfc2Nyb2xsb3ZlcmZsb3cuaXNjcm9sbEhhbmRsZXIgOiBudWxsLFxuICAgICAgICAgICAgc2Nyb2xsT3ZlcmZsb3dPcHRpb25zOiBudWxsLFxuICAgICAgICAgICAgdG91Y2hTZW5zaXRpdml0eTogNSxcbiAgICAgICAgICAgIG5vcm1hbFNjcm9sbEVsZW1lbnRUb3VjaFRocmVzaG9sZDogNSxcbiAgICAgICAgICAgIGJpZ1NlY3Rpb25zRGVzdGluYXRpb246IG51bGwsXG5cbiAgICAgICAgICAgIC8vQWNjZXNzaWJpbGl0eVxuICAgICAgICAgICAga2V5Ym9hcmRTY3JvbGxpbmc6IHRydWUsXG4gICAgICAgICAgICBhbmltYXRlQW5jaG9yOiB0cnVlLFxuICAgICAgICAgICAgcmVjb3JkSGlzdG9yeTogdHJ1ZSxcblxuICAgICAgICAgICAgLy9kZXNpZ25cbiAgICAgICAgICAgIGNvbnRyb2xBcnJvd3M6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sQXJyb3dDb2xvcjogJyNmZmYnLFxuICAgICAgICAgICAgdmVydGljYWxDZW50ZXJlZDogdHJ1ZSxcbiAgICAgICAgICAgIHNlY3Rpb25zQ29sb3I6IFtdLFxuICAgICAgICAgICAgcGFkZGluZ1RvcDogMCxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IDAsXG4gICAgICAgICAgICBmaXhlZEVsZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogMCwgLy9iYWNrd2FyZHMgY29tcGFiaXRpbGl0eSB3aXRoIHJlc3BvbnNpdmVXaWRkdGhcbiAgICAgICAgICAgIHJlc3BvbnNpdmVXaWR0aDogMCxcbiAgICAgICAgICAgIHJlc3BvbnNpdmVIZWlnaHQ6IDAsXG4gICAgICAgICAgICByZXNwb25zaXZlU2xpZGVzOiBmYWxzZSxcbiAgICAgICAgICAgIHBhcmFsbGF4OiBmYWxzZSxcbiAgICAgICAgICAgIHBhcmFsbGF4T3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXZlYWwnLFxuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDYyLFxuICAgICAgICAgICAgICAgIHByb3BlcnR5OiAndHJhbnNsYXRlJ1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy9DdXN0b20gc2VsZWN0b3JzXG4gICAgICAgICAgICBzZWN0aW9uU2VsZWN0b3I6IFNFQ1RJT05fREVGQVVMVF9TRUwsXG4gICAgICAgICAgICBzbGlkZVNlbGVjdG9yOiBTTElERV9ERUZBVUxUX1NFTCxcblxuICAgICAgICAgICAgLy9ldmVudHNcbiAgICAgICAgICAgIGFmdGVyTG9hZDogbnVsbCxcbiAgICAgICAgICAgIG9uTGVhdmU6IG51bGwsXG4gICAgICAgICAgICBhZnRlclJlbmRlcjogbnVsbCxcbiAgICAgICAgICAgIGFmdGVyUmVzaXplOiBudWxsLFxuICAgICAgICAgICAgYWZ0ZXJSZUJ1aWxkOiBudWxsLFxuICAgICAgICAgICAgYWZ0ZXJTbGlkZUxvYWQ6IG51bGwsXG4gICAgICAgICAgICBvblNsaWRlTGVhdmU6IG51bGwsXG4gICAgICAgICAgICBhZnRlclJlc3BvbnNpdmU6IG51bGwsXG5cbiAgICAgICAgICAgIGxhenlMb2FkaW5nOiB0cnVlXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vZmxhZyB0byBhdm9pZCB2ZXJ5IGZhc3Qgc2xpZGluZyBmb3IgbGFuZHNjYXBlIHNsaWRlcnNcbiAgICAgICAgdmFyIHNsaWRlTW92aW5nID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGlzVG91Y2hEZXZpY2UgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oaVBob25lfGlQb2R8aVBhZHxBbmRyb2lkfHBsYXlib29rfHNpbGt8QmxhY2tCZXJyeXxCQjEwfFdpbmRvd3MgUGhvbmV8VGl6ZW58QmFkYXx3ZWJPU3xJRU1vYmlsZXxPcGVyYSBNaW5pKS8pO1xuICAgICAgICB2YXIgaXNUb3VjaCA9ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDAgfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHdpbmRvd3NIZWlnaHQgPSAkd2luZG93LmhlaWdodCgpO1xuICAgICAgICB2YXIgaXNSZXNpemluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgaXNXaW5kb3dGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGxhc3RTY3JvbGxlZERlc3Rpbnk7XG4gICAgICAgIHZhciBsYXN0U2Nyb2xsZWRTbGlkZTtcbiAgICAgICAgdmFyIGNhblNjcm9sbCA9IHRydWU7XG4gICAgICAgIHZhciBzY3JvbGxpbmdzID0gW107XG4gICAgICAgIHZhciBjb250cm9sUHJlc3NlZDtcbiAgICAgICAgdmFyIHN0YXJ0aW5nU2VjdGlvbjtcbiAgICAgICAgdmFyIGlzU2Nyb2xsQWxsb3dlZCA9IHt9O1xuICAgICAgICBpc1Njcm9sbEFsbG93ZWQubSA9IHsgJ3VwJzogdHJ1ZSwgJ2Rvd24nOiB0cnVlLCAnbGVmdCc6IHRydWUsICdyaWdodCc6IHRydWUgfTtcbiAgICAgICAgaXNTY3JvbGxBbGxvd2VkLmsgPSAkLmV4dGVuZCh0cnVlLCB7fSwgaXNTY3JvbGxBbGxvd2VkLm0pO1xuICAgICAgICB2YXIgTVNQb2ludGVyID0gZ2V0TVNQb2ludGVyKCk7XG4gICAgICAgIHZhciBldmVudHMgPSB7XG4gICAgICAgICAgICB0b3VjaG1vdmU6ICdvbnRvdWNobW92ZScgaW4gd2luZG93ID8gJ3RvdWNobW92ZScgOiBNU1BvaW50ZXIubW92ZSxcbiAgICAgICAgICAgIHRvdWNoc3RhcnQ6ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyA/ICd0b3VjaHN0YXJ0JyA6IE1TUG9pbnRlci5kb3duXG4gICAgICAgIH07XG4gICAgICAgIHZhciBzY3JvbGxCYXJIYW5kbGVyO1xuXG4gICAgICAgIC8vdGltZW91dHNcbiAgICAgICAgdmFyIHJlc2l6ZUlkO1xuICAgICAgICB2YXIgYWZ0ZXJTZWN0aW9uTG9hZHNJZDtcbiAgICAgICAgdmFyIGFmdGVyU2xpZGVMb2Fkc0lkO1xuICAgICAgICB2YXIgc2Nyb2xsSWQ7XG4gICAgICAgIHZhciBzY3JvbGxJZDI7XG4gICAgICAgIHZhciBrZXlkb3duSWQ7XG4gICAgICAgIHZhciBvcmlnaW5hbHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucyk7IC8vZGVlcCBjb3B5XG5cbiAgICAgICAgZGlzcGxheVdhcm5pbmdzKCk7XG5cbiAgICAgICAgLy9lYXNlSW5PdXRDdWJpYyBhbmltYXRpb24gaW5jbHVkZWQgaW4gdGhlIHBsdWdpblxuICAgICAgICAkLmV4dGVuZCgkLmVhc2luZywgeyBlYXNlSW5PdXRDdWJpYzogZnVuY3Rpb24gZWFzZUluT3V0Q3ViaWMoeCwgdCwgYiwgYywgZCkge1xuICAgICAgICAgICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiB0ICogdCAqIHQgKyBiO3JldHVybiBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICsgMikgKyBiO1xuICAgICAgICAgICAgfSB9KTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIHRoZSBhdXRvU2Nyb2xsIG9wdGlvbi5cclxuICAgICAgICAgKiBJdCBjaGFuZ2VzIHRoZSBzY3JvbGwgYmFyIHZpc2liaWxpdHkgYW5kIHRoZSBoaXN0b3J5IG9mIHRoZSBzaXRlIGFzIGEgcmVzdWx0LlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRBdXRvU2Nyb2xsaW5nKHZhbHVlLCB0eXBlKSB7XG4gICAgICAgICAgICAvL3JlbW92aW5nIHRoZSB0cmFuc2Zvcm1hdGlvblxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHNpbGVudFNjcm9sbCgwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VmFyaWFibGVTdGF0ZSgnYXV0b1Njcm9sbGluZycsIHZhbHVlLCB0eXBlKTtcblxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSAkKFNFQ1RJT05fQUNUSVZFX1NFTCk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmF1dG9TY3JvbGxpbmcgJiYgIW9wdGlvbnMuc2Nyb2xsQmFyKSB7XG4gICAgICAgICAgICAgICAgJGh0bWxCb2R5LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZXRSZWNvcmRIaXN0b3J5KG9yaWdpbmFscy5yZWNvcmRIaXN0b3J5LCAnaW50ZXJuYWwnKTtcblxuICAgICAgICAgICAgICAgIC8vZm9yIElFIHRvdWNoIGRldmljZXNcbiAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJy1tcy10b3VjaC1hY3Rpb24nOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICd0b3VjaC1hY3Rpb24nOiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvL21vdmluZyB0aGUgY29udGFpbmVyIHVwXG4gICAgICAgICAgICAgICAgICAgIHNpbGVudFNjcm9sbChlbGVtZW50LnBvc2l0aW9uKCkudG9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRodG1sQm9keS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cnOiAndmlzaWJsZScsXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnaW5pdGlhbCdcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNldFJlY29yZEhpc3RvcnkoZmFsc2UsICdpbnRlcm5hbCcpO1xuXG4gICAgICAgICAgICAgICAgLy9mb3IgSUUgdG91Y2ggZGV2aWNlc1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnLW1zLXRvdWNoLWFjdGlvbic6ICcnLFxuICAgICAgICAgICAgICAgICAgICAndG91Y2gtYWN0aW9uJzogJydcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vc2Nyb2xsaW5nIHRoZSBwYWdlIHRvIHRoZSBzZWN0aW9uIHdpdGggbm8gYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICRodG1sQm9keS5zY3JvbGxUb3AoZWxlbWVudC5wb3NpdGlvbigpLnRvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVmaW5lcyB3aGV0ZXIgdG8gcmVjb3JkIHRoZSBoaXN0b3J5IGZvciBlYWNoIGhhc2ggY2hhbmdlIGluIHRoZSBVUkwuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldFJlY29yZEhpc3RvcnkodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgICAgIHNldFZhcmlhYmxlU3RhdGUoJ3JlY29yZEhpc3RvcnknLCB2YWx1ZSwgdHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWZpbmVzIHRoZSBzY3JvbGxpbmcgc3BlZWRcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0U2Nyb2xsaW5nU3BlZWQodmFsdWUsIHR5cGUpIHtcbiAgICAgICAgICAgIHNldFZhcmlhYmxlU3RhdGUoJ3Njcm9sbGluZ1NwZWVkJywgdmFsdWUsIHR5cGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0cyBmaXRUb1NlY3Rpb25cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0Rml0VG9TZWN0aW9uKHZhbHVlLCB0eXBlKSB7XG4gICAgICAgICAgICBzZXRWYXJpYWJsZVN0YXRlKCdmaXRUb1NlY3Rpb24nLCB2YWx1ZSwgdHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIGxvY2tBbmNob3JzXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldExvY2tBbmNob3JzKHZhbHVlKSB7XG4gICAgICAgICAgICBvcHRpb25zLmxvY2tBbmNob3JzID0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGRzIG9yIHJlbW92ZSB0aGUgcG9zc2liaWxpdHkgb2Ygc2Nyb2xsaW5nIHRocm91Z2ggc2VjdGlvbnMgYnkgdXNpbmcgdGhlIG1vdXNlIHdoZWVsIG9yIHRoZSB0cmFja3BhZC5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0TW91c2VXaGVlbFNjcm9sbGluZyh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkTW91c2VXaGVlbEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBhZGRNaWRkbGVXaGVlbEhhbmRsZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTW91c2VXaGVlbEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVNaWRkbGVXaGVlbEhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgb3IgcmVtb3ZlIHRoZSBwb3NzaWJpbGl0eSBvZiBzY3JvbGxpbmcgdGhyb3VnaCBzZWN0aW9ucyBieSB1c2luZyB0aGUgbW91c2Ugd2hlZWwvdHJhY2twYWQgb3IgdG91Y2ggZ2VzdHVyZXMuXHJcbiAgICAgICAgICogT3B0aW9uYWxseSBhIHNlY29uZCBwYXJhbWV0ZXIgY2FuIGJlIHVzZWQgdG8gc3BlY2lmeSB0aGUgZGlyZWN0aW9uIGZvciB3aGljaCB0aGUgYWN0aW9uIHdpbGwgYmUgYXBwbGllZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkaXJlY3Rpb25zIHN0cmluZyBjb250YWluaW5nIHRoZSBkaXJlY3Rpb24gb3IgZGlyZWN0aW9ucyBzZXBhcmF0ZWQgYnkgY29tbWEuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldEFsbG93U2Nyb2xsaW5nKHZhbHVlLCBkaXJlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRpcmVjdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucyA9IGRpcmVjdGlvbnMucmVwbGFjZSgvIC9nLCAnJykuc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgICAgICQuZWFjaChkaXJlY3Rpb25zLCBmdW5jdGlvbiAoaW5kZXgsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRJc1Njcm9sbEFsbG93ZWQodmFsdWUsIGRpcmVjdGlvbiwgJ20nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0SXNTY3JvbGxBbGxvd2VkKHZhbHVlLCAnYWxsJywgJ20nKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRNb3VzZVdoZWVsU2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRUb3VjaEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRNb3VzZVdoZWVsU2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVG91Y2hIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyBvciByZW1vdmUgdGhlIHBvc3NpYmlsaXR5IG9mIHNjcm9sbGluZyB0aHJvdWdoIHNlY3Rpb25zIGJ5IHVzaW5nIHRoZSBrZXlib2FyZCBhcnJvdyBrZXlzXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldEtleWJvYXJkU2Nyb2xsaW5nKHZhbHVlLCBkaXJlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRpcmVjdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9ucyA9IGRpcmVjdGlvbnMucmVwbGFjZSgvIC9nLCAnJykuc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgICAgICQuZWFjaChkaXJlY3Rpb25zLCBmdW5jdGlvbiAoaW5kZXgsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRJc1Njcm9sbEFsbG93ZWQodmFsdWUsIGRpcmVjdGlvbiwgJ2snKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0SXNTY3JvbGxBbGxvd2VkKHZhbHVlLCAnYWxsJywgJ2snKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmtleWJvYXJkU2Nyb2xsaW5nID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNb3ZlcyB0aGUgcGFnZSB1cCBvbmUgc2VjdGlvbi5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbW92ZVNlY3Rpb25VcCgpIHtcbiAgICAgICAgICAgIHZhciBwcmV2ID0gJChTRUNUSU9OX0FDVElWRV9TRUwpLnByZXYoU0VDVElPTl9TRUwpO1xuXG4gICAgICAgICAgICAvL2xvb3BpbmcgdG8gdGhlIGJvdHRvbSBpZiB0aGVyZSdzIG5vIG1vcmUgc2VjdGlvbnMgYWJvdmVcbiAgICAgICAgICAgIGlmICghcHJldi5sZW5ndGggJiYgKG9wdGlvbnMubG9vcFRvcCB8fCBvcHRpb25zLmNvbnRpbnVvdXNWZXJ0aWNhbCkpIHtcbiAgICAgICAgICAgICAgICBwcmV2ID0gJChTRUNUSU9OX1NFTCkubGFzdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJldi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxQYWdlKHByZXYsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTW92ZXMgdGhlIHBhZ2UgZG93biBvbmUgc2VjdGlvbi5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbW92ZVNlY3Rpb25Eb3duKCkge1xuICAgICAgICAgICAgdmFyIG5leHQgPSAkKFNFQ1RJT05fQUNUSVZFX1NFTCkubmV4dChTRUNUSU9OX1NFTCk7XG5cbiAgICAgICAgICAgIC8vbG9vcGluZyB0byB0aGUgdG9wIGlmIHRoZXJlJ3Mgbm8gbW9yZSBzZWN0aW9ucyBiZWxvd1xuICAgICAgICAgICAgaWYgKCFuZXh0Lmxlbmd0aCAmJiAob3B0aW9ucy5sb29wQm90dG9tIHx8IG9wdGlvbnMuY29udGludW91c1ZlcnRpY2FsKSkge1xuICAgICAgICAgICAgICAgIG5leHQgPSAkKFNFQ1RJT05fU0VMKS5maXJzdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxQYWdlKG5leHQsIG51bGwsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1vdmVzIHRoZSBwYWdlIHRvIHRoZSBnaXZlbiBzZWN0aW9uIGFuZCBzbGlkZSB3aXRoIG5vIGFuaW1hdGlvbi5cclxuICAgICAgICAgKiBBbmNob3JzIG9yIGluZGV4IHBvc2l0aW9ucyBjYW4gYmUgdXNlZCBhcyBwYXJhbXMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNpbGVudE1vdmVUbyhzZWN0aW9uQW5jaG9yLCBzbGlkZUFuY2hvcikge1xuICAgICAgICAgICAgc2V0U2Nyb2xsaW5nU3BlZWQoMCwgJ2ludGVybmFsJyk7XG4gICAgICAgICAgICBtb3ZlVG8oc2VjdGlvbkFuY2hvciwgc2xpZGVBbmNob3IpO1xuICAgICAgICAgICAgc2V0U2Nyb2xsaW5nU3BlZWQob3JpZ2luYWxzLnNjcm9sbGluZ1NwZWVkLCAnaW50ZXJuYWwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1vdmVzIHRoZSBwYWdlIHRvIHRoZSBnaXZlbiBzZWN0aW9uIGFuZCBzbGlkZS5cclxuICAgICAgICAgKiBBbmNob3JzIG9yIGluZGV4IHBvc2l0aW9ucyBjYW4gYmUgdXNlZCBhcyBwYXJhbXMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1vdmVUbyhzZWN0aW9uQW5jaG9yLCBzbGlkZUFuY2hvcikge1xuICAgICAgICAgICAgdmFyIGRlc3RpbnkgPSBnZXRTZWN0aW9uQnlBbmNob3Ioc2VjdGlvbkFuY2hvcik7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2xpZGVBbmNob3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsUGFnZUFuZFNsaWRlKHNlY3Rpb25BbmNob3IsIHNsaWRlQW5jaG9yKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzdGlueS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsUGFnZShkZXN0aW55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNsaWRlcyByaWdodCB0aGUgc2xpZGVyIG9mIHRoZSBhY3RpdmUgc2VjdGlvbi5cclxuICAgICAgICAgKiBPcHRpb25hbCBgc2VjdGlvbmAgcGFyYW0uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1vdmVTbGlkZVJpZ2h0KHNlY3Rpb24pIHtcbiAgICAgICAgICAgIG1vdmVTbGlkZSgncmlnaHQnLCBzZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNsaWRlcyBsZWZ0IHRoZSBzbGlkZXIgb2YgdGhlIGFjdGl2ZSBzZWN0aW9uLlxyXG4gICAgICAgICAqIE9wdGlvbmFsIGBzZWN0aW9uYCBwYXJhbS5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbW92ZVNsaWRlTGVmdChzZWN0aW9uKSB7XG4gICAgICAgICAgICBtb3ZlU2xpZGUoJ2xlZnQnLCBzZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZW4gcmVzaXppbmcgaXMgZmluaXNoZWQsIHdlIGFkanVzdCB0aGUgc2xpZGVzIHNpemVzIGFuZCBwb3NpdGlvbnNcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVCdWlsZChyZXNpemluZykge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5oYXNDbGFzcyhERVNUUk9ZRUQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSAvL25vdGhpbmcgdG8gZG8gaWYgdGhlIHBsdWdpbiB3YXMgZGVzdHJveWVkXG5cbiAgICAgICAgICAgIGlzUmVzaXppbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB3aW5kb3dzSGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTsgLy91cGRhdGluZyBnbG9iYWwgdmFyXG5cbiAgICAgICAgICAgICQoU0VDVElPTl9TRUwpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzbGlkZXNXcmFwID0gJCh0aGlzKS5maW5kKFNMSURFU19XUkFQUEVSX1NFTCk7XG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlcyA9ICQodGhpcykuZmluZChTTElERV9TRUwpO1xuXG4gICAgICAgICAgICAgICAgLy9hZGp1c3RpbmcgdGhlIGhlaWdodCBvZiB0aGUgdGFibGUtY2VsbCBmb3IgSUUgYW5kIEZpcmVmb3hcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZChUQUJMRV9DRUxMX1NFTCkuY3NzKCdoZWlnaHQnLCBnZXRUYWJsZUhlaWdodCgkKHRoaXMpKSArICdweCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCB3aW5kb3dzSGVpZ2h0ICsgJ3B4Jyk7XG5cbiAgICAgICAgICAgICAgICAvL2FkanVzdGluZyB0aGUgcG9zaXRpb24gZm8gdGhlIEZVTEwgV0lEVEggc2xpZGVzLi4uXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhbmRzY2FwZVNjcm9sbChzbGlkZXNXcmFwLCBzbGlkZXNXcmFwLmZpbmQoU0xJREVfQUNUSVZFX1NFTCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zY3JvbGxPdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIHNjcm9sbEJhckhhbmRsZXIuY3JlYXRlU2Nyb2xsQmFyRm9yQWxsKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhY3RpdmVTZWN0aW9uID0gJChTRUNUSU9OX0FDVElWRV9TRUwpO1xuICAgICAgICAgICAgdmFyIHNlY3Rpb25JbmRleCA9IGFjdGl2ZVNlY3Rpb24uaW5kZXgoU0VDVElPTl9TRUwpO1xuXG4gICAgICAgICAgICAvL2lzbid0IGl0IHRoZSBmaXJzdCBzZWN0aW9uP1xuICAgICAgICAgICAgaWYgKHNlY3Rpb25JbmRleCkge1xuICAgICAgICAgICAgICAgIC8vYWRqdXN0aW5nIHRoZSBwb3NpdGlvbiBmb3IgdGhlIGN1cnJlbnQgc2VjdGlvblxuICAgICAgICAgICAgICAgIHNpbGVudE1vdmVUbyhzZWN0aW9uSW5kZXggKyAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXNSZXNpemluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKG9wdGlvbnMuYWZ0ZXJSZXNpemUpICYmIHJlc2l6aW5nICYmIG9wdGlvbnMuYWZ0ZXJSZXNpemUuY2FsbChjb250YWluZXIpO1xuICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKG9wdGlvbnMuYWZ0ZXJSZUJ1aWxkKSAmJiAhcmVzaXppbmcgJiYgb3B0aW9ucy5hZnRlclJlQnVpbGQuY2FsbChjb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHVybnMgZnVsbFBhZ2UuanMgdG8gbm9ybWFsIHNjcm9sbGluZyBtb2RlIHdoZW4gdGhlIHZpZXdwb3J0IGB3aWR0aGAgb3IgYGhlaWdodGBcclxuICAgICAgICAgKiBhcmUgc21hbGxlciB0aGFuIHRoZSBzZXQgbGltaXQgdmFsdWVzLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRSZXNwb25zaXZlKGFjdGl2ZSkge1xuICAgICAgICAgICAgdmFyIGlzUmVzcG9uc2l2ZSA9ICRib2R5Lmhhc0NsYXNzKFJFU1BPTlNJVkUpO1xuXG4gICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1Jlc3BvbnNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0QXV0b1Njcm9sbGluZyhmYWxzZSwgJ2ludGVybmFsJyk7XG4gICAgICAgICAgICAgICAgICAgIHNldEZpdFRvU2VjdGlvbihmYWxzZSwgJ2ludGVybmFsJyk7XG4gICAgICAgICAgICAgICAgICAgICQoU0VDVElPTl9OQVZfU0VMKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICRib2R5LmFkZENsYXNzKFJFU1BPTlNJVkUpO1xuICAgICAgICAgICAgICAgICAgICAkLmlzRnVuY3Rpb24ob3B0aW9ucy5hZnRlclJlc3BvbnNpdmUpICYmIG9wdGlvbnMuYWZ0ZXJSZXNwb25zaXZlLmNhbGwoY29udGFpbmVyLCBhY3RpdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgICAgICAgICAgICAgc2V0QXV0b1Njcm9sbGluZyhvcmlnaW5hbHMuYXV0b1Njcm9sbGluZywgJ2ludGVybmFsJyk7XG4gICAgICAgICAgICAgICAgc2V0Rml0VG9TZWN0aW9uKG9yaWdpbmFscy5hdXRvU2Nyb2xsaW5nLCAnaW50ZXJuYWwnKTtcbiAgICAgICAgICAgICAgICAkKFNFQ1RJT05fTkFWX1NFTCkuc2hvdygpO1xuICAgICAgICAgICAgICAgICRib2R5LnJlbW92ZUNsYXNzKFJFU1BPTlNJVkUpO1xuICAgICAgICAgICAgICAgICQuaXNGdW5jdGlvbihvcHRpb25zLmFmdGVyUmVzcG9uc2l2ZSkgJiYgb3B0aW9ucy5hZnRlclJlc3BvbnNpdmUuY2FsbChjb250YWluZXIsIGFjdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJCh0aGlzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vcHVibGljIGZ1bmN0aW9uc1xuICAgICAgICAgICAgRlAudmVyc2lvbiA9ICcyLjkuNSc7XG4gICAgICAgICAgICBGUC5zZXRBdXRvU2Nyb2xsaW5nID0gc2V0QXV0b1Njcm9sbGluZztcbiAgICAgICAgICAgIEZQLnNldFJlY29yZEhpc3RvcnkgPSBzZXRSZWNvcmRIaXN0b3J5O1xuICAgICAgICAgICAgRlAuc2V0U2Nyb2xsaW5nU3BlZWQgPSBzZXRTY3JvbGxpbmdTcGVlZDtcbiAgICAgICAgICAgIEZQLnNldEZpdFRvU2VjdGlvbiA9IHNldEZpdFRvU2VjdGlvbjtcbiAgICAgICAgICAgIEZQLnNldExvY2tBbmNob3JzID0gc2V0TG9ja0FuY2hvcnM7XG4gICAgICAgICAgICBGUC5zZXRNb3VzZVdoZWVsU2Nyb2xsaW5nID0gc2V0TW91c2VXaGVlbFNjcm9sbGluZztcbiAgICAgICAgICAgIEZQLnNldEFsbG93U2Nyb2xsaW5nID0gc2V0QWxsb3dTY3JvbGxpbmc7XG4gICAgICAgICAgICBGUC5zZXRLZXlib2FyZFNjcm9sbGluZyA9IHNldEtleWJvYXJkU2Nyb2xsaW5nO1xuICAgICAgICAgICAgRlAubW92ZVNlY3Rpb25VcCA9IG1vdmVTZWN0aW9uVXA7XG4gICAgICAgICAgICBGUC5tb3ZlU2VjdGlvbkRvd24gPSBtb3ZlU2VjdGlvbkRvd247XG4gICAgICAgICAgICBGUC5zaWxlbnRNb3ZlVG8gPSBzaWxlbnRNb3ZlVG87XG4gICAgICAgICAgICBGUC5tb3ZlVG8gPSBtb3ZlVG87XG4gICAgICAgICAgICBGUC5tb3ZlU2xpZGVSaWdodCA9IG1vdmVTbGlkZVJpZ2h0O1xuICAgICAgICAgICAgRlAubW92ZVNsaWRlTGVmdCA9IG1vdmVTbGlkZUxlZnQ7XG4gICAgICAgICAgICBGUC5maXRUb1NlY3Rpb24gPSBmaXRUb1NlY3Rpb247XG4gICAgICAgICAgICBGUC5yZUJ1aWxkID0gcmVCdWlsZDtcbiAgICAgICAgICAgIEZQLnNldFJlc3BvbnNpdmUgPSBzZXRSZXNwb25zaXZlO1xuICAgICAgICAgICAgRlAuZGVzdHJveSA9IGRlc3Ryb3k7XG5cbiAgICAgICAgICAgIC8vZnVuY3Rpb25zIHdlIHdhbnQgdG8gc2hhcmUgYWNyb3NzIGZpbGVzIGJ1dCB3aGljaCBhcmUgbm90XG4gICAgICAgICAgICAvL21lYW4gdG8gYmUgdXNlZCBvbiB0aGVpciBvd24gYnkgZGV2ZWxvcGVyc1xuICAgICAgICAgICAgRlAuc2hhcmVkID0ge1xuICAgICAgICAgICAgICAgIGFmdGVyUmVuZGVyQWN0aW9uczogYWZ0ZXJSZW5kZXJBY3Rpb25zXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpbml0KCk7XG5cbiAgICAgICAgICAgIGJpbmRFdmVudHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICAvL2lmIGNzczMgaXMgbm90IHN1cHBvcnRlZCwgaXQgd2lsbCB1c2UgalF1ZXJ5IGFuaW1hdGlvbnNcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNzczMpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNzczMgPSBzdXBwb3J0M2QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3B0aW9ucy5zY3JvbGxCYXIgPSBvcHRpb25zLnNjcm9sbEJhciB8fCBvcHRpb25zLmh5YnJpZDtcblxuICAgICAgICAgICAgc2V0T3B0aW9uc0Zyb21ET00oKTtcbiAgICAgICAgICAgIHByZXBhcmVEb20oKTtcbiAgICAgICAgICAgIHNldEFsbG93U2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICAgICAgc2V0QXV0b1Njcm9sbGluZyhvcHRpb25zLmF1dG9TY3JvbGxpbmcsICdpbnRlcm5hbCcpO1xuICAgICAgICAgICAgcmVzcG9uc2l2ZSgpO1xuXG4gICAgICAgICAgICAvL3NldHRpbmcgdGhlIGNsYXNzIGZvciB0aGUgYm9keSBlbGVtZW50XG4gICAgICAgICAgICBzZXRCb2R5Q2xhc3MoKTtcblxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb0FuY2hvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHdpbmRvdy5vbignbG9hZCcsIHNjcm9sbFRvQW5jaG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgICAgICAkd2luZG93XG4gICAgICAgICAgICAvL3doZW4gc2Nyb2xsaW5nLi4uXG4gICAgICAgICAgICAub24oJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpXG5cbiAgICAgICAgICAgIC8vZGV0ZWN0aW5nIGFueSBjaGFuZ2Ugb24gdGhlIFVSTCB0byBzY3JvbGwgdG8gdGhlIGdpdmVuIGFuY2hvciBsaW5rXG4gICAgICAgICAgICAvLyhhIHdheSB0byBkZXRlY3QgYmFjayBoaXN0b3J5IGJ1dHRvbiBhcyB3ZSBwbGF5IHdpdGggdGhlIGhhc2hlcyBvbiB0aGUgVVJMKVxuICAgICAgICAgICAgLm9uKCdoYXNoY2hhbmdlJywgaGFzaENoYW5nZUhhbmRsZXIpXG5cbiAgICAgICAgICAgIC8vd2hlbiBvcGVuaW5nIGEgbmV3IHRhYiAoY3RybCArIHQpLCBgY29udHJvbGAgd29uJ3QgYmUgcHJlc3NlZCB3aGVuIGNvbWluZyBiYWNrLlxuICAgICAgICAgICAgLmJsdXIoYmx1ckhhbmRsZXIpXG5cbiAgICAgICAgICAgIC8vd2hlbiByZXNpemluZyB0aGUgc2l0ZSwgd2UgYWRqdXN0IHRoZSBoZWlnaHRzIG9mIHRoZSBzZWN0aW9ucywgc2xpbVNjcm9sbC4uLlxuICAgICAgICAgICAgLnJlc2l6ZShyZXNpemVIYW5kbGVyKTtcblxuICAgICAgICAgICAgJGRvY3VtZW50XG4gICAgICAgICAgICAvL1NsaWRpbmcgd2l0aCBhcnJvdyBrZXlzLCBib3RoLCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbFxuICAgICAgICAgICAgLmtleWRvd24oa2V5ZG93bkhhbmRsZXIpXG5cbiAgICAgICAgICAgIC8vdG8gcHJldmVudCBzY3JvbGxpbmcgd2hpbGUgem9vbWluZ1xuICAgICAgICAgICAgLmtleXVwKGtleVVwSGFuZGxlcilcblxuICAgICAgICAgICAgLy9TY3JvbGxzIHRvIHRoZSBzZWN0aW9uIHdoZW4gY2xpY2tpbmcgdGhlIG5hdmlnYXRpb24gYnVsbGV0XG4gICAgICAgICAgICAub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBTRUNUSU9OX05BVl9TRUwgKyAnIGEnLCBzZWN0aW9uQnVsbGV0SGFuZGxlcilcblxuICAgICAgICAgICAgLy9TY3JvbGxzIHRoZSBzbGlkZXIgdG8gdGhlIGdpdmVuIHNsaWRlIGRlc3RpbmF0aW9uIGZvciB0aGUgZ2l2ZW4gc2VjdGlvblxuICAgICAgICAgICAgLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgU0xJREVTX05BVl9MSU5LX1NFTCwgc2xpZGVCdWxsZXRIYW5kbGVyKS5vbignY2xpY2snLCBTRUNUSU9OX05BVl9UT09MVElQX1NFTCwgdG9vbHRpcFRleHRIYW5kbGVyKTtcblxuICAgICAgICAgICAgLy9TY3JvbGxpbmcgaG9yaXpvbnRhbGx5IHdoZW4gY2xpY2tpbmcgb24gdGhlIHNsaWRlciBjb250cm9scy5cbiAgICAgICAgICAgICQoU0VDVElPTl9TRUwpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgU0xJREVTX0FSUk9XX1NFTCwgc2xpZGVBcnJvd0hhbmRsZXIpO1xuXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQXBwbHlpbmcgbm9ybWFsU2Nyb2xsIGVsZW1lbnRzLlxyXG4gICAgICAgICAgICAgKiBJZ25vcmluZyB0aGUgc2Nyb2xscyBvdmVyIHRoZSBzcGVjaWZpZWQgc2VsZWN0b3JzLlxyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKCdtb3VzZWVudGVyIHRvdWNoc3RhcnQnLCBvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEFsbG93U2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbignbW91c2VsZWF2ZSB0b3VjaGVuZCcsIG9wdGlvbnMubm9ybWFsU2Nyb2xsRWxlbWVudHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0QWxsb3dTY3JvbGxpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXR0aW5nIG9wdGlvbnMgZnJvbSBET00gZWxlbWVudHMgaWYgdGhleSBhcmUgbm90IHByb3ZpZGVkLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRPcHRpb25zRnJvbURPTSgpIHtcbiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IGNvbnRhaW5lci5maW5kKG9wdGlvbnMuc2VjdGlvblNlbGVjdG9yKTtcblxuICAgICAgICAgICAgLy9ubyBhbmNob3JzIG9wdGlvbj8gQ2hlY2tpbmcgZm9yIHRoZW0gaW4gdGhlIERPTSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuYW5jaG9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFuY2hvcnMgPSBzZWN0aW9ucy5maWx0ZXIoJ1tkYXRhLWFuY2hvcl0nKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdhbmNob3InKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0pLmdldCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL25vIHRvb2x0aXBzIG9wdGlvbj8gQ2hlY2tpbmcgZm9yIHRoZW0gaW4gdGhlIERPTSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMubmF2aWdhdGlvblRvb2x0aXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubmF2aWdhdGlvblRvb2x0aXBzID0gc2VjdGlvbnMuZmlsdGVyKCdbZGF0YS10b29sdGlwXScpLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ3Rvb2x0aXAnKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0pLmdldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV29ya3Mgb3ZlciB0aGUgRE9NIHN0cnVjdHVyZSB0byBzZXQgaXQgdXAgZm9yIHRoZSBjdXJyZW50IGZ1bGxwYWdlIG9wdGlvbnMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHByZXBhcmVEb20oKSB7XG4gICAgICAgICAgICBjb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzEwMCUnLFxuICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL2FkZGluZyBhIGNsYXNzIHRvIHJlY29nbml6ZSB0aGUgY29udGFpbmVyIGludGVybmFsbHkgaW4gdGhlIGNvZGVcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhXUkFQUEVSKTtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcyhFTkFCTEVEKTtcblxuICAgICAgICAgICAgLy9kdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL2FsdmFyb3RyaWdvL2Z1bGxQYWdlLmpzL2lzc3Vlcy8xNTAyXG4gICAgICAgICAgICB3aW5kb3dzSGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKERFU1RST1lFRCk7IC8vaW4gY2FzZSBpdCB3YXMgZGVzdHJveWVkIGJlZm9yZSBpbml0aWFsaXppbmcgaXQgYWdhaW5cblxuICAgICAgICAgICAgYWRkSW50ZXJuYWxTZWxlY3RvcnMoKTtcblxuICAgICAgICAgICAgLy9zdHlsaW5nIHRoZSBzZWN0aW9ucyAvIHNsaWRlcyAvIG1lbnVcbiAgICAgICAgICAgICQoU0VDVElPTl9TRUwpLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBzbGlkZXMgPSBzZWN0aW9uLmZpbmQoU0xJREVfU0VMKTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtU2xpZGVzID0gc2xpZGVzLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIHN0eWxlU2VjdGlvbihzZWN0aW9uLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgc3R5bGVNZW51KHNlY3Rpb24sIGluZGV4KTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3MgYW55IHNsaWRlXG4gICAgICAgICAgICAgICAgaWYgKG51bVNsaWRlcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTbGlkZXMoc2VjdGlvbiwgc2xpZGVzLCBudW1TbGlkZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnZlcnRpY2FsQ2VudGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRhYmxlQ2xhc3Moc2VjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9maXhlZCBlbGVtZW50cyBuZWVkIHRvIGJlIG1vdmVkIG91dCBvZiB0aGUgcGx1Z2luIGNvbnRhaW5lciBkdWUgdG8gcHJvYmxlbXMgd2l0aCBDU1MzLlxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZml4ZWRFbGVtZW50cyAmJiBvcHRpb25zLmNzczMpIHtcbiAgICAgICAgICAgICAgICAkKG9wdGlvbnMuZml4ZWRFbGVtZW50cykuYXBwZW5kVG8oJGJvZHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3ZlcnRpY2FsIGNlbnRlcmVkIG9mIHRoZSBuYXZpZ2F0aW9uICsgYWN0aXZlIGJ1bGxldFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubmF2aWdhdGlvbikge1xuICAgICAgICAgICAgICAgIGFkZFZlcnRpY2FsTmF2aWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbmFibGVZb3V0dWJlQVBJKCk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFySGFuZGxlciA9IG9wdGlvbnMuc2Nyb2xsT3ZlcmZsb3dIYW5kbGVyLmluaXQob3B0aW9ucyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFmdGVyUmVuZGVyQWN0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3R5bGVzIHRoZSBob3Jpem9udGFsIHNsaWRlcyBmb3IgYSBzZWN0aW9uLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdHlsZVNsaWRlcyhzZWN0aW9uLCBzbGlkZXMsIG51bVNsaWRlcykge1xuICAgICAgICAgICAgdmFyIHNsaWRlcldpZHRoID0gbnVtU2xpZGVzICogMTAwO1xuICAgICAgICAgICAgdmFyIHNsaWRlV2lkdGggPSAxMDAgLyBudW1TbGlkZXM7XG5cbiAgICAgICAgICAgIHNsaWRlcy53cmFwQWxsKCc8ZGl2IGNsYXNzPVwiJyArIFNMSURFU19DT05UQUlORVIgKyAnXCIgLz4nKTtcbiAgICAgICAgICAgIHNsaWRlcy5wYXJlbnQoKS53cmFwKCc8ZGl2IGNsYXNzPVwiJyArIFNMSURFU19XUkFQUEVSICsgJ1wiIC8+Jyk7XG5cbiAgICAgICAgICAgIHNlY3Rpb24uZmluZChTTElERVNfQ09OVEFJTkVSX1NFTCkuY3NzKCd3aWR0aCcsIHNsaWRlcldpZHRoICsgJyUnKTtcblxuICAgICAgICAgICAgaWYgKG51bVNsaWRlcyA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jb250cm9sQXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNsaWRlQXJyb3dzKHNlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNsaWRlc05hdmlnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2xpZGVzTmF2aWdhdGlvbihzZWN0aW9uLCBudW1TbGlkZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2xpZGVzLmVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ3dpZHRoJywgc2xpZGVXaWR0aCArICclJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy52ZXJ0aWNhbENlbnRlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFRhYmxlQ2xhc3MoJCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBzdGFydGluZ1NsaWRlID0gc2VjdGlvbi5maW5kKFNMSURFX0FDVElWRV9TRUwpO1xuXG4gICAgICAgICAgICAvL2lmIHRoZSBzbGlkZSB3b24ndCBiZSBhbiBzdGFydGluZyBwb2ludCwgdGhlIGRlZmF1bHQgd2lsbCBiZSB0aGUgZmlyc3Qgb25lXG4gICAgICAgICAgICAvL3RoZSBhY3RpdmUgc2VjdGlvbiBpc24ndCB0aGUgZmlyc3Qgb25lPyBJcyBub3QgdGhlIGZpcnN0IHNsaWRlIG9mIHRoZSBmaXJzdCBzZWN0aW9uPyBUaGVuIHdlIGxvYWQgdGhhdCBzZWN0aW9uL3NsaWRlIGJ5IGRlZmF1bHQuXG4gICAgICAgICAgICBpZiAoc3RhcnRpbmdTbGlkZS5sZW5ndGggJiYgKCQoU0VDVElPTl9BQ1RJVkVfU0VMKS5pbmRleChTRUNUSU9OX1NFTCkgIT09IDAgfHwgJChTRUNUSU9OX0FDVElWRV9TRUwpLmluZGV4KFNFQ1RJT05fU0VMKSA9PT0gMCAmJiBzdGFydGluZ1NsaWRlLmluZGV4KCkgIT09IDApKSB7XG4gICAgICAgICAgICAgICAgc2lsZW50TGFuZHNjYXBlU2Nyb2xsKHN0YXJ0aW5nU2xpZGUsICdpbnRlcm5hbCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzbGlkZXMuZXEoMCkuYWRkQ2xhc3MoQUNUSVZFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0eWxpbmcgdmVydGljYWwgc2VjdGlvbnNcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc3R5bGVTZWN0aW9uKHNlY3Rpb24sIGluZGV4KSB7XG4gICAgICAgICAgICAvL2lmIG5vIGFjdGl2ZSBzZWN0aW9uIGlzIGRlZmluZWQsIHRoZSAxc3Qgb25lIHdpbGwgYmUgdGhlIGRlZmF1bHQgb25lXG4gICAgICAgICAgICBpZiAoIWluZGV4ICYmICQoU0VDVElPTl9BQ1RJVkVfU0VMKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmFkZENsYXNzKEFDVElWRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydGluZ1NlY3Rpb24gPSAkKFNFQ1RJT05fQUNUSVZFX1NFTCk7XG5cbiAgICAgICAgICAgIHNlY3Rpb24uY3NzKCdoZWlnaHQnLCB3aW5kb3dzSGVpZ2h0ICsgJ3B4Jyk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBhZGRpbmdUb3ApIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmNzcygncGFkZGluZy10b3AnLCBvcHRpb25zLnBhZGRpbmdUb3ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYWRkaW5nQm90dG9tKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5jc3MoJ3BhZGRpbmctYm90dG9tJywgb3B0aW9ucy5wYWRkaW5nQm90dG9tKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNlY3Rpb25zQ29sb3JbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNlY3Rpb24uY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgb3B0aW9ucy5zZWN0aW9uc0NvbG9yW2luZGV4XSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5hbmNob3JzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmF0dHIoJ2RhdGEtYW5jaG9yJywgb3B0aW9ucy5hbmNob3JzW2luZGV4XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIHRoZSBkYXRhLWFuY2hvciBhdHRyaWJ1dGVzIHRvIHRoZSBtZW51IGVsZW1lbnRzIGFuZCBhY3RpdmF0ZXMgdGhlIGN1cnJlbnQgb25lLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdHlsZU1lbnUoc2VjdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5hbmNob3JzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAvL2FjdGl2YXRpbmcgdGhlIG1lbnUgLyBuYXYgZWxlbWVudCBvbiBsb2FkXG4gICAgICAgICAgICAgICAgaWYgKHNlY3Rpb24uaGFzQ2xhc3MoQUNUSVZFKSkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZU1lbnVBbmROYXYob3B0aW9ucy5hbmNob3JzW2luZGV4XSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9tb3ZpbmcgdGhlIG1lbnUgb3V0c2lkZSB0aGUgbWFpbiBjb250YWluZXIgaWYgaXQgaXMgaW5zaWRlIChhdm9pZCBwcm9ibGVtcyB3aXRoIGZpeGVkIHBvc2l0aW9ucyB3aGVuIHVzaW5nIENTUzMgdHJhbmZvcm1zKVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWVudSAmJiBvcHRpb25zLmNzczMgJiYgJChvcHRpb25zLm1lbnUpLmNsb3Nlc3QoV1JBUFBFUl9TRUwpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICQob3B0aW9ucy5tZW51KS5hcHBlbmRUbygkYm9keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGRzIGludGVybmFsIGNsYXNzZXMgdG8gYmUgYWJsZSB0byBwcm92aWRlIGN1c3RvbWl6YWJsZSBzZWxlY3RvcnNcclxuICAgICAgICAgKiBrZWVwaW5nIHRoZSBsaW5rIHdpdGggdGhlIHN0eWxlIHNoZWV0LlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhZGRJbnRlcm5hbFNlbGVjdG9ycygpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKG9wdGlvbnMuc2VjdGlvblNlbGVjdG9yKS5hZGRDbGFzcyhTRUNUSU9OKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKG9wdGlvbnMuc2xpZGVTZWxlY3RvcikuYWRkQ2xhc3MoU0xJREUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyB0aGUgY29udHJvbCBhcnJvd3MgZm9yIHRoZSBnaXZlbiBzZWN0aW9uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNsaWRlQXJyb3dzKHNlY3Rpb24pIHtcbiAgICAgICAgICAgIHNlY3Rpb24uZmluZChTTElERVNfV1JBUFBFUl9TRUwpLmFmdGVyKCc8ZGl2IGNsYXNzPVwiJyArIFNMSURFU19BUlJPV19QUkVWICsgJ1wiPjwvZGl2PjxkaXYgY2xhc3M9XCInICsgU0xJREVTX0FSUk9XX05FWFQgKyAnXCI+PC9kaXY+Jyk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnRyb2xBcnJvd0NvbG9yICE9ICcjZmZmJykge1xuICAgICAgICAgICAgICAgIHNlY3Rpb24uZmluZChTTElERVNfQVJST1dfTkVYVF9TRUwpLmNzcygnYm9yZGVyLWNvbG9yJywgJ3RyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50ICcgKyBvcHRpb25zLmNvbnRyb2xBcnJvd0NvbG9yKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmZpbmQoU0xJREVTX0FSUk9XX1BSRVZfU0VMKS5jc3MoJ2JvcmRlci1jb2xvcicsICd0cmFuc3BhcmVudCAnICsgb3B0aW9ucy5jb250cm9sQXJyb3dDb2xvciArICcgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmxvb3BIb3Jpem9udGFsKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5maW5kKFNMSURFU19BUlJPV19QUkVWX1NFTCkuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIHZlcnRpY2FsIG5hdmlnYXRpb24gYmFyLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhZGRWZXJ0aWNhbE5hdmlnYXRpb24oKSB7XG4gICAgICAgICAgICAkYm9keS5hcHBlbmQoJzxkaXYgaWQ9XCInICsgU0VDVElPTl9OQVYgKyAnXCI+PHVsPjwvdWw+PC9kaXY+Jyk7XG4gICAgICAgICAgICB2YXIgbmF2ID0gJChTRUNUSU9OX05BVl9TRUwpO1xuXG4gICAgICAgICAgICBuYXYuYWRkQ2xhc3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnNob3dBY3RpdmVUb29sdGlwID8gU0hPV19BQ1RJVkVfVE9PTFRJUCArICcgJyArIG9wdGlvbnMubmF2aWdhdGlvblBvc2l0aW9uIDogb3B0aW9ucy5uYXZpZ2F0aW9uUG9zaXRpb247XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkKFNFQ1RJT05fU0VMKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYW5jaG9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluayA9IG9wdGlvbnMuYW5jaG9yc1tpXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGkgPSAnPGxpPjxhIGhyZWY9XCIjJyArIGxpbmsgKyAnXCI+PHNwYW4+PC9zcGFuPjwvYT4nO1xuXG4gICAgICAgICAgICAgICAgLy8gT25seSBhZGQgdG9vbHRpcCBpZiBuZWVkZWQgKGRlZmluZWQgYnkgdXNlcilcbiAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcCA9IG9wdGlvbnMubmF2aWdhdGlvblRvb2x0aXBzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b29sdGlwICE9PSAndW5kZWZpbmVkJyAmJiB0b29sdGlwICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBsaSArPSAnPGRpdiBjbGFzcz1cIicgKyBTRUNUSU9OX05BVl9UT09MVElQICsgJyAnICsgb3B0aW9ucy5uYXZpZ2F0aW9uUG9zaXRpb24gKyAnXCI+JyArIHRvb2x0aXAgKyAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsaSArPSAnPC9saT4nO1xuXG4gICAgICAgICAgICAgICAgbmF2LmZpbmQoJ3VsJykuYXBwZW5kKGxpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jZW50ZXJpbmcgaXQgdmVydGljYWxseVxuICAgICAgICAgICAgJChTRUNUSU9OX05BVl9TRUwpLmNzcygnbWFyZ2luLXRvcCcsICctJyArICQoU0VDVElPTl9OQVZfU0VMKS5oZWlnaHQoKSAvIDIgKyAncHgnKTtcblxuICAgICAgICAgICAgLy9hY3RpdmF0aW5nIHRoZSBjdXJyZW50IGFjdGl2ZSBzZWN0aW9uXG4gICAgICAgICAgICAkKFNFQ1RJT05fTkFWX1NFTCkuZmluZCgnbGknKS5lcSgkKFNFQ1RJT05fQUNUSVZFX1NFTCkuaW5kZXgoU0VDVElPTl9TRUwpKS5maW5kKCdhJykuYWRkQ2xhc3MoQUNUSVZFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBFbmFibGVzIHRoZSBZb3V0dWJlIHZpZGVvcyBBUEkgc28gd2UgY2FuIGNvbnRyb2wgdGhlaXIgZmxvdyBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZW5hYmxlWW91dHViZUFQSSgpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCdpZnJhbWVbc3JjKj1cInlvdXR1YmUuY29tL2VtYmVkL1wiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFkZFVSTFBhcmFtKCQodGhpcyksICdlbmFibGVqc2FwaT0xJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgYSBuZXcgcGFyYW1ldGVyIGFuZCBpdHMgdmFsdWUgdG8gdGhlIGBzcmNgIG9mIGEgZ2l2ZW4gZWxlbWVudFxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhZGRVUkxQYXJhbShlbGVtZW50LCBuZXdQYXJhbSkge1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsU3JjID0gZWxlbWVudC5hdHRyKCdzcmMnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXR0cignc3JjJywgb3JpZ2luYWxTcmMgKyBnZXRVcmxQYXJhbVNpZ24ob3JpZ2luYWxTcmMpICsgbmV3UGFyYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcclxuICAgICAgICAqIFJldHVybnMgdGhlIHByZWZpeCBzaWduIHRvIHVzZSBmb3IgYSBuZXcgcGFyYW1ldGVyIGluIGFuIGV4aXN0ZW4gVVJMLlxyXG4gICAgICAgICpcclxuICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30gID8gfCAmXHJcbiAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXJsUGFyYW1TaWduKHVybCkge1xuICAgICAgICAgICAgcmV0dXJuICEvXFw/Ly50ZXN0KHVybCkgPyAnPycgOiAnJic7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBY3Rpb25zIGFuZCBjYWxsYmFja3MgdG8gZmlyZSBhZnRlclJlbmRlclxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhZnRlclJlbmRlckFjdGlvbnMoKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKTtcblxuICAgICAgICAgICAgc2VjdGlvbi5hZGRDbGFzcyhDT01QTEVURUxZKTtcblxuICAgICAgICAgICAgbGF6eUxvYWQoc2VjdGlvbik7XG4gICAgICAgICAgICBwbGF5TWVkaWEoc2VjdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zY3JvbGxPdmVyZmxvd0hhbmRsZXIuYWZ0ZXJMb2FkKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0Rlc3RpbnlUaGVTdGFydGluZ1NlY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICQuaXNGdW5jdGlvbihvcHRpb25zLmFmdGVyTG9hZCkgJiYgb3B0aW9ucy5hZnRlckxvYWQuY2FsbChzZWN0aW9uLCBzZWN0aW9uLmRhdGEoJ2FuY2hvcicpLCBzZWN0aW9uLmluZGV4KFNFQ1RJT05fU0VMKSArIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLmlzRnVuY3Rpb24ob3B0aW9ucy5hZnRlclJlbmRlcikgJiYgb3B0aW9ucy5hZnRlclJlbmRlci5jYWxsKGNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBVUkwgYW5jaG9yIGRlc3RpbnkgaXMgdGhlIHN0YXJ0aW5nIHNlY3Rpb24gKHRoZSBvbmUgdXNpbmcgJ2FjdGl2ZScgY2xhc3MgYmVmb3JlIGluaXRpYWxpemF0aW9uKVxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpc0Rlc3RpbnlUaGVTdGFydGluZ1NlY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGVzdGluYXRpb25TZWN0aW9uID0gZ2V0U2VjdGlvbkJ5QW5jaG9yKGdldEFuY2hvcnNVUkwoKS5zZWN0aW9uKTtcblxuICAgICAgICAgICAgcmV0dXJuICFkZXN0aW5hdGlvblNlY3Rpb24ubGVuZ3RoIHx8IGRlc3RpbmF0aW9uU2VjdGlvbi5sZW5ndGggJiYgZGVzdGluYXRpb25TZWN0aW9uLmluZGV4KCkgPT09IHN0YXJ0aW5nU2VjdGlvbi5pbmRleCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlzU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBsYXN0U2Nyb2xsID0gMDtcblxuICAgICAgICAvL3doZW4gc2Nyb2xsaW5nLi4uXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFNlY3Rpb247XG5cbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5hdXRvU2Nyb2xsaW5nIHx8IG9wdGlvbnMuc2Nyb2xsQmFyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPSAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXJlY3Rpb24gPSBnZXRTY3JvbGxEaXJlY3Rpb24oY3VycmVudFNjcm9sbCk7XG4gICAgICAgICAgICAgICAgdmFyIHZpc2libGVTZWN0aW9uSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHZhciBzY3JlZW5fbWlkID0gY3VycmVudFNjcm9sbCArICR3aW5kb3cuaGVpZ2h0KCkgLyAyLjA7XG4gICAgICAgICAgICAgICAgdmFyIGlzQXRCb3R0b20gPSAkYm9keS5oZWlnaHQoKSAtICR3aW5kb3cuaGVpZ2h0KCkgPT09IGN1cnJlbnRTY3JvbGw7XG4gICAgICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUNUSU9OX1NFTCk7XG5cbiAgICAgICAgICAgICAgICAvL3doZW4gdXNpbmcgYGF1dG8taGVpZ2h0YCBmb3IgYSBzbWFsbCBsYXN0IHNlY3Rpb24gaXQgd29uJ3QgYmUgY2VudGVyZWQgaW4gdGhlIHZpZXdwb3J0XG4gICAgICAgICAgICAgICAgaWYgKGlzQXRCb3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNlY3Rpb25JbmRleCA9IHNlY3Rpb25zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaXMgYXQgdG9wPyB3aGVuIHVzaW5nIGBhdXRvLWhlaWdodGAgZm9yIGEgc21hbGwgZmlyc3Qgc2VjdGlvbiBpdCB3b24ndCBiZSBjZW50ZXJlZCBpbiB0aGUgdmlld3BvcnRcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghY3VycmVudFNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNlY3Rpb25JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL3Rha2luZyB0aGUgc2VjdGlvbiB3aGljaCBpcyBzaG93aW5nIG1vcmUgY29udGVudCBpbiB0aGUgdmlld3BvcnRcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VjdGlvbiA9IHNlY3Rpb25zW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBpY2sgdGhlIHRoZSBsYXN0IHNlY3Rpb24gd2hpY2ggcGFzc2VzIHRoZSBtaWRkbGUgbGluZSBvZiB0aGUgc2NyZWVuLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbi5vZmZzZXRUb3AgPD0gc2NyZWVuX21pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNlY3Rpb25JbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWx5SW5WaWV3UG9ydChzY3JvbGxEaXJlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJChTRUNUSU9OX0FDVElWRV9TRUwpLmhhc0NsYXNzKENPTVBMRVRFTFkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFNFQ1RJT05fQUNUSVZFX1NFTCkuYWRkQ2xhc3MoQ09NUExFVEVMWSkuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhDT01QTEVURUxZKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vZ2V0aW5nIHRoZSBsYXN0IG9uZSwgdGhlIGN1cnJlbnQgb25lIG9uIHRoZSBzY3JlZW5cbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9ICQoc2VjdGlvbnMpLmVxKHZpc2libGVTZWN0aW9uSW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgLy9zZXR0aW5nIHRoZSB2aXNpYmxlIHNlY3Rpb24gYXMgYWN0aXZlIHdoZW4gbWFudWFsbHkgc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgLy9leGVjdXRpbmcgb25seSBvbmNlIHRoZSBmaXJzdCB0aW1lIHdlIHJlYWNoIHRoZSBzZWN0aW9uXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50U2VjdGlvbi5oYXNDbGFzcyhBQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlYXZpbmdTZWN0aW9uID0gJChTRUNUSU9OX0FDVElWRV9TRUwpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVhdmluZ1NlY3Rpb25JbmRleCA9IGxlYXZpbmdTZWN0aW9uLmluZGV4KFNFQ1RJT05fU0VMKSArIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5TW92ZW1lbnQgPSBnZXRZbW92ZW1lbnQoY3VycmVudFNlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5jaG9yTGluayA9IGN1cnJlbnRTZWN0aW9uLmRhdGEoJ2FuY2hvcicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VjdGlvbkluZGV4ID0gY3VycmVudFNlY3Rpb24uaW5kZXgoU0VDVElPTl9TRUwpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVNsaWRlID0gY3VycmVudFNlY3Rpb24uZmluZChTTElERV9BQ1RJVkVfU0VMKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGlkZUFuY2hvckxpbms7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVNsaWRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVBbmNob3JMaW5rID0gYWN0aXZlU2xpZGUuZGF0YSgnYW5jaG9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUluZGV4ID0gYWN0aXZlU2xpZGUuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5TY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uLmFkZENsYXNzKEFDVElWRSkuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhBQ1RJVkUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmlzRnVuY3Rpb24ob3B0aW9ucy5vbkxlYXZlKSAmJiBvcHRpb25zLm9uTGVhdmUuY2FsbChsZWF2aW5nU2VjdGlvbiwgbGVhdmluZ1NlY3Rpb25JbmRleCwgc2VjdGlvbkluZGV4LCB5TW92ZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKG9wdGlvbnMuYWZ0ZXJMb2FkKSAmJiBvcHRpb25zLmFmdGVyTG9hZC5jYWxsKGN1cnJlbnRTZWN0aW9uLCBhbmNob3JMaW5rLCBzZWN0aW9uSW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wTWVkaWEobGVhdmluZ1NlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUxvYWQoY3VycmVudFNlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxheU1lZGlhKGN1cnJlbnRTZWN0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVNZW51QW5kTmF2KGFuY2hvckxpbmssIHNlY3Rpb25JbmRleCAtIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hbmNob3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbmVlZGVkIHRvIGVudGVyIGluIGhhc2hDaGFuZ2UgZXZlbnQgd2hlbiB1c2luZyB0aGUgbWVudSB3aXRoIGFuY2hvciBsaW5rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxlZERlc3RpbnkgPSBhbmNob3JMaW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoc2xpZGVJbmRleCwgc2xpZGVBbmNob3JMaW5rLCBhbmNob3JMaW5rLCBzZWN0aW9uSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9zbWFsbCB0aW1lb3V0IGluIG9yZGVyIHRvIGF2b2lkIGVudGVyaW5nIGluIGhhc2hDaGFuZ2UgZXZlbnQgd2hlbiBzY3JvbGxpbmcgaXMgbm90IGZpbmlzaGVkIHlldFxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsSWQpO1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5maXRUb1NlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy9mb3IgdGhlIGF1dG8gYWRqdXN0IG9mIHRoZSB2aWV3cG9ydCB0byBmaXQgYSB3aG9sZSBzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxJZDIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbElkMiA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGVja2luZyBpdCBhZ2FpbiBpbiBjYXNlIGl0IGNoYW5nZWQgZHVyaW5nIHRoZSBkZWxheVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZml0VG9TZWN0aW9uICYmXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXMgdGhlIGRlc3RpbmF0aW9uIGVsZW1lbnQgYmlnZ2VyIHRoYW4gdGhlIHZpZXdwb3J0P1xuICAgICAgICAgICAgICAgICAgICAgICAgJChTRUNUSU9OX0FDVElWRV9TRUwpLm91dGVySGVpZ2h0KCkgPD0gd2luZG93c0hlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpdFRvU2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zLmZpdFRvU2VjdGlvbkRlbGF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaXRzIHRoZSBzaXRlIHRvIHRoZSBuZWFyZXN0IGFjdGl2ZSBzZWN0aW9uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGZpdFRvU2VjdGlvbigpIHtcbiAgICAgICAgICAgIC8vY2hlY2tpbmcgZml0VG9TZWN0aW9uIGFnYWluIGluIGNhc2UgaXQgd2FzIHNldCB0byBmYWxzZSBiZWZvcmUgdGhlIHRpbWVvdXQgZGVsYXlcbiAgICAgICAgICAgIGlmIChjYW5TY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAvL2FsbG93cyB0byBzY3JvbGwgdG8gYW4gYWN0aXZlIHNlY3Rpb24gYW5kXG4gICAgICAgICAgICAgICAgLy9pZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgd2UgcHJldmVudCBmaXJpbmcgY2FsbGJhY2tzXG4gICAgICAgICAgICAgICAgaXNSZXNpemluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxQYWdlKCQoU0VDVElPTl9BQ1RJVkVfU0VMKSk7XG4gICAgICAgICAgICAgICAgaXNSZXNpemluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBhY3RpdmUgc2VjdGlvbiBoYXMgc2VlbiBpbiBpdHMgd2hvbGUgb3Igbm90LlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpc0NvbXBsZXRlbHlJblZpZXdQb3J0KG1vdmVtZW50KSB7XG4gICAgICAgICAgICB2YXIgdG9wID0gJChTRUNUSU9OX0FDVElWRV9TRUwpLnBvc2l0aW9uKCkudG9wO1xuICAgICAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArICR3aW5kb3cuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIGlmIChtb3ZlbWVudCA9PSAndXAnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvdHRvbSA+PSAkd2luZG93LnNjcm9sbFRvcCgpICsgJHdpbmRvdy5oZWlnaHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b3AgPD0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGRpcmVjdG9uIG9mIHRoZSB0aGUgc2Nyb2xsaW5nIGZpcmVkIGJ5IHRoZSBzY3JvbGwgZXZlbnQuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFNjcm9sbERpcmVjdGlvbihjdXJyZW50U2Nyb2xsKSB7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gY3VycmVudFNjcm9sbCA+IGxhc3RTY3JvbGwgPyAnZG93bicgOiAndXAnO1xuXG4gICAgICAgICAgICBsYXN0U2Nyb2xsID0gY3VycmVudFNjcm9sbDtcblxuICAgICAgICAgICAgLy9uZWVkZWQgZm9yIGF1dG8taGVpZ2h0IHNlY3Rpb25zIHRvIGRldGVybWluZSBpZiB3ZSB3YW50IHRvIHNjcm9sbCB0byB0aGUgdG9wIG9yIGJvdHRvbSBvZiB0aGUgZGVzdGluYXRpb25cbiAgICAgICAgICAgIHByZXZpb3VzRGVzdFRvcCA9IGN1cnJlbnRTY3JvbGw7XG5cbiAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIHRoZSB3YXkgb2Ygc2Nyb2xsaW5nIHVwIG9yIGRvd246XHJcbiAgICAgICAgICogYnkgJ2F1dG9tYXRpY2FsbHknIHNjcm9sbGluZyBhIHNlY3Rpb24gb3IgYnkgdXNpbmcgdGhlIGRlZmF1bHQgYW5kIG5vcm1hbCBzY3JvbGxpbmcuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbGluZyh0eXBlKSB7XG4gICAgICAgICAgICBpZiAoIWlzU2Nyb2xsQWxsb3dlZC5tW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsU2VjdGlvbiA9IHR5cGUgPT09ICdkb3duJyA/IG1vdmVTZWN0aW9uRG93biA6IG1vdmVTZWN0aW9uVXA7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbGFibGUgPSBvcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlci5zY3JvbGxhYmxlKCQoU0VDVElPTl9BQ1RJVkVfU0VMKSk7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gdHlwZSA9PT0gJ2Rvd24nID8gJ2JvdHRvbScgOiAndG9wJztcblxuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxhYmxlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9pcyB0aGUgc2Nyb2xsYmFyIGF0IHRoZSBzdGFydC9lbmQgb2YgdGhlIHNjcm9sbD9cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2Nyb2xsT3ZlcmZsb3dIYW5kbGVyLmlzU2Nyb2xsZWQoY2hlY2ssIHNjcm9sbGFibGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmVkIHVwL2Rvd25cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsU2VjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbW92ZWQgdXAvZG93blxuICAgICAgICAgICAgICAgIHNjcm9sbFNlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBQcmV2ZW50aW5nIGJvdW5jaW5nIGluIGlPUyAjMjI4NVxyXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHByZXZlbnRCb3VuY2luZyhldmVudCkge1xuICAgICAgICAgICAgdmFyIGUgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXV0b1Njcm9sbGluZyAmJiBpc1JlYWxseVRvdWNoKGUpKSB7XG4gICAgICAgICAgICAgICAgLy9wcmV2ZW50aW5nIHRoZSBlYXNpbmcgb24gaU9TIGRldmljZXNcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvdWNoU3RhcnRZID0gMDtcbiAgICAgICAgdmFyIHRvdWNoU3RhcnRYID0gMDtcbiAgICAgICAgdmFyIHRvdWNoRW5kWSA9IDA7XG4gICAgICAgIHZhciB0b3VjaEVuZFggPSAwO1xuXG4gICAgICAgIC8qIERldGVjdGluZyB0b3VjaCBldmVudHNcclxuICAgICAgICAqIEFzIHdlIGFyZSBjaGFuZ2luZyB0aGUgdG9wIHByb3BlcnR5IG9mIHRoZSBwYWdlIG9uIHNjcm9sbGluZywgd2UgY2FuIG5vdCB1c2UgdGhlIHRyYWRpdGlvbmFsIHdheSB0byBkZXRlY3QgaXQuXHJcbiAgICAgICAgKiBUaGlzIHdheSwgdGhlIHRvdWNoc3RhcnQgYW5kIHRoZSB0b3VjaCBtb3ZlcyBzaG93cyBhbiBzbWFsbCBkaWZmZXJlbmNlIGJldHdlZW4gdGhlbSB3aGljaCBpcyB0aGVcclxuICAgICAgICAqIHVzZWQgb25lIHRvIGRldGVybWluZSB0aGUgZGlyZWN0aW9uLlxyXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvdWNoTW92ZUhhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBlID0gZXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICAgIHZhciBhY3RpdmVTZWN0aW9uID0gJChlLnRhcmdldCkuY2xvc2VzdChTRUNUSU9OX1NFTCk7XG5cbiAgICAgICAgICAgIC8vIGFkZGl0aW9uYWw6IGlmIG9uZSBvZiB0aGUgbm9ybWFsU2Nyb2xsRWxlbWVudHMgaXNuJ3Qgd2l0aGluIG9wdGlvbnMubm9ybWFsU2Nyb2xsRWxlbWVudFRvdWNoVGhyZXNob2xkIGhvcHMgdXAgdGhlIERPTSBjaGFpblxuICAgICAgICAgICAgaWYgKGlzUmVhbGx5VG91Y2goZSkpIHtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmF1dG9TY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9wcmV2ZW50aW5nIHRoZSBlYXNpbmcgb24gaU9TIGRldmljZXNcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgdG91Y2hFdmVudHMgPSBnZXRFdmVudHNQYWdlKGUpO1xuXG4gICAgICAgICAgICAgICAgdG91Y2hFbmRZID0gdG91Y2hFdmVudHMueTtcbiAgICAgICAgICAgICAgICB0b3VjaEVuZFggPSB0b3VjaEV2ZW50cy54O1xuXG4gICAgICAgICAgICAgICAgLy9pZiBtb3ZlbWVudCBpbiB0aGUgWCBheHlzIGlzIGdyZWF0ZXIgdGhhbiBpbiB0aGUgWSBhbmQgdGhlIGN1cnJlY3Qgc2VjdGlvbiBoYXMgc2xpZGVzLi4uXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVNlY3Rpb24uZmluZChTTElERVNfV1JBUFBFUl9TRUwpLmxlbmd0aCAmJiBNYXRoLmFicyh0b3VjaFN0YXJ0WCAtIHRvdWNoRW5kWCkgPiBNYXRoLmFicyh0b3VjaFN0YXJ0WSAtIHRvdWNoRW5kWSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAvL2lzIHRoZSBtb3ZlbWVudCBncmVhdGVyIHRoYW4gdGhlIG1pbmltdW0gcmVzaXN0YW5jZSB0byBzY3JvbGw/XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2xpZGVNb3ZpbmcgJiYgTWF0aC5hYnModG91Y2hTdGFydFggLSB0b3VjaEVuZFgpID4gJHdpbmRvdy5vdXRlcldpZHRoKCkgLyAxMDAgKiBvcHRpb25zLnRvdWNoU2Vuc2l0aXZpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3VjaFN0YXJ0WCA+IHRvdWNoRW5kWCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1Njcm9sbEFsbG93ZWQubS5yaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlU2xpZGVSaWdodChhY3RpdmVTZWN0aW9uKTsgLy9uZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxBbGxvd2VkLm0ubGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlU2xpZGVMZWZ0KGFjdGl2ZVNlY3Rpb24pOyAvL3ByZXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3ZlcnRpY2FsIHNjcm9sbGluZyAob25seSB3aGVuIGF1dG9TY3JvbGxpbmcgaXMgZW5hYmxlZClcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLmF1dG9TY3JvbGxpbmcgJiYgY2FuU2Nyb2xsKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXMgdGhlIG1vdmVtZW50IGdyZWF0ZXIgdGhhbiB0aGUgbWluaW11bSByZXNpc3RhbmNlIHRvIHNjcm9sbD9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0b3VjaFN0YXJ0WSAtIHRvdWNoRW5kWSkgPiAkd2luZG93LmhlaWdodCgpIC8gMTAwICogb3B0aW9ucy50b3VjaFNlbnNpdGl2aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdWNoU3RhcnRZID4gdG91Y2hFbmRZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZygnZG93bicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG91Y2hFbmRZID4gdG91Y2hTdGFydFkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsaW5nKCd1cCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXMgSUUgPj0gMTAgZmlyZXMgYm90aCB0b3VjaCBhbmQgbW91c2UgZXZlbnRzIHdoZW4gdXNpbmcgYSBtb3VzZSBpbiBhIHRvdWNoc2NyZWVuXHJcbiAgICAgICAgICogdGhpcyB3YXkgd2UgbWFrZSBzdXJlIHRoYXQgaXMgcmVhbGx5IGEgdG91Y2ggZXZlbnQgd2hhdCBJRSBpcyBkZXRlY3RpbmcuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGlzUmVhbGx5VG91Y2goZSkge1xuICAgICAgICAgICAgLy9pZiBpcyBub3QgSUUgICB8fCAgSUUgaXMgZGV0ZWN0aW5nIGB0b3VjaGAgb3IgYHBlbmBcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZS5wb2ludGVyVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgZS5wb2ludGVyVHlwZSAhPSAnbW91c2UnO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBmb3IgdGhlIHRvdWNoIHN0YXJ0IGV2ZW50LlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b3VjaFN0YXJ0SGFuZGxlcihldmVudCkge1xuICAgICAgICAgICAgdmFyIGUgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xuXG4gICAgICAgICAgICAvL3N0b3BwaW5nIHRoZSBhdXRvIHNjcm9sbCB0byBhZGp1c3QgdG8gYSBzZWN0aW9uXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5maXRUb1NlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAkaHRtbEJvZHkuc3RvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNSZWFsbHlUb3VjaChlKSkge1xuICAgICAgICAgICAgICAgIHZhciB0b3VjaEV2ZW50cyA9IGdldEV2ZW50c1BhZ2UoZSk7XG4gICAgICAgICAgICAgICAgdG91Y2hTdGFydFkgPSB0b3VjaEV2ZW50cy55O1xuICAgICAgICAgICAgICAgIHRvdWNoU3RhcnRYID0gdG91Y2hFdmVudHMueDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIGxhc3QgYG51bWJlcmAgZWxlbWVudHMgb2YgdGhlIGdpdmVuIGFycmF5LlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRBdmVyYWdlKGVsZW1lbnRzLCBudW1iZXIpIHtcbiAgICAgICAgICAgIHZhciBzdW0gPSAwO1xuXG4gICAgICAgICAgICAvL3Rha2luZyBgbnVtYmVyYCBlbGVtZW50cyBmcm9tIHRoZSBlbmQgdG8gbWFrZSB0aGUgYXZlcmFnZSwgaWYgdGhlcmUgYXJlIG5vdCBlbm91Z2h0LCAxXG4gICAgICAgICAgICB2YXIgbGFzdEVsZW1lbnRzID0gZWxlbWVudHMuc2xpY2UoTWF0aC5tYXgoZWxlbWVudHMubGVuZ3RoIC0gbnVtYmVyLCAxKSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc3VtID0gc3VtICsgbGFzdEVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHN1bSAvIG51bWJlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlY3RpbmcgbW91c2V3aGVlbCBzY3JvbGxpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGh0dHA6Ly9ibG9ncy5zaXRlcG9pbnRzdGF0aWMuY29tL2V4YW1wbGVzL3RlY2gvbW91c2Utd2hlZWwvaW5kZXguaHRtbFxyXG4gICAgICAgICAqIGh0dHA6Ly93d3cuc2l0ZXBvaW50LmNvbS9odG1sNS1qYXZhc2NyaXB0LW1vdXNlLXdoZWVsL1xyXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJldlRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICBmdW5jdGlvbiBNb3VzZVdoZWVsSGFuZGxlcihlKSB7XG4gICAgICAgICAgICB2YXIgY3VyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIGlzTm9ybWFsU2Nyb2xsID0gJChDT01QTEVURUxZX1NFTCkuaGFzQ2xhc3MoTk9STUFMX1NDUk9MTCk7XG5cbiAgICAgICAgICAgIC8vYXV0b3Njcm9sbGluZyBhbmQgbm90IHpvb21pbmc/XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFjb250cm9sUHJlc3NlZCAmJiAhaXNOb3JtYWxTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAvLyBjcm9zcy1icm93c2VyIHdoZWVsIGRlbHRhXG4gICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGUud2hlZWxEZWx0YSB8fCAtZS5kZWx0YVkgfHwgLWUuZGV0YWlsO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCB2YWx1ZSkpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGhvcml6b250YWxEZXRlY3Rpb24gPSB0eXBlb2YgZS53aGVlbERlbHRhWCAhPT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGUuZGVsdGFYICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgICAgICB2YXIgaXNTY3JvbGxpbmdWZXJ0aWNhbGx5ID0gTWF0aC5hYnMoZS53aGVlbERlbHRhWCkgPCBNYXRoLmFicyhlLndoZWVsRGVsdGEpIHx8IE1hdGguYWJzKGUuZGVsdGFYKSA8IE1hdGguYWJzKGUuZGVsdGFZKSB8fCAhaG9yaXpvbnRhbERldGVjdGlvbjtcblxuICAgICAgICAgICAgICAgIC8vTGltaXRpbmcgdGhlIGFycmF5IHRvIDE1MCAobGV0cyBub3Qgd2FzdGUgbWVtb3J5ISlcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsaW5ncy5sZW5ndGggPiAxNDkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsaW5ncy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8va2VlcGluZyByZWNvcmQgb2YgdGhlIHByZXZpb3VzIHNjcm9sbGluZ3NcbiAgICAgICAgICAgICAgICBzY3JvbGxpbmdzLnB1c2goTWF0aC5hYnModmFsdWUpKTtcblxuICAgICAgICAgICAgICAgIC8vcHJldmVudGluZyB0byBzY3JvbGwgdGhlIHNpdGUgb24gbW91c2Ugd2hlZWwgd2hlbiBzY3JvbGxiYXIgaXMgcHJlc2VudFxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbEJhcikge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vdGltZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGxhc3Qgc2Nyb2xsIGFuZCB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICAgICAgICB2YXIgdGltZURpZmYgPSBjdXJUaW1lIC0gcHJldlRpbWU7XG4gICAgICAgICAgICAgICAgcHJldlRpbWUgPSBjdXJUaW1lO1xuXG4gICAgICAgICAgICAgICAgLy9oYXZlbid0IHRoZXkgc2Nyb2xsZWQgaW4gYSB3aGlsZT9cbiAgICAgICAgICAgICAgICAvLyhlbm91Z2ggdG8gYmUgY29uc2lkZXIgYSBkaWZmZXJlbnQgc2Nyb2xsaW5nIGFjdGlvbiB0byBzY3JvbGwgYW5vdGhlciBzZWN0aW9uKVxuICAgICAgICAgICAgICAgIGlmICh0aW1lRGlmZiA+IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAvL2VtcHR5aW5nIHRoZSBhcnJheSwgd2UgZG9udCBjYXJlIGFib3V0IG9sZCBzY3JvbGxpbmdzIGZvciBvdXIgYXZlcmFnZXNcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsaW5ncyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjYW5TY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2VFbmQgPSBnZXRBdmVyYWdlKHNjcm9sbGluZ3MsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2VNaWRkbGUgPSBnZXRBdmVyYWdlKHNjcm9sbGluZ3MsIDcwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQWNjZWxlcmF0aW5nID0gYXZlcmFnZUVuZCA+PSBhdmVyYWdlTWlkZGxlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vdG8gYXZvaWQgZG91YmxlIHN3aXBlcy4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBY2NlbGVyYXRpbmcgJiYgaXNTY3JvbGxpbmdWZXJ0aWNhbGx5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Njcm9sbGluZyBkb3duP1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZygnZG93bicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zY3JvbGxpbmcgdXA/XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbGluZygndXAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZml0VG9TZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy9zdG9wcGluZyB0aGUgYXV0byBzY3JvbGwgdG8gYWRqdXN0IHRvIGEgc2VjdGlvblxuICAgICAgICAgICAgICAgICRodG1sQm9keS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTbGlkZXMgYSBzbGlkZXIgdG8gdGhlIGdpdmVuIGRpcmVjdGlvbi5cclxuICAgICAgICAgKiBPcHRpb25hbCBgc2VjdGlvbmAgcGFyYW0uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1vdmVTbGlkZShkaXJlY3Rpb24sIHNlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBhY3RpdmVTZWN0aW9uID0gdHlwZW9mIHNlY3Rpb24gPT09ICd1bmRlZmluZWQnID8gJChTRUNUSU9OX0FDVElWRV9TRUwpIDogc2VjdGlvbjtcbiAgICAgICAgICAgIHZhciBzbGlkZXMgPSBhY3RpdmVTZWN0aW9uLmZpbmQoU0xJREVTX1dSQVBQRVJfU0VMKTtcbiAgICAgICAgICAgIHZhciBudW1TbGlkZXMgPSBzbGlkZXMuZmluZChTTElERV9TRUwpLmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gbW9yZSB0aGFuIG9uZSBzbGlkZSBuZWVkZWQgYW5kIG5vdGhpbmcgc2hvdWxkIGJlIHNsaWRpbmdcbiAgICAgICAgICAgIGlmICghc2xpZGVzLmxlbmd0aCB8fCBzbGlkZU1vdmluZyB8fCBudW1TbGlkZXMgPCAyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3VycmVudFNsaWRlID0gc2xpZGVzLmZpbmQoU0xJREVfQUNUSVZFX1NFTCk7XG4gICAgICAgICAgICB2YXIgZGVzdGlueSA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIGRlc3RpbnkgPSBjdXJyZW50U2xpZGUucHJldihTTElERV9TRUwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXN0aW55ID0gY3VycmVudFNsaWRlLm5leHQoU0xJREVfU0VMKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9pc24ndCB0aGVyZSBhIG5leHQgc2xpZGUgaW4gdGhlIHNlY3VlbmNlP1xuICAgICAgICAgICAgaWYgKCFkZXN0aW55Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vcmVzcGVjdCBsb29wSG9yaXpvbnRhbCBzZXR0aW5cbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMubG9vcEhvcml6b250YWwpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICBkZXN0aW55ID0gY3VycmVudFNsaWRlLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbnkgPSBjdXJyZW50U2xpZGUuc2libGluZ3MoJzpmaXJzdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2xpZGVNb3ZpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBsYW5kc2NhcGVTY3JvbGwoc2xpZGVzLCBkZXN0aW55LCBkaXJlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFpbnRhaW5zIHRoZSBhY3RpdmUgc2xpZGVzIGluIHRoZSB2aWV3cG9ydFxyXG4gICAgICAgICAqIChCZWNhdXNlIHRoZSBgc2Nyb2xsYCBhbmltYXRpb24gbWlnaHQgZ2V0IGxvc3Qgd2l0aCBzb21lIGFjdGlvbnMsIHN1Y2ggYXMgd2hlbiB1c2luZyBjb250aW51b3VzVmVydGljYWwpXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGtlZXBTbGlkZXNQb3NpdGlvbigpIHtcbiAgICAgICAgICAgICQoU0xJREVfQUNUSVZFX1NFTCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2lsZW50TGFuZHNjYXBlU2Nyb2xsKCQodGhpcyksICdpbnRlcm5hbCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJldmlvdXNEZXN0VG9wID0gMDtcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgZGVzdGluYXRpb24gWSBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgc2Nyb2xsaW5nIGRpcmVjdGlvbiBhbmRcclxuICAgICAgICAgKiB0aGUgaGVpZ2h0IG9mIHRoZSBzZWN0aW9uLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXREZXN0aW5hdGlvblBvc2l0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBlbGVtUG9zaXRpb24gPSBlbGVtZW50LnBvc2l0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vdG9wIG9mIHRoZSBkZXNpbmF0aW9uIHdpbGwgYmUgYXQgdGhlIHRvcCBvZiB0aGUgdmlld3BvcnRcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGVsZW1Qb3NpdGlvbi50b3A7XG4gICAgICAgICAgICB2YXIgaXNTY3JvbGxpbmdEb3duID0gZWxlbVBvc2l0aW9uLnRvcCA+IHByZXZpb3VzRGVzdFRvcDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uQm90dG9tID0gcG9zaXRpb24gLSB3aW5kb3dzSGVpZ2h0ICsgZWxlbWVudC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIGJpZ1NlY3Rpb25zRGVzdGluYXRpb24gPSBvcHRpb25zLmJpZ1NlY3Rpb25zRGVzdGluYXRpb247XG5cbiAgICAgICAgICAgIC8vaXMgdGhlIGRlc3RpbmF0aW9uIGVsZW1lbnQgYmlnZ2VyIHRoYW4gdGhlIHZpZXdwb3J0P1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQub3V0ZXJIZWlnaHQoKSA+IHdpbmRvd3NIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAvL3Njcm9sbGluZyB1cD9cbiAgICAgICAgICAgICAgICBpZiAoIWlzU2Nyb2xsaW5nRG93biAmJiAhYmlnU2VjdGlvbnNEZXN0aW5hdGlvbiB8fCBiaWdTZWN0aW9uc0Rlc3RpbmF0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNlY3Rpb25Cb3R0b207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3NlY3Rpb25zIGVxdWFsIG9yIHNtYWxsZXIgdGhhbiB0aGUgdmlld3BvcnQgaGVpZ2h0ICYmIHNjcm9sbGluZyBkb3duPyB8fCAgaXMgcmVzaXppbmcgYW5kIGl0cyBpbiB0aGUgbGFzdCBzZWN0aW9uXG4gICAgICAgICAgICBlbHNlIGlmIChpc1Njcm9sbGluZ0Rvd24gfHwgaXNSZXNpemluZyAmJiBlbGVtZW50LmlzKCc6bGFzdC1jaGlsZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVGhlIGJvdHRvbSBvZiB0aGUgZGVzdGluYXRpb24gd2lsbCBiZSBhdCB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNlY3Rpb25Cb3R0b207XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBLZWVwaW5nIHJlY29yZCBvZiB0aGUgbGFzdCBzY3JvbGxlZCBwb3NpdGlvbiB0byBkZXRlcm1pbmUgdGhlIHNjcm9sbGluZyBkaXJlY3Rpb24uXHJcbiAgICAgICAgICAgIE5vIGNvbnZlbnRpb25hbCBtZXRob2RzIGNhbiBiZSB1c2VkIGFzIHRoZSBzY3JvbGwgYmFyIG1pZ2h0IG5vdCBiZSBwcmVzZW50XHJcbiAgICAgICAgICAgIEFORCB0aGUgc2VjdGlvbiBtaWdodCBub3QgYmUgYWN0aXZlIGlmIGl0IGlzIGF1dG8taGVpZ2h0IGFuZCBkaWRudCByZWFjaCB0aGUgbWlkZGxlXHJcbiAgICAgICAgICAgIG9mIHRoZSB2aWV3cG9ydC5cclxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByZXZpb3VzRGVzdFRvcCA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xscyB0aGUgc2l0ZSB0byB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgc2Nyb2xscyB0byB0aGUgc2xpZGUgaWYgYSBjYWxsYmFjayBpcyBnaXZlbi5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsUGFnZShlbGVtZW50LCBjYWxsYmFjaywgaXNNb3ZlbWVudFVwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSAvL3RoZXJlJ3Mgbm8gZWxlbWVudCB0byBzY3JvbGwsIGxlYXZpbmcgdGhlIGZ1bmN0aW9uXG5cbiAgICAgICAgICAgIHZhciBkdG9wID0gZ2V0RGVzdGluYXRpb25Qb3NpdGlvbihlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBzbGlkZUFuY2hvckxpbms7XG4gICAgICAgICAgICB2YXIgc2xpZGVJbmRleDtcblxuICAgICAgICAgICAgLy9sb2NhbCB2YXJpYWJsZXNcbiAgICAgICAgICAgIHZhciB2ID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIGlzTW92ZW1lbnRVcDogaXNNb3ZlbWVudFVwLFxuICAgICAgICAgICAgICAgIGR0b3A6IGR0b3AsXG4gICAgICAgICAgICAgICAgeU1vdmVtZW50OiBnZXRZbW92ZW1lbnQoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgYW5jaG9yTGluazogZWxlbWVudC5kYXRhKCdhbmNob3InKSxcbiAgICAgICAgICAgICAgICBzZWN0aW9uSW5kZXg6IGVsZW1lbnQuaW5kZXgoU0VDVElPTl9TRUwpLFxuICAgICAgICAgICAgICAgIGFjdGl2ZVNsaWRlOiBlbGVtZW50LmZpbmQoU0xJREVfQUNUSVZFX1NFTCksXG4gICAgICAgICAgICAgICAgYWN0aXZlU2VjdGlvbjogJChTRUNUSU9OX0FDVElWRV9TRUwpLFxuICAgICAgICAgICAgICAgIGxlYXZpbmdTZWN0aW9uOiAkKFNFQ1RJT05fQUNUSVZFX1NFTCkuaW5kZXgoU0VDVElPTl9TRUwpICsgMSxcblxuICAgICAgICAgICAgICAgIC8vY2FjaGluZyB0aGUgdmFsdWUgb2YgaXNSZXNpemluZyBhdCB0aGUgbW9tbWVudCB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkXG4gICAgICAgICAgICAgICAgLy9iZWNhdXNlIGl0IHdpbGwgYmUgY2hlY2tlZCBsYXRlciBpbnNpZGUgYSBzZXRUaW1lb3V0IGFuZCB0aGUgdmFsdWUgbWlnaHQgY2hhbmdlXG4gICAgICAgICAgICAgICAgbG9jYWxJc1Jlc2l6aW5nOiBpc1Jlc2l6aW5nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL3F1aXRpbmcgd2hlbiBkZXN0aW5hdGlvbiBzY3JvbGwgaXMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgb25lXG4gICAgICAgICAgICBpZiAodi5hY3RpdmVTZWN0aW9uLmlzKGVsZW1lbnQpICYmICFpc1Jlc2l6aW5nIHx8IG9wdGlvbnMuc2Nyb2xsQmFyICYmICR3aW5kb3cuc2Nyb2xsVG9wKCkgPT09IHYuZHRvcCAmJiAhZWxlbWVudC5oYXNDbGFzcyhBVVRPX0hFSUdIVCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2LmFjdGl2ZVNsaWRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNsaWRlQW5jaG9yTGluayA9IHYuYWN0aXZlU2xpZGUuZGF0YSgnYW5jaG9yJyk7XG4gICAgICAgICAgICAgICAgc2xpZGVJbmRleCA9IHYuYWN0aXZlU2xpZGUuaW5kZXgoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jYWxsYmFjayAob25MZWF2ZSkgaWYgdGhlIHNpdGUgaXMgbm90IGp1c3QgcmVzaXppbmcgYW5kIHJlYWRqdXN0aW5nIHRoZSBzbGlkZXNcbiAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ob3B0aW9ucy5vbkxlYXZlKSAmJiAhdi5sb2NhbElzUmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbkxlYXZlLmNhbGwodi5hY3RpdmVTZWN0aW9uLCB2LmxlYXZpbmdTZWN0aW9uLCB2LnNlY3Rpb25JbmRleCArIDEsIHYueU1vdmVtZW50KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgY29udGludW91c1ZlcnRpY2FsICYmIHdlIG5lZWQgdG8gd3JhcCBhcm91bmRcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmF1dG9TY3JvbGxpbmcgJiYgb3B0aW9ucy5jb250aW51b3VzVmVydGljYWwgJiYgdHlwZW9mIHYuaXNNb3ZlbWVudFVwICE9PSBcInVuZGVmaW5lZFwiICYmICghdi5pc01vdmVtZW50VXAgJiYgdi55TW92ZW1lbnQgPT0gJ3VwJyB8fCAvLyBJbnRlbmRpbmcgdG8gc2Nyb2xsIGRvd24gYnV0IGFib3V0IHRvIGdvIHVwIG9yXG4gICAgICAgICAgICB2LmlzTW92ZW1lbnRVcCAmJiB2LnlNb3ZlbWVudCA9PSAnZG93bicpKSB7XG4gICAgICAgICAgICAgICAgLy8gaW50ZW5kaW5nIHRvIHNjcm9sbCB1cCBidXQgYWJvdXQgdG8gZ28gZG93blxuXG4gICAgICAgICAgICAgICAgdiA9IGNyZWF0ZUluZmluaXRlU2VjdGlvbnModik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vcGF1c2luZyBtZWRpYSBvZiB0aGUgbGVhdmluZyBzZWN0aW9uIChpZiB3ZSBhcmUgbm90IGp1c3QgcmVzaXppbmcsIGFzIGRlc3RpbmF0aW5vIHdpbGwgYmUgdGhlIHNhbWUgb25lKVxuICAgICAgICAgICAgaWYgKCF2LmxvY2FsSXNSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHN0b3BNZWRpYSh2LmFjdGl2ZVNlY3Rpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zY3JvbGxPdmVyZmxvdykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2Nyb2xsT3ZlcmZsb3dIYW5kbGVyLmJlZm9yZUxlYXZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoQUNUSVZFKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKEFDVElWRSk7XG4gICAgICAgICAgICBsYXp5TG9hZChlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2Nyb2xsT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlci5vbkxlYXZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vcHJldmVudGluZyBmcm9tIGFjdGl2YXRpbmcgdGhlIE1vdXNlV2hlZWxIYW5kbGVyIGV2ZW50XG4gICAgICAgICAgICAvL21vcmUgdGhhbiBvbmNlIGlmIHRoZSBwYWdlIGlzIHNjcm9sbGluZ1xuICAgICAgICAgICAgY2FuU2Nyb2xsID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHNldFN0YXRlKHNsaWRlSW5kZXgsIHNsaWRlQW5jaG9yTGluaywgdi5hbmNob3JMaW5rLCB2LnNlY3Rpb25JbmRleCk7XG5cbiAgICAgICAgICAgIHBlcmZvcm1Nb3ZlbWVudCh2KTtcblxuICAgICAgICAgICAgLy9mbGFnIHRvIGF2b2lkIGNhbGxpbmduIGBzY3JvbGxQYWdlKClgIHR3aWNlIGluIGNhc2Ugb2YgdXNpbmcgYW5jaG9yIGxpbmtzXG4gICAgICAgICAgICBsYXN0U2Nyb2xsZWREZXN0aW55ID0gdi5hbmNob3JMaW5rO1xuXG4gICAgICAgICAgICAvL2F2b2lkIGZpcmluZyBpdCB0d2ljZSAoYXMgaXQgZG9lcyBhbHNvIG9uIHNjcm9sbClcbiAgICAgICAgICAgIGFjdGl2YXRlTWVudUFuZE5hdih2LmFuY2hvckxpbmssIHYuc2VjdGlvbkluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBlcmZvcm1zIHRoZSB2ZXJ0aWNhbCBtb3ZlbWVudCAoYnkgQ1NTMyBvciBieSBqUXVlcnkpXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHBlcmZvcm1Nb3ZlbWVudCh2KSB7XG4gICAgICAgICAgICAvLyB1c2luZyBDU1MzIHRyYW5zbGF0ZSBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jc3MzICYmIG9wdGlvbnMuYXV0b1Njcm9sbGluZyAmJiAhb3B0aW9ucy5zY3JvbGxCYXIpIHtcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBmaXJzdCBzZWN0aW9uIGNhbiBoYXZlIGEgbmVnYXRpdmUgdmFsdWUgaW4gaU9TIDEwLiBOb3QgcXVpdGUgc3VyZSB3aHk6IC0wLjAxNDI4MjIyNjU2MjVcbiAgICAgICAgICAgICAgICAvLyB0aGF0J3Mgd2h5IHdlIHJvdW5kIGl0IHRvIDAuXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZTNkID0gJ3RyYW5zbGF0ZTNkKDBweCwgLScgKyBNYXRoLnJvdW5kKHYuZHRvcCkgKyAncHgsIDBweCknO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUNvbnRhaW5lcih0cmFuc2xhdGUzZCwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAvL2V2ZW4gd2hlbiB0aGUgc2Nyb2xsaW5nU3BlZWQgaXMgMCB0aGVyZSdzIGEgbGl0dGxlIGRlbGF5LCB3aGljaCBtaWdodCBjYXVzZSB0aGVcbiAgICAgICAgICAgICAgICAvL3Njcm9sbGluZ1NwZWVkIHRvIGNoYW5nZSBpbiBjYXNlIG9mIHVzaW5nIHNpbGVudE1vdmVUbygpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbGluZ1NwZWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhZnRlclNlY3Rpb25Mb2Fkc0lkKTtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJTZWN0aW9uTG9hZHNJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJTZWN0aW9uTG9hZHModik7XG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyU2VjdGlvbkxvYWRzKHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdXNpbmcgalF1ZXJ5IGFuaW1hdGVcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsU2V0dGluZ3MgPSBnZXRTY3JvbGxTZXR0aW5ncyh2KTtcblxuICAgICAgICAgICAgICAgICAgICAkKHNjcm9sbFNldHRpbmdzLmVsZW1lbnQpLmFuaW1hdGUoc2Nyb2xsU2V0dGluZ3Mub3B0aW9ucywgb3B0aW9ucy5zY3JvbGxpbmdTcGVlZCwgb3B0aW9ucy5lYXNpbmcpLnByb21pc2UoKS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vb25seSBvbmUgc2luZ2xlIGNhbGxiYWNrIGluIGNhc2Ugb2YgYW5pbWF0aW5nICBgaHRtbCwgYm9keWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbEJhcikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSGFjayFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB0aW1lb3V0IHByZXZlbnRzIHNldHRpbmcgdGhlIG1vc3QgZG9taW5hbnQgc2VjdGlvbiBpbiB0aGUgdmlld3BvcnQgYXMgXCJhY3RpdmVcIiB3aGVuIHRoZSB1c2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxlZCB0byBhIHNtYWxsZXIgc2VjdGlvbiBieSB1c2luZyB0aGUgbW91c2V3aGVlbCAoYXV0byBzY3JvbGxpbmcpIHJhdGhlciB0aGFuIGRyYWdpbmcgdGhlIHNjcm9sbCBiYXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaGVuIHVzaW5nIHNjcm9sbEJhcjp0cnVlIEl0IHNlZW1zIGxpa2UgdGhlIHNjcm9sbCBldmVudHMgc3RpbGwgZ2V0dGluZyBwcm9wYWdhdGVkIGV2ZW4gYWZ0ZXIgdGhlIHNjcm9sbGluZyBhbmltYXRpb24gaGFzIGZpbmlzaGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJTZWN0aW9uTG9hZHModik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlclNlY3Rpb25Mb2Fkcyh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgc2Nyb2xsaW5nIHNldHRpbmdzIGRlcGVuZGluZyBvbiB0aGUgcGx1Z2luIGF1dG9TY3JvbGxpbmcgb3B0aW9uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFNjcm9sbFNldHRpbmdzKHYpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGwgPSB7fTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXV0b1Njcm9sbGluZyAmJiAhb3B0aW9ucy5zY3JvbGxCYXIpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGwub3B0aW9ucyA9IHsgJ3RvcCc6IC12LmR0b3AgfTtcbiAgICAgICAgICAgICAgICBzY3JvbGwuZWxlbWVudCA9IFdSQVBQRVJfU0VMO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY3JvbGwub3B0aW9ucyA9IHsgJ3Njcm9sbFRvcCc6IHYuZHRvcCB9O1xuICAgICAgICAgICAgICAgIHNjcm9sbC5lbGVtZW50ID0gJ2h0bWwsIGJvZHknO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyBzZWN0aW9ucyBiZWZvcmUgb3IgYWZ0ZXIgdGhlIGN1cnJlbnQgb25lIHRvIGNyZWF0ZSB0aGUgaW5maW5pdGUgZWZmZWN0LlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbmZpbml0ZVNlY3Rpb25zKHYpIHtcbiAgICAgICAgICAgIC8vIFNjcm9sbGluZyBkb3duXG4gICAgICAgICAgICBpZiAoIXYuaXNNb3ZlbWVudFVwKSB7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSBhbGwgcHJldmlvdXMgc2VjdGlvbnMgdG8gYWZ0ZXIgdGhlIGFjdGl2ZSBzZWN0aW9uXG4gICAgICAgICAgICAgICAgJChTRUNUSU9OX0FDVElWRV9TRUwpLmFmdGVyKHYuYWN0aXZlU2VjdGlvbi5wcmV2QWxsKFNFQ1RJT05fU0VMKS5nZXQoKS5yZXZlcnNlKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTY3JvbGxpbmcgdXBcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIGFsbCBuZXh0IHNlY3Rpb25zIHRvIGJlZm9yZSB0aGUgYWN0aXZlIHNlY3Rpb25cbiAgICAgICAgICAgICAgICAkKFNFQ1RJT05fQUNUSVZFX1NFTCkuYmVmb3JlKHYuYWN0aXZlU2VjdGlvbi5uZXh0QWxsKFNFQ1RJT05fU0VMKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1haW50YWluIHRoZSBkaXNwbGF5ZWQgcG9zaXRpb24gKG5vdyB0aGF0IHdlIGNoYW5nZWQgdGhlIGVsZW1lbnQgb3JkZXIpXG4gICAgICAgICAgICBzaWxlbnRTY3JvbGwoJChTRUNUSU9OX0FDVElWRV9TRUwpLnBvc2l0aW9uKCkudG9wKTtcblxuICAgICAgICAgICAgLy8gTWFpbnRhaW4gdGhlIGFjdGl2ZSBzbGlkZXMgdmlzaWJsZSBpbiB0aGUgdmlld3BvcnRcbiAgICAgICAgICAgIGtlZXBTbGlkZXNQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBzYXZlIGZvciBsYXRlciB0aGUgZWxlbWVudHMgdGhhdCBzdGlsbCBuZWVkIHRvIGJlIHJlb3JkZXJlZFxuICAgICAgICAgICAgdi53cmFwQXJvdW5kRWxlbWVudHMgPSB2LmFjdGl2ZVNlY3Rpb247XG5cbiAgICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIGFuaW1hdGlvbiB2YXJpYWJsZXNcbiAgICAgICAgICAgIHYuZHRvcCA9IHYuZWxlbWVudC5wb3NpdGlvbigpLnRvcDtcbiAgICAgICAgICAgIHYueU1vdmVtZW50ID0gZ2V0WW1vdmVtZW50KHYuZWxlbWVudCk7XG5cbiAgICAgICAgICAgIC8vc2VjdGlvbnMgd2lsbCB0ZW1wb3JhbGx5IGhhdmUgYW5vdGhlciBwb3NpdGlvbiBpbiB0aGUgRE9NXG4gICAgICAgICAgICAvL3VwZGF0aW5nIHRoaXMgdmFsdWVzIGluIGNhc2Ugd2UgbmVlZCB0aGVtXG4gICAgICAgICAgICB2LmxlYXZpbmdTZWN0aW9uID0gdi5hY3RpdmVTZWN0aW9uLmluZGV4KFNFQ1RJT05fU0VMKSArIDE7XG4gICAgICAgICAgICB2LnNlY3Rpb25JbmRleCA9IHYuZWxlbWVudC5pbmRleChTRUNUSU9OX1NFTCk7XG5cbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRml4IHNlY3Rpb24gb3JkZXIgYWZ0ZXIgY29udGludW91c1ZlcnRpY2FsIGNoYW5nZXMgaGF2ZSBiZWVuIGFuaW1hdGVkXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRpbnVvdXNWZXJ0aWNhbEZpeFNlY3Rpb25PcmRlcih2KSB7XG4gICAgICAgICAgICAvLyBJZiBjb250aW51b3VzVmVydGljYWwgaXMgaW4gZWZmZWN0IChhbmQgYXV0b1Njcm9sbGluZyB3b3VsZCBhbHNvIGJlIGluIGVmZmVjdCB0aGVuKSxcbiAgICAgICAgICAgIC8vIGZpbmlzaCBtb3ZpbmcgdGhlIGVsZW1lbnRzIGFyb3VuZCBzbyB0aGUgZGlyZWN0IG5hdmlnYXRpb24gd2lsbCBmdW5jdGlvbiBtb3JlIHNpbXBseVxuICAgICAgICAgICAgaWYgKCF2LndyYXBBcm91bmRFbGVtZW50cyB8fCAhdi53cmFwQXJvdW5kRWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodi5pc01vdmVtZW50VXApIHtcbiAgICAgICAgICAgICAgICAkKFNFQ1RJT05fRklSU1RfU0VMKS5iZWZvcmUodi53cmFwQXJvdW5kRWxlbWVudHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKFNFQ1RJT05fTEFTVF9TRUwpLmFmdGVyKHYud3JhcEFyb3VuZEVsZW1lbnRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2lsZW50U2Nyb2xsKCQoU0VDVElPTl9BQ1RJVkVfU0VMKS5wb3NpdGlvbigpLnRvcCk7XG5cbiAgICAgICAgICAgIC8vIE1haW50YWluIHRoZSBhY3RpdmUgc2xpZGVzIHZpc2libGUgaW4gdGhlIHZpZXdwb3J0XG4gICAgICAgICAgICBrZWVwU2xpZGVzUG9zaXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFjdGlvbnMgdG8gZG8gb25jZSB0aGUgc2VjdGlvbiBpcyBsb2FkZWQuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFmdGVyU2VjdGlvbkxvYWRzKHYpIHtcbiAgICAgICAgICAgIGNvbnRpbnVvdXNWZXJ0aWNhbEZpeFNlY3Rpb25PcmRlcih2KTtcblxuICAgICAgICAgICAgLy9jYWxsYmFjayAoYWZ0ZXJMb2FkKSBpZiB0aGUgc2l0ZSBpcyBub3QganVzdCByZXNpemluZyBhbmQgcmVhZGp1c3RpbmcgdGhlIHNsaWRlc1xuICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKG9wdGlvbnMuYWZ0ZXJMb2FkKSAmJiAhdi5sb2NhbElzUmVzaXppbmcgJiYgb3B0aW9ucy5hZnRlckxvYWQuY2FsbCh2LmVsZW1lbnQsIHYuYW5jaG9yTGluaywgdi5zZWN0aW9uSW5kZXggKyAxKTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2Nyb2xsT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlci5hZnRlckxvYWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF2LmxvY2FsSXNSZXNpemluZykge1xuICAgICAgICAgICAgICAgIHBsYXlNZWRpYSh2LmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2LmVsZW1lbnQuYWRkQ2xhc3MoQ09NUExFVEVMWSkuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhDT01QTEVURUxZKTtcblxuICAgICAgICAgICAgY2FuU2Nyb2xsID0gdHJ1ZTtcblxuICAgICAgICAgICAgJC5pc0Z1bmN0aW9uKHYuY2FsbGJhY2spICYmIHYuY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHMgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIGZyb20gdGhlIGBkYXRhLWAgYXR0cmlidXRlIHdpdGggdGhlIHNhbWUgc3VmZml4XHJcbiAgICAgICAgICogaWU6IGRhdGEtc3Jjc2V0ID09PiBzcmNzZXQgIHwgIGRhdGEtc3JjID09PiBzcmNcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0U3JjKGVsZW1lbnQsIGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgZWxlbWVudC5hdHRyKGF0dHJpYnV0ZSwgZWxlbWVudC5kYXRhKGF0dHJpYnV0ZSkpLnJlbW92ZUF0dHIoJ2RhdGEtJyArIGF0dHJpYnV0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMYXp5IGxvYWRzIGltYWdlLCB2aWRlbyBhbmQgYXVkaW8gZWxlbWVudHMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGxhenlMb2FkKGRlc3RpbnkpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5sYXp5TG9hZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhbmVsID0gZ2V0U2xpZGVPclNlY3Rpb24oZGVzdGlueSk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudDtcblxuICAgICAgICAgICAgcGFuZWwuZmluZCgnaW1nW2RhdGEtc3JjXSwgaW1nW2RhdGEtc3Jjc2V0XSwgc291cmNlW2RhdGEtc3JjXSwgdmlkZW9bZGF0YS1zcmNdLCBhdWRpb1tkYXRhLXNyY10sIGlmcmFtZVtkYXRhLXNyY10nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICQuZWFjaChbJ3NyYycsICdzcmNzZXQnXSwgZnVuY3Rpb24gKGluZGV4LCB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBlbGVtZW50LmF0dHIoJ2RhdGEtJyArIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgYXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTcmMoZWxlbWVudCwgdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmlzKCdzb3VyY2UnKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZVRvUGxheSA9IGVsZW1lbnQuY2xvc2VzdCgndmlkZW8nKS5sZW5ndGggPyAndmlkZW8nIDogJ2F1ZGlvJztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbG9zZXN0KHR5cGVUb1BsYXkpLmdldCgwKS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQbGF5cyB2aWRlbyBhbmQgYXVkaW8gZWxlbWVudHMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHBsYXlNZWRpYShkZXN0aW55KSB7XG4gICAgICAgICAgICB2YXIgcGFuZWwgPSBnZXRTbGlkZU9yU2VjdGlvbihkZXN0aW55KTtcblxuICAgICAgICAgICAgLy9wbGF5aW5nIEhUTUw1IG1lZGlhIGVsZW1lbnRzXG4gICAgICAgICAgICBwYW5lbC5maW5kKCd2aWRlbywgYXVkaW8nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcykuZ2V0KDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWF1dG9wbGF5JykgJiYgdHlwZW9mIGVsZW1lbnQucGxheSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy95b3V0dWJlIHZpZGVvc1xuICAgICAgICAgICAgcGFuZWwuZmluZCgnaWZyYW1lW3NyYyo9XCJ5b3V0dWJlLmNvbS9lbWJlZC9cIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcykuZ2V0KDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWF1dG9wbGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheVlvdXR1YmUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9pbiBjYXNlIHRoZSBVUkwgd2FzIG5vdCBsb2FkZWQgeWV0LiBPbiBwYWdlIGxvYWQgd2UgbmVlZCB0aW1lIGZvciB0aGUgbmV3IFVSTCAod2l0aCB0aGUgQVBJIHN0cmluZykgdG8gbG9hZC5cbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWF1dG9wbGF5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlZb3V0dWJlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUGxheXMgYSB5b3V0dWJlIHZpZGVvXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHBsYXlZb3V0dWJlKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgne1wiZXZlbnRcIjpcImNvbW1hbmRcIixcImZ1bmNcIjpcInBsYXlWaWRlb1wiLFwiYXJnc1wiOlwiXCJ9JywgJyonKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0b3BzIHZpZGVvIGFuZCBhdWRpbyBlbGVtZW50cy5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc3RvcE1lZGlhKGRlc3RpbnkpIHtcbiAgICAgICAgICAgIHZhciBwYW5lbCA9IGdldFNsaWRlT3JTZWN0aW9uKGRlc3RpbnkpO1xuXG4gICAgICAgICAgICAvL3N0b3BwaW5nIEhUTUw1IG1lZGlhIGVsZW1lbnRzXG4gICAgICAgICAgICBwYW5lbC5maW5kKCd2aWRlbywgYXVkaW8nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcykuZ2V0KDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rZWVwcGxheWluZycpICYmIHR5cGVvZiBlbGVtZW50LnBhdXNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy95b3V0dWJlIHZpZGVvc1xuICAgICAgICAgICAgcGFuZWwuZmluZCgnaWZyYW1lW3NyYyo9XCJ5b3V0dWJlLmNvbS9lbWJlZC9cIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcykuZ2V0KDApO1xuXG4gICAgICAgICAgICAgICAgaWYgKC95b3V0dWJlXFwuY29tXFwvZW1iZWRcXC8vLnRlc3QoJCh0aGlzKS5hdHRyKCdzcmMnKSkgJiYgIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWtlZXBwbGF5aW5nJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5nZXQoMCkuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgne1wiZXZlbnRcIjpcImNvbW1hbmRcIixcImZ1bmNcIjpcInBhdXNlVmlkZW9cIixcImFyZ3NcIjpcIlwifScsICcqJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBhY3RpdmUgc2xpZGUgKG9yIHNlY3Rpb24pIGZvciB0aGUgZ2l2ZW4gc2VjdGlvblxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRTbGlkZU9yU2VjdGlvbihkZXN0aW55KSB7XG4gICAgICAgICAgICB2YXIgc2xpZGUgPSBkZXN0aW55LmZpbmQoU0xJREVfQUNUSVZFX1NFTCk7XG4gICAgICAgICAgICBpZiAoc2xpZGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZGVzdGlueSA9ICQoc2xpZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZGVzdGlueTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbHMgdG8gdGhlIGFuY2hvciBpbiB0aGUgVVJMIHdoZW4gbG9hZGluZyB0aGUgc2l0ZVxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzY3JvbGxUb0FuY2hvcigpIHtcbiAgICAgICAgICAgIHZhciBhbmNob3JzID0gZ2V0QW5jaG9yc1VSTCgpO1xuICAgICAgICAgICAgdmFyIHNlY3Rpb25BbmNob3IgPSBhbmNob3JzLnNlY3Rpb247XG4gICAgICAgICAgICB2YXIgc2xpZGVBbmNob3IgPSBhbmNob3JzLnNsaWRlO1xuXG4gICAgICAgICAgICBpZiAoc2VjdGlvbkFuY2hvcikge1xuICAgICAgICAgICAgICAgIC8vaWYgdGhlcmVzIGFueSAjXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYW5pbWF0ZUFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQYWdlQW5kU2xpZGUoc2VjdGlvbkFuY2hvciwgc2xpZGVBbmNob3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbGVudE1vdmVUbyhzZWN0aW9uQW5jaG9yLCBzbGlkZUFuY2hvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZWN0aW5nIGFueSBjaGFuZ2Ugb24gdGhlIFVSTCB0byBzY3JvbGwgdG8gdGhlIGdpdmVuIGFuY2hvciBsaW5rXHJcbiAgICAgICAgICogKGEgd2F5IHRvIGRldGVjdCBiYWNrIGhpc3RvcnkgYnV0dG9uIGFzIHdlIHBsYXkgd2l0aCB0aGUgaGFzaGVzIG9uIHRoZSBVUkwpXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc2hDaGFuZ2VIYW5kbGVyKCkge1xuICAgICAgICAgICAgaWYgKCFpc1Njcm9sbGluZyAmJiAhb3B0aW9ucy5sb2NrQW5jaG9ycykge1xuICAgICAgICAgICAgICAgIHZhciBhbmNob3JzID0gZ2V0QW5jaG9yc1VSTCgpO1xuICAgICAgICAgICAgICAgIHZhciBzZWN0aW9uQW5jaG9yID0gYW5jaG9ycy5zZWN0aW9uO1xuICAgICAgICAgICAgICAgIHZhciBzbGlkZUFuY2hvciA9IGFuY2hvcnMuc2xpZGU7XG5cbiAgICAgICAgICAgICAgICAvL3doZW4gbW92aW5nIHRvIGEgc2xpZGUgaW4gdGhlIGZpcnN0IHNlY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lIChmaXJzdCB0aW1lIHRvIGFkZCBhbiBhbmNob3IgdG8gdGhlIFVSTClcbiAgICAgICAgICAgICAgICB2YXIgaXNGaXJzdFNsaWRlTW92ZSA9IHR5cGVvZiBsYXN0U2Nyb2xsZWREZXN0aW55ID09PSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgICAgICB2YXIgaXNGaXJzdFNjcm9sbE1vdmUgPSB0eXBlb2YgbGFzdFNjcm9sbGVkRGVzdGlueSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHNsaWRlQW5jaG9yID09PSAndW5kZWZpbmVkJyAmJiAhc2xpZGVNb3Zpbmc7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbkFuY2hvci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLyppbiBvcmRlciB0byBjYWxsIHNjcm9sbHBhZ2UoKSBvbmx5IG9uY2UgZm9yIGVhY2ggZGVzdGluYXRpb24gYXQgYSB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgSXQgaXMgY2FsbGVkIHR3aWNlIGZvciBlYWNoIHNjcm9sbCBvdGhlcndpc2UsIGFzIGluIGNhc2Ugb2YgdXNpbmcgYW5jaG9ybGlua3MgYGhhc2hDaGFuZ2VgXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQgaXMgZmlyZWQgb24gZXZlcnkgc2Nyb2xsIHRvby4qL1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbkFuY2hvciAmJiBzZWN0aW9uQW5jaG9yICE9PSBsYXN0U2Nyb2xsZWREZXN0aW55ICYmICFpc0ZpcnN0U2xpZGVNb3ZlIHx8IGlzRmlyc3RTY3JvbGxNb3ZlIHx8ICFzbGlkZU1vdmluZyAmJiBsYXN0U2Nyb2xsZWRTbGlkZSAhPSBzbGlkZUFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUGFnZUFuZFNsaWRlKHNlY3Rpb25BbmNob3IsIHNsaWRlQW5jaG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vZ2V0cyB0aGUgVVJMIGFuY2hvcnMgKHNlY3Rpb24gYW5kIHNsaWRlKVxuICAgICAgICBmdW5jdGlvbiBnZXRBbmNob3JzVVJMKCkge1xuICAgICAgICAgICAgLy9nZXR0aW5nIHRoZSBhbmNob3IgbGluayBpbiB0aGUgVVJMIGFuZCBkZWxldGluZyB0aGUgYCNgXG4gICAgICAgICAgICB2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuICAgICAgICAgICAgdmFyIGFuY2hvcnNQYXJ0cyA9IGhhc2gucmVwbGFjZSgnIycsICcnKS5zcGxpdCgnLycpO1xuXG4gICAgICAgICAgICAvL3VzaW5nIC8gZm9yIHZpc3VhbCByZWFzb25zIGFuZCBub3QgYXMgYSBzZWN0aW9uL3NsaWRlIHNlcGFyYXRvciAjMjgwM1xuICAgICAgICAgICAgdmFyIGlzRnVua3lBbmNob3IgPSBoYXNoLmluZGV4T2YoJyMvJykgPiAtMTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uOiBpc0Z1bmt5QW5jaG9yID8gJy8nICsgYW5jaG9yc1BhcnRzWzFdIDogZGVjb2RlVVJJQ29tcG9uZW50KGFuY2hvcnNQYXJ0c1swXSksXG4gICAgICAgICAgICAgICAgc2xpZGU6IGlzRnVua3lBbmNob3IgPyBkZWNvZGVVUklDb21wb25lbnQoYW5jaG9yc1BhcnRzWzJdKSA6IGRlY29kZVVSSUNvbXBvbmVudChhbmNob3JzUGFydHNbMV0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy9TbGlkaW5nIHdpdGggYXJyb3cga2V5cywgYm90aCwgdmVydGljYWwgYW5kIGhvcml6b250YWxcbiAgICAgICAgZnVuY3Rpb24ga2V5ZG93bkhhbmRsZXIoZSkge1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoa2V5ZG93bklkKTtcblxuICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkKCc6Zm9jdXMnKTtcblxuICAgICAgICAgICAgaWYgKCFhY3RpdmVFbGVtZW50LmlzKCd0ZXh0YXJlYScpICYmICFhY3RpdmVFbGVtZW50LmlzKCdpbnB1dCcpICYmICFhY3RpdmVFbGVtZW50LmlzKCdzZWxlY3QnKSAmJiBhY3RpdmVFbGVtZW50LmF0dHIoJ2NvbnRlbnRFZGl0YWJsZScpICE9PSBcInRydWVcIiAmJiBhY3RpdmVFbGVtZW50LmF0dHIoJ2NvbnRlbnRFZGl0YWJsZScpICE9PSAnJyAmJiBvcHRpb25zLmtleWJvYXJkU2Nyb2xsaW5nICYmIG9wdGlvbnMuYXV0b1Njcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZS53aGljaDtcblxuICAgICAgICAgICAgICAgIC8vcHJldmVudGluZyB0aGUgc2Nyb2xsIHdpdGggYXJyb3cga2V5cyAmIHNwYWNlYmFyICYgUGFnZSBVcCAmIERvd24ga2V5c1xuICAgICAgICAgICAgICAgIHZhciBrZXlDb250cm9scyA9IFs0MCwgMzgsIDMyLCAzMywgMzRdO1xuICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkoa2V5Q29kZSwga2V5Q29udHJvbHMpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRyb2xQcmVzc2VkID0gZS5jdHJsS2V5O1xuXG4gICAgICAgICAgICAgICAga2V5ZG93bklkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ua2V5ZG93bihlKTtcbiAgICAgICAgICAgICAgICB9LCAxNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9vbHRpcFRleHRIYW5kbGVyKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5wcmV2KCkudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdG8gcHJldmVudCBzY3JvbGxpbmcgd2hpbGUgem9vbWluZ1xuICAgICAgICBmdW5jdGlvbiBrZXlVcEhhbmRsZXIoZSkge1xuICAgICAgICAgICAgaWYgKGlzV2luZG93Rm9jdXNlZCkge1xuICAgICAgICAgICAgICAgIC8vdGhlIGtleXVwIGdldHMgZmlyZWQgb24gbmV3IHRhYiBjdHJsICsgdCBpbiBGaXJlZm94XG4gICAgICAgICAgICAgICAgY29udHJvbFByZXNzZWQgPSBlLmN0cmxLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2JpbmRpbmcgdGhlIG1vdXNlbW92ZSB3aGVuIHRoZSBtb3VzZSdzIG1pZGRsZSBidXR0b24gaXMgcmVsZWFzZWRcbiAgICAgICAgZnVuY3Rpb24gbW91c2VEb3duSGFuZGxlcihlKSB7XG4gICAgICAgICAgICAvL21pZGRsZSBidXR0b25cbiAgICAgICAgICAgIGlmIChlLndoaWNoID09IDIpIHtcbiAgICAgICAgICAgICAgICBvbGRQYWdlWSA9IGUucGFnZVk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLm9uKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vdW5iaW5kaW5nIHRoZSBtb3VzZW1vdmUgd2hlbiB0aGUgbW91c2UncyBtaWRkbGUgYnV0dG9uIGlzIHJlbGVhc2VkXG4gICAgICAgIGZ1bmN0aW9uIG1vdXNlVXBIYW5kbGVyKGUpIHtcbiAgICAgICAgICAgIC8vbWlkZGxlIGJ1dHRvblxuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMikge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vZmYoJ21vdXNlbW92ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9TY3JvbGxpbmcgaG9yaXpvbnRhbGx5IHdoZW4gY2xpY2tpbmcgb24gdGhlIHNsaWRlciBjb250cm9scy5cbiAgICAgICAgZnVuY3Rpb24gc2xpZGVBcnJvd0hhbmRsZXIoKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9ICQodGhpcykuY2xvc2VzdChTRUNUSU9OX1NFTCk7XG5cbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFNMSURFU19QUkVWKSkge1xuICAgICAgICAgICAgICAgIGlmIChpc1Njcm9sbEFsbG93ZWQubS5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVTbGlkZUxlZnQoc2VjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxBbGxvd2VkLm0ucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVNsaWRlUmlnaHQoc2VjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy93aGVuIG9wZW5pbmcgYSBuZXcgdGFiIChjdHJsICsgdCksIGBjb250cm9sYCB3b24ndCBiZSBwcmVzc2VkIHdoZW4gY29taW5nIGJhY2suXG4gICAgICAgIGZ1bmN0aW9uIGJsdXJIYW5kbGVyKCkge1xuICAgICAgICAgICAgaXNXaW5kb3dGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgICAgICBjb250cm9sUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9TY3JvbGxzIHRvIHRoZSBzZWN0aW9uIHdoZW4gY2xpY2tpbmcgdGhlIG5hdmlnYXRpb24gYnVsbGV0XG4gICAgICAgIGZ1bmN0aW9uIHNlY3Rpb25CdWxsZXRIYW5kbGVyKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICQodGhpcykucGFyZW50KCkuaW5kZXgoKTtcbiAgICAgICAgICAgIHNjcm9sbFBhZ2UoJChTRUNUSU9OX1NFTCkuZXEoaW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vU2Nyb2xscyB0aGUgc2xpZGVyIHRvIHRoZSBnaXZlbiBzbGlkZSBkZXN0aW5hdGlvbiBmb3IgdGhlIGdpdmVuIHNlY3Rpb25cbiAgICAgICAgZnVuY3Rpb24gc2xpZGVCdWxsZXRIYW5kbGVyKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBzbGlkZXMgPSAkKHRoaXMpLmNsb3Nlc3QoU0VDVElPTl9TRUwpLmZpbmQoU0xJREVTX1dSQVBQRVJfU0VMKTtcbiAgICAgICAgICAgIHZhciBkZXN0aW55ID0gc2xpZGVzLmZpbmQoU0xJREVfU0VMKS5lcSgkKHRoaXMpLmNsb3Nlc3QoJ2xpJykuaW5kZXgoKSk7XG5cbiAgICAgICAgICAgIGxhbmRzY2FwZVNjcm9sbChzbGlkZXMsIGRlc3RpbnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogS2V5ZG93biBldmVudFxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBvbmtleWRvd24oZSkge1xuICAgICAgICAgICAgdmFyIHNoaWZ0UHJlc3NlZCA9IGUuc2hpZnRLZXk7XG5cbiAgICAgICAgICAgIC8vZG8gbm90aGluZyBpZiB3ZSBjYW4gbm90IHNjcm9sbCBvciB3ZSBhcmUgbm90IHVzaW5nIGhvcml6b3RuYWwga2V5IGFycm93cy5cbiAgICAgICAgICAgIGlmICghY2FuU2Nyb2xsICYmIFszNywgMzldLmluZGV4T2YoZS53aGljaCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKGUud2hpY2gpIHtcbiAgICAgICAgICAgICAgICAvL3VwXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxBbGxvd2VkLmsudXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVTZWN0aW9uVXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vZG93blxuICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgIC8vc3BhY2ViYXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaWZ0UHJlc3NlZCAmJiBpc1Njcm9sbEFsbG93ZWQuay51cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVNlY3Rpb25VcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICBjYXNlIDM0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxBbGxvd2VkLmsuZG93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVNlY3Rpb25Eb3duKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAvL0hvbWVcbiAgICAgICAgICAgICAgICBjYXNlIDM2OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxBbGxvd2VkLmsudXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUbygxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vRW5kXG4gICAgICAgICAgICAgICAgY2FzZSAzNTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2Nyb2xsQWxsb3dlZC5rLmRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUbygkKFNFQ1RJT05fU0VMKS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgLy9sZWZ0XG4gICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2Nyb2xsQWxsb3dlZC5rLmxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVTbGlkZUxlZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vcmlnaHRcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTY3JvbGxBbGxvd2VkLmsucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVTbGlkZVJpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIGV4aXQgdGhpcyBoYW5kbGVyIGZvciBvdGhlciBrZXlzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlY3RpbmcgdGhlIGRpcmVjdGlvbiBvZiB0aGUgbW91c2UgbW92ZW1lbnQuXHJcbiAgICAgICAgICogVXNlZCBvbmx5IGZvciB0aGUgbWlkZGxlIGJ1dHRvbiBvZiB0aGUgbW91c2UuXHJcbiAgICAgICAgICovXG4gICAgICAgIHZhciBvbGRQYWdlWSA9IDA7XG4gICAgICAgIGZ1bmN0aW9uIG1vdXNlTW92ZUhhbmRsZXIoZSkge1xuICAgICAgICAgICAgaWYgKGNhblNjcm9sbCkge1xuICAgICAgICAgICAgICAgIC8vIG1vdmluZyB1cFxuICAgICAgICAgICAgICAgIGlmIChlLnBhZ2VZIDwgb2xkUGFnZVkgJiYgaXNTY3JvbGxBbGxvd2VkLm0udXApIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVNlY3Rpb25VcCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIG1vdmluZyBkb3duXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5wYWdlWSA+IG9sZFBhZ2VZICYmIGlzU2Nyb2xsQWxsb3dlZC5tLmRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVTZWN0aW9uRG93bigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbGRQYWdlWSA9IGUucGFnZVk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxzIGhvcml6b250YWwgc2xpZGVycy5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbGFuZHNjYXBlU2Nyb2xsKHNsaWRlcywgZGVzdGlueSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9IHNsaWRlcy5jbG9zZXN0KFNFQ1RJT05fU0VMKTtcbiAgICAgICAgICAgIHZhciB2ID0ge1xuICAgICAgICAgICAgICAgIHNsaWRlczogc2xpZGVzLFxuICAgICAgICAgICAgICAgIGRlc3Rpbnk6IGRlc3RpbnksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgZGVzdGlueVBvczogZGVzdGlueS5wb3NpdGlvbigpLFxuICAgICAgICAgICAgICAgIHNsaWRlSW5kZXg6IGRlc3RpbnkuaW5kZXgoKSxcbiAgICAgICAgICAgICAgICBzZWN0aW9uOiBzZWN0aW9uLFxuICAgICAgICAgICAgICAgIHNlY3Rpb25JbmRleDogc2VjdGlvbi5pbmRleChTRUNUSU9OX1NFTCksXG4gICAgICAgICAgICAgICAgYW5jaG9yTGluazogc2VjdGlvbi5kYXRhKCdhbmNob3InKSxcbiAgICAgICAgICAgICAgICBzbGlkZXNOYXY6IHNlY3Rpb24uZmluZChTTElERVNfTkFWX1NFTCksXG4gICAgICAgICAgICAgICAgc2xpZGVBbmNob3I6IGdldEFuY2hvcihkZXN0aW55KSxcbiAgICAgICAgICAgICAgICBwcmV2U2xpZGU6IHNlY3Rpb24uZmluZChTTElERV9BQ1RJVkVfU0VMKSxcbiAgICAgICAgICAgICAgICBwcmV2U2xpZGVJbmRleDogc2VjdGlvbi5maW5kKFNMSURFX0FDVElWRV9TRUwpLmluZGV4KCksXG5cbiAgICAgICAgICAgICAgICAvL2NhY2hpbmcgdGhlIHZhbHVlIG9mIGlzUmVzaXppbmcgYXQgdGhlIG1vbW1lbnQgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICAgICAgICAgICAgICAgIC8vYmVjYXVzZSBpdCB3aWxsIGJlIGNoZWNrZWQgbGF0ZXIgaW5zaWRlIGEgc2V0VGltZW91dCBhbmQgdGhlIHZhbHVlIG1pZ2h0IGNoYW5nZVxuICAgICAgICAgICAgICAgIGxvY2FsSXNSZXNpemluZzogaXNSZXNpemluZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHYueE1vdmVtZW50ID0gZ2V0WG1vdmVtZW50KHYucHJldlNsaWRlSW5kZXgsIHYuc2xpZGVJbmRleCk7XG5cbiAgICAgICAgICAgIC8vaW1wb3J0YW50ISEgT25seSBkbyBpdCB3aGVuIG5vdCByZXNpemluZ1xuICAgICAgICAgICAgaWYgKCF2LmxvY2FsSXNSZXNpemluZykge1xuICAgICAgICAgICAgICAgIC8vcHJldmVudGluZyBmcm9tIHNjcm9sbGluZyB0byB0aGUgbmV4dC9wcmV2IHNlY3Rpb24gd2hlbiB1c2luZyBzY3JvbGxIb3Jpem9udGFsbHlcbiAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub25TbGlkZUxlYXZlKSB7XG5cbiAgICAgICAgICAgICAgICAvL2lmIHRoZSBzaXRlIGlzIG5vdCBqdXN0IHJlc2l6aW5nIGFuZCByZWFkanVzdGluZyB0aGUgc2xpZGVzXG4gICAgICAgICAgICAgICAgaWYgKCF2LmxvY2FsSXNSZXNpemluZyAmJiB2LnhNb3ZlbWVudCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ob3B0aW9ucy5vblNsaWRlTGVhdmUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vblNsaWRlTGVhdmUuY2FsbCh2LnByZXZTbGlkZSwgdi5hbmNob3JMaW5rLCB2LnNlY3Rpb25JbmRleCArIDEsIHYucHJldlNsaWRlSW5kZXgsIHYuZGlyZWN0aW9uLCB2LnNsaWRlSW5kZXgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTW92aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkZXN0aW55LmFkZENsYXNzKEFDVElWRSkuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhBQ1RJVkUpO1xuXG4gICAgICAgICAgICBpZiAoIXYubG9jYWxJc1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgc3RvcE1lZGlhKHYucHJldlNsaWRlKTtcbiAgICAgICAgICAgICAgICBsYXp5TG9hZChkZXN0aW55KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmxvb3BIb3Jpem9udGFsICYmIG9wdGlvbnMuY29udHJvbEFycm93cykge1xuICAgICAgICAgICAgICAgIC8vaGlkZGluZyBpdCBmb3IgdGhlIGZpc3Qgc2xpZGUsIHNob3dpbmcgZm9yIHRoZSByZXN0XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5maW5kKFNMSURFU19BUlJPV19QUkVWX1NFTCkudG9nZ2xlKHYuc2xpZGVJbmRleCAhPT0gMCk7XG5cbiAgICAgICAgICAgICAgICAvL2hpZGRpbmcgaXQgZm9yIHRoZSBsYXN0IHNsaWRlLCBzaG93aW5nIGZvciB0aGUgcmVzdFxuICAgICAgICAgICAgICAgIHNlY3Rpb24uZmluZChTTElERVNfQVJST1dfTkVYVF9TRUwpLnRvZ2dsZSghZGVzdGlueS5pcygnOmxhc3QtY2hpbGQnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vb25seSBjaGFuZ2luZyB0aGUgVVJMIGlmIHRoZSBzbGlkZXMgYXJlIGluIHRoZSBjdXJyZW50IHNlY3Rpb24gKG5vdCBmb3IgcmVzaXplIHJlLWFkanVzdGluZylcbiAgICAgICAgICAgIGlmIChzZWN0aW9uLmhhc0NsYXNzKEFDVElWRSkgJiYgIXYubG9jYWxJc1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUodi5zbGlkZUluZGV4LCB2LnNsaWRlQW5jaG9yLCB2LmFuY2hvckxpbmssIHYuc2VjdGlvbkluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGVyZm9ybUhvcml6b250YWxNb3ZlKHNsaWRlcywgdiwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZnRlclNsaWRlTG9hZHModikge1xuICAgICAgICAgICAgYWN0aXZlU2xpZGVzTmF2aWdhdGlvbih2LnNsaWRlc05hdiwgdi5zbGlkZUluZGV4KTtcblxuICAgICAgICAgICAgLy9pZiB0aGUgc2l0ZSBpcyBub3QganVzdCByZXNpemluZyBhbmQgcmVhZGp1c3RpbmcgdGhlIHNsaWRlc1xuICAgICAgICAgICAgaWYgKCF2LmxvY2FsSXNSZXNpemluZykge1xuICAgICAgICAgICAgICAgICQuaXNGdW5jdGlvbihvcHRpb25zLmFmdGVyU2xpZGVMb2FkKSAmJiBvcHRpb25zLmFmdGVyU2xpZGVMb2FkLmNhbGwodi5kZXN0aW55LCB2LmFuY2hvckxpbmssIHYuc2VjdGlvbkluZGV4ICsgMSwgdi5zbGlkZUFuY2hvciwgdi5zbGlkZUluZGV4KTtcblxuICAgICAgICAgICAgICAgIC8vbmVlZHMgdG8gYmUgaW5zaWRlIHRoZSBjb25kaXRpb24gdG8gcHJldmVudCBwcm9ibGVtcyB3aXRoIGNvbnRpbnVvdXNWZXJ0aWNhbCBhbmQgc2Nyb2xsSG9yaXpvbnRhbGx5XG4gICAgICAgICAgICAgICAgLy9hbmQgdG8gcHJldmVudCBkb3VibGUgc2Nyb2xsIHJpZ2h0IGFmdGVyIGEgd2luZG93cyByZXNpemVcbiAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgcGxheU1lZGlhKHYuZGVzdGlueSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbGV0dGluZyB0aGVtIHNsaWRlIGFnYWluXG4gICAgICAgICAgICBzbGlkZU1vdmluZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUGVyZm9ybXMgdGhlIGhvcml6b250YWwgbW92ZW1lbnQuIChDU1MzIG9yIGpRdWVyeSlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmaXJlQ2FsbGJhY2sge0Jvb2x9IC0gZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byBmaXJlIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBwZXJmb3JtSG9yaXpvbnRhbE1vdmUoc2xpZGVzLCB2LCBmaXJlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBkZXN0aW55UG9zID0gdi5kZXN0aW55UG9zO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jc3MzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZTNkID0gJ3RyYW5zbGF0ZTNkKC0nICsgTWF0aC5yb3VuZChkZXN0aW55UG9zLmxlZnQpICsgJ3B4LCAwcHgsIDBweCknO1xuXG4gICAgICAgICAgICAgICAgYWRkQW5pbWF0aW9uKHNsaWRlcy5maW5kKFNMSURFU19DT05UQUlORVJfU0VMKSkuY3NzKGdldFRyYW5zZm9ybXModHJhbnNsYXRlM2QpKTtcblxuICAgICAgICAgICAgICAgIGFmdGVyU2xpZGVMb2Fkc0lkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcmVDYWxsYmFjayAmJiBhZnRlclNsaWRlTG9hZHModik7XG4gICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5zY3JvbGxpbmdTcGVlZCwgb3B0aW9ucy5lYXNpbmcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzbGlkZXMuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbExlZnQ6IE1hdGgucm91bmQoZGVzdGlueVBvcy5sZWZ0KVxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQsIG9wdGlvbnMuZWFzaW5nLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZmlyZUNhbGxiYWNrICYmIGFmdGVyU2xpZGVMb2Fkcyh2KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHMgdGhlIHN0YXRlIGZvciB0aGUgaG9yaXpvbnRhbCBidWxsZXQgbmF2aWdhdGlvbnMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2ZVNsaWRlc05hdmlnYXRpb24oc2xpZGVzTmF2LCBzbGlkZUluZGV4KSB7XG4gICAgICAgICAgICBzbGlkZXNOYXYuZmluZChBQ1RJVkVfU0VMKS5yZW1vdmVDbGFzcyhBQ1RJVkUpO1xuICAgICAgICAgICAgc2xpZGVzTmF2LmZpbmQoJ2xpJykuZXEoc2xpZGVJbmRleCkuZmluZCgnYScpLmFkZENsYXNzKEFDVElWRSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJldmlvdXNIZWlnaHQgPSB3aW5kb3dzSGVpZ2h0O1xuXG4gICAgICAgIC8vd2hlbiByZXNpemluZyB0aGUgc2l0ZSwgd2UgYWRqdXN0IHRoZSBoZWlnaHRzIG9mIHRoZSBzZWN0aW9ucywgc2xpbVNjcm9sbC4uLlxuICAgICAgICBmdW5jdGlvbiByZXNpemVIYW5kbGVyKCkge1xuICAgICAgICAgICAgLy9jaGVja2luZyBpZiBpdCBuZWVkcyB0byBnZXQgcmVzcG9uc2l2ZVxuICAgICAgICAgICAgcmVzcG9uc2l2ZSgpO1xuXG4gICAgICAgICAgICAvLyByZWJ1aWxkIGltbWVkaWF0ZWx5IG9uIHRvdWNoIGRldmljZXNcbiAgICAgICAgICAgIGlmIChpc1RvdWNoRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSAkKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgLy9pZiB0aGUga2V5Ym9hcmQgaXMgTk9UIHZpc2libGVcbiAgICAgICAgICAgICAgICBpZiAoIWFjdGl2ZUVsZW1lbnQuaXMoJ3RleHRhcmVhJykgJiYgIWFjdGl2ZUVsZW1lbnQuaXMoJ2lucHV0JykgJiYgIWFjdGl2ZUVsZW1lbnQuaXMoJ3NlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAvL21ha2luZyBzdXJlIHRoZSBjaGFuZ2UgaW4gdGhlIHZpZXdwb3J0IHNpemUgaXMgZW5vdWdoIHRvIGZvcmNlIGEgcmVidWlsZC4gKDIwICUgb2YgdGhlIHdpbmRvdyB0byBhdm9pZCBwcm9ibGVtcyB3aGVuIGhpZGRpbmcgc2Nyb2xsIGJhcnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50SGVpZ2h0IC0gcHJldmlvdXNIZWlnaHQpID4gMjAgKiBNYXRoLm1heChwcmV2aW91c0hlaWdodCwgY3VycmVudEhlaWdodCkgLyAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlQnVpbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0hlaWdodCA9IGN1cnJlbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vaW4gb3JkZXIgdG8gY2FsbCB0aGUgZnVuY3Rpb25zIG9ubHkgd2hlbiB0aGUgcmVzaXplIGlzIGZpbmlzaGVkXG4gICAgICAgICAgICAgICAgLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQyOTg2MTIvanF1ZXJ5LWhvdy10by1jYWxsLXJlc2l6ZS1ldmVudC1vbmx5LW9uY2UtaXRzLWZpbmlzaGVkLXJlc2l6aW5nXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc2l6ZUlkKTtcblxuICAgICAgICAgICAgICAgIHJlc2l6ZUlkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlQnVpbGQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgMzUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgc2l0ZSBuZWVkcyB0byBnZXQgcmVzcG9uc2l2ZSBhbmQgZGlzYWJsZXMgYXV0b1Njcm9sbGluZyBpZiBzby5cclxuICAgICAgICAgKiBBIGNsYXNzIGBmcC1yZXNwb25zaXZlYCBpcyBhZGRlZCB0byB0aGUgcGx1Z2luJ3MgY29udGFpbmVyIGluIGNhc2UgdGhlIHVzZXIgd2FudHMgdG8gdXNlIGl0IGZvciBoaXMgb3duIHJlc3BvbnNpdmUgQ1NTLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByZXNwb25zaXZlKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoTGltaXQgPSBvcHRpb25zLnJlc3BvbnNpdmUgfHwgb3B0aW9ucy5yZXNwb25zaXZlV2lkdGg7IC8vYmFja3dhcmRzIGNvbXBhdGlibGl0eVxuICAgICAgICAgICAgdmFyIGhlaWdodExpbWl0ID0gb3B0aW9ucy5yZXNwb25zaXZlSGVpZ2h0O1xuXG4gICAgICAgICAgICAvL29ubHkgY2FsY3VsYXRpbmcgd2hhdCB3ZSBuZWVkLiBSZW1lbWJlciBpdHMgY2FsbGVkIG9uIHRoZSByZXNpemUgZXZlbnQuXG4gICAgICAgICAgICB2YXIgaXNCcmVha2luZ1BvaW50V2lkdGggPSB3aWR0aExpbWl0ICYmICR3aW5kb3cub3V0ZXJXaWR0aCgpIDwgd2lkdGhMaW1pdDtcbiAgICAgICAgICAgIHZhciBpc0JyZWFraW5nUG9pbnRIZWlnaHQgPSBoZWlnaHRMaW1pdCAmJiAkd2luZG93LmhlaWdodCgpIDwgaGVpZ2h0TGltaXQ7XG5cbiAgICAgICAgICAgIGlmICh3aWR0aExpbWl0ICYmIGhlaWdodExpbWl0KSB7XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2l2ZShpc0JyZWFraW5nUG9pbnRXaWR0aCB8fCBpc0JyZWFraW5nUG9pbnRIZWlnaHQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aWR0aExpbWl0KSB7XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2l2ZShpc0JyZWFraW5nUG9pbnRXaWR0aCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhlaWdodExpbWl0KSB7XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2l2ZShpc0JyZWFraW5nUG9pbnRIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgZm9yIHRoZSBnaXZlbiBlbGVtZW50XHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFuaW1hdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9ICdhbGwgJyArIG9wdGlvbnMuc2Nyb2xsaW5nU3BlZWQgKyAnbXMgJyArIG9wdGlvbnMuZWFzaW5nY3NzMztcblxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhOT19UUkFOU0lUSU9OKTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbic6IHRyYW5zaXRpb24sXG4gICAgICAgICAgICAgICAgJ3RyYW5zaXRpb24nOiB0cmFuc2l0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgZm9yIHRoZSBnaXZlbiBlbGVtZW50XHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUFuaW1hdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5hZGRDbGFzcyhOT19UUkFOU0lUSU9OKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFjdGl2YXRpbmcgdGhlIHZlcnRpY2FsIG5hdmlnYXRpb24gYnVsbGV0cyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHNsaWRlIG5hbWUuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlTmF2RG90cyhuYW1lLCBzZWN0aW9uSW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm5hdmlnYXRpb24pIHtcbiAgICAgICAgICAgICAgICAkKFNFQ1RJT05fTkFWX1NFTCkuZmluZChBQ1RJVkVfU0VMKS5yZW1vdmVDbGFzcyhBQ1RJVkUpO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICQoU0VDVElPTl9OQVZfU0VMKS5maW5kKCdhW2hyZWY9XCIjJyArIG5hbWUgKyAnXCJdJykuYWRkQ2xhc3MoQUNUSVZFKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKFNFQ1RJT05fTkFWX1NFTCkuZmluZCgnbGknKS5lcShzZWN0aW9uSW5kZXgpLmZpbmQoJ2EnKS5hZGRDbGFzcyhBQ1RJVkUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFjdGl2YXRpbmcgdGhlIHdlYnNpdGUgbWFpbiBtZW51IGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gc2xpZGUgbmFtZS5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGVNZW51RWxlbWVudChuYW1lKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tZW51KSB7XG4gICAgICAgICAgICAgICAgJChvcHRpb25zLm1lbnUpLmZpbmQoQUNUSVZFX1NFTCkucmVtb3ZlQ2xhc3MoQUNUSVZFKTtcbiAgICAgICAgICAgICAgICAkKG9wdGlvbnMubWVudSkuZmluZCgnW2RhdGEtbWVudWFuY2hvcj1cIicgKyBuYW1lICsgJ1wiXScpLmFkZENsYXNzKEFDVElWRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIHRvIGFjdGl2ZSB0aGUgY3VycmVudCBtZW51IGFuZCB2ZXJ0aWNhbCBuYXYgaXRlbXMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlTWVudUFuZE5hdihhbmNob3IsIGluZGV4KSB7XG4gICAgICAgICAgICBhY3RpdmF0ZU1lbnVFbGVtZW50KGFuY2hvcik7XG4gICAgICAgICAgICBhY3RpdmF0ZU5hdkRvdHMoYW5jaG9yLCBpbmRleCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1bnMgYHVwYCBvciBgZG93bmAgZGVwZW5kaW5nIG9uIHRoZSBzY3JvbGxpbmcgbW92ZW1lbnQgdG8gcmVhY2ggaXRzIGRlc3RpbmF0aW9uXHJcbiAgICAgICAgICogZnJvbSB0aGUgY3VycmVudCBzZWN0aW9uLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRZbW92ZW1lbnQoZGVzdGlueSkge1xuICAgICAgICAgICAgdmFyIGZyb21JbmRleCA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKS5pbmRleChTRUNUSU9OX1NFTCk7XG4gICAgICAgICAgICB2YXIgdG9JbmRleCA9IGRlc3RpbnkuaW5kZXgoU0VDVElPTl9TRUwpO1xuICAgICAgICAgICAgaWYgKGZyb21JbmRleCA9PSB0b0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICd1cCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ2Rvd24nO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dW5zIGByaWdodGAgb3IgYGxlZnRgIGRlcGVuZGluZyBvbiB0aGUgc2Nyb2xsaW5nIG1vdmVtZW50IHRvIHJlYWNoIGl0cyBkZXN0aW5hdGlvblxyXG4gICAgICAgICAqIGZyb20gdGhlIGN1cnJlbnQgc2xpZGUuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFhtb3ZlbWVudChmcm9tSW5kZXgsIHRvSW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChmcm9tSW5kZXggPT0gdG9JbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZnJvbUluZGV4ID4gdG9JbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRhYmxlQ2xhc3MoZWxlbWVudCkge1xuICAgICAgICAgICAgLy9JbiBjYXNlIHdlIGFyZSBzdHlsaW5nIGZvciB0aGUgMm5kIHRpbWUgYXMgaW4gd2l0aCByZXBvbnNpdmVTbGlkZXNcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5oYXNDbGFzcyhUQUJMRSkpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKFRBQkxFKS53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCInICsgVEFCTEVfQ0VMTCArICdcIiBzdHlsZT1cImhlaWdodDonICsgZ2V0VGFibGVIZWlnaHQoZWxlbWVudCkgKyAncHg7XCIgLz4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRhYmxlSGVpZ2h0KGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uSGVpZ2h0ID0gd2luZG93c0hlaWdodDtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFkZGluZ1RvcCB8fCBvcHRpb25zLnBhZGRpbmdCb3R0b20pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VjdGlvbiA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWN0aW9uLmhhc0NsYXNzKFNFQ1RJT04pKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24gPSBlbGVtZW50LmNsb3Nlc3QoU0VDVElPTl9TRUwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5ncyA9IHBhcnNlSW50KHNlY3Rpb24uY3NzKCdwYWRkaW5nLXRvcCcpKSArIHBhcnNlSW50KHNlY3Rpb24uY3NzKCdwYWRkaW5nLWJvdHRvbScpKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9uSGVpZ2h0ID0gd2luZG93c0hlaWdodCAtIHBhZGRpbmdzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2VjdGlvbkhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgYSBjc3MzIHRyYW5zZm9ybSBwcm9wZXJ0eSB0byB0aGUgY29udGFpbmVyIGNsYXNzIHdpdGggb3Igd2l0aG91dCBhbmltYXRpb24gZGVwZW5kaW5nIG9uIHRoZSBhbmltYXRlZCBwYXJhbS5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtQ29udGFpbmVyKHRyYW5zbGF0ZTNkLCBhbmltYXRlZCkge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgYWRkQW5pbWF0aW9uKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUFuaW1hdGlvbihjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250YWluZXIuY3NzKGdldFRyYW5zZm9ybXModHJhbnNsYXRlM2QpKTtcblxuICAgICAgICAgICAgLy9zeW5jcm9ub3VzbHkgcmVtb3ZpbmcgdGhlIGNsYXNzIGFmdGVyIHRoZSBhbmltYXRpb24gaGFzIGJlZW4gYXBwbGllZC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhOT19UUkFOU0lUSU9OKTtcbiAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgYSBzZWN0aW9uIGJ5IGl0cyBhbmNob3IgLyBpbmRleFxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRTZWN0aW9uQnlBbmNob3Ioc2VjdGlvbkFuY2hvcikge1xuICAgICAgICAgICAgaWYgKCFzZWN0aW9uQW5jaG9yKSByZXR1cm4gW107XG5cbiAgICAgICAgICAgIHZhciBzZWN0aW9uID0gY29udGFpbmVyLmZpbmQoU0VDVElPTl9TRUwgKyAnW2RhdGEtYW5jaG9yPVwiJyArIHNlY3Rpb25BbmNob3IgKyAnXCJdJyk7XG4gICAgICAgICAgICBpZiAoIXNlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbiA9ICQoU0VDVElPTl9TRUwpLmVxKHNlY3Rpb25BbmNob3IgLSAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNlY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIGEgc2xpZGUgaW5zaWRlIGEgZ2l2ZW4gc2VjdGlvbiBieSBpdHMgYW5jaG9yIC8gaW5kZXhcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2xpZGVCeUFuY2hvcihzbGlkZUFuY2hvciwgc2VjdGlvbikge1xuICAgICAgICAgICAgdmFyIHNsaWRlcyA9IHNlY3Rpb24uZmluZChTTElERVNfV1JBUFBFUl9TRUwpO1xuICAgICAgICAgICAgdmFyIHNsaWRlID0gc2xpZGVzLmZpbmQoU0xJREVfU0VMICsgJ1tkYXRhLWFuY2hvcj1cIicgKyBzbGlkZUFuY2hvciArICdcIl0nKTtcblxuICAgICAgICAgICAgaWYgKCFzbGlkZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzbGlkZSA9IHNsaWRlcy5maW5kKFNMSURFX1NFTCkuZXEoc2xpZGVBbmNob3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2xpZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxzIHRvIHRoZSBnaXZlbiBzZWN0aW9uIGFuZCBzbGlkZSBhbmNob3JzXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbFBhZ2VBbmRTbGlkZShkZXN0aW55LCBzbGlkZSkge1xuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSBnZXRTZWN0aW9uQnlBbmNob3IoZGVzdGlueSk7XG5cbiAgICAgICAgICAgIC8vZG8gbm90aGluZyBpZiB0aGVyZSdzIG5vIHNlY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gYW5jaG9yIG5hbWVcbiAgICAgICAgICAgIGlmICghc2VjdGlvbi5sZW5ndGgpIHJldHVybjtcblxuICAgICAgICAgICAgLy9kZWZhdWx0IHNsaWRlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNsaWRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNsaWRlID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy93ZSBuZWVkIHRvIHNjcm9sbCB0byB0aGUgc2VjdGlvbiBhbmQgdGhlbiB0byB0aGUgc2xpZGVcbiAgICAgICAgICAgIGlmIChkZXN0aW55ICE9PSBsYXN0U2Nyb2xsZWREZXN0aW55ICYmICFzZWN0aW9uLmhhc0NsYXNzKEFDVElWRSkpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxQYWdlKHNlY3Rpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsU2xpZGVyKHNlY3Rpb24sIHNsaWRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vaWYgd2Ugd2VyZSBhbHJlYWR5IGluIHRoZSBzZWN0aW9uXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsU2xpZGVyKHNlY3Rpb24sIHNsaWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxzIHRoZSBzbGlkZXIgdG8gdGhlIGdpdmVuIHNsaWRlIGRlc3RpbmF0aW9uIGZvciB0aGUgZ2l2ZW4gc2VjdGlvblxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzY3JvbGxTbGlkZXIoc2VjdGlvbiwgc2xpZGVBbmNob3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2xpZGVBbmNob3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlcyA9IHNlY3Rpb24uZmluZChTTElERVNfV1JBUFBFUl9TRUwpO1xuICAgICAgICAgICAgICAgIHZhciBkZXN0aW55ID0gZ2V0U2xpZGVCeUFuY2hvcihzbGlkZUFuY2hvciwgc2VjdGlvbik7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGVzdGlueS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZHNjYXBlU2Nyb2xsKHNsaWRlcywgZGVzdGlueSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGxhbmRzY2FwZSBuYXZpZ2F0aW9uIGJhciB3aXRoIGRvdHMgZm9yIGhvcml6b250YWwgc2xpZGVycy5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYWRkU2xpZGVzTmF2aWdhdGlvbihzZWN0aW9uLCBudW1TbGlkZXMpIHtcbiAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kKCc8ZGl2IGNsYXNzPVwiJyArIFNMSURFU19OQVYgKyAnXCI+PHVsPjwvdWw+PC9kaXY+Jyk7XG4gICAgICAgICAgICB2YXIgbmF2ID0gc2VjdGlvbi5maW5kKFNMSURFU19OQVZfU0VMKTtcblxuICAgICAgICAgICAgLy90b3Agb3IgYm90dG9tXG4gICAgICAgICAgICBuYXYuYWRkQ2xhc3Mob3B0aW9ucy5zbGlkZXNOYXZQb3NpdGlvbik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtU2xpZGVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYXYuZmluZCgndWwnKS5hcHBlbmQoJzxsaT48YSBocmVmPVwiI1wiPjxzcGFuPjwvc3Bhbj48L2E+PC9saT4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jZW50ZXJpbmcgaXRcbiAgICAgICAgICAgIG5hdi5jc3MoJ21hcmdpbi1sZWZ0JywgJy0nICsgbmF2LndpZHRoKCkgLyAyICsgJ3B4Jyk7XG5cbiAgICAgICAgICAgIG5hdi5maW5kKCdsaScpLmZpcnN0KCkuZmluZCgnYScpLmFkZENsYXNzKEFDVElWRSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGUgd2Vic2l0ZSBkZXBlbmRpbmcgb24gdGhlIGFjdGl2ZSBzZWN0aW9uL3NsaWRlLlxyXG4gICAgICAgICAqIEl0IGNoYW5nZXMgdGhlIFVSTCBoYXNoIHdoZW4gbmVlZGVkIGFuZCB1cGRhdGVzIHRoZSBib2R5IGNsYXNzLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRTdGF0ZShzbGlkZUluZGV4LCBzbGlkZUFuY2hvciwgYW5jaG9yTGluaywgc2VjdGlvbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbkhhc2ggPSAnJztcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYW5jaG9ycy5sZW5ndGggJiYgIW9wdGlvbnMubG9ja0FuY2hvcnMpIHtcblxuICAgICAgICAgICAgICAgIC8vaXNuJ3QgaXQgdGhlIGZpcnN0IHNsaWRlP1xuICAgICAgICAgICAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYW5jaG9yTGluayAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25IYXNoID0gYW5jaG9yTGluaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vc2xpZGUgd2l0aG91dCBhbmNob3IgbGluaz8gV2UgdGFrZSB0aGUgaW5kZXggaW5zdGVhZC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzbGlkZUFuY2hvciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQW5jaG9yID0gc2xpZGVJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxlZFNsaWRlID0gc2xpZGVBbmNob3I7XG4gICAgICAgICAgICAgICAgICAgIHNldFVybEhhc2goc2VjdGlvbkhhc2ggKyAnLycgKyBzbGlkZUFuY2hvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9maXJzdCBzbGlkZSB3b24ndCBoYXZlIHNsaWRlIGFuY2hvciwganVzdCB0aGUgc2VjdGlvbiBvbmVcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzbGlkZUluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBsYXN0U2Nyb2xsZWRTbGlkZSA9IHNsaWRlQW5jaG9yO1xuICAgICAgICAgICAgICAgICAgICBzZXRVcmxIYXNoKGFuY2hvckxpbmspO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vc2VjdGlvbiB3aXRob3V0IHNsaWRlc1xuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VXJsSGFzaChhbmNob3JMaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRCb2R5Q2xhc3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHMgdGhlIFVSTCBoYXNoLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRVcmxIYXNoKHVybCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVjb3JkSGlzdG9yeSkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSB1cmw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vTW9iaWxlIENocm9tZSBkb2Vzbid0IHdvcmsgdGhlIG5vcm1hbCB3YXksIHNvLi4uIGxldHMgdXNlIEhUTUw1IGZvciBwaG9uZXMgOilcbiAgICAgICAgICAgICAgICBpZiAoaXNUb3VjaERldmljZSB8fCBpc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgJyMnICsgdXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZVVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMF07XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGJhc2VVcmwgKyAnIycgKyB1cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGFuY2hvciBmb3IgdGhlIGdpdmVuIHNsaWRlIC8gc2VjdGlvbi4gSXRzIGluZGV4IHdpbGwgYmUgdXNlZCBpZiB0aGVyZSdzIG5vbmUuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEFuY2hvcihlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gZWxlbWVudC5kYXRhKCdhbmNob3InKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGVsZW1lbnQuaW5kZXgoKTtcblxuICAgICAgICAgICAgLy9TbGlkZSB3aXRob3V0IGFuY2hvciBsaW5rPyBXZSB0YWtlIHRoZSBpbmRleCBpbnN0ZWFkLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhbmNob3IgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yID0gaW5kZXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhbmNob3I7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIGEgY2xhc3MgZm9yIHRoZSBib2R5IG9mIHRoZSBwYWdlIGRlcGVuZGluZyBvbiB0aGUgYWN0aXZlIHNlY3Rpb24gLyBzbGlkZVxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRCb2R5Q2xhc3MoKSB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9ICQoU0VDVElPTl9BQ1RJVkVfU0VMKTtcbiAgICAgICAgICAgIHZhciBzbGlkZSA9IHNlY3Rpb24uZmluZChTTElERV9BQ1RJVkVfU0VMKTtcblxuICAgICAgICAgICAgdmFyIHNlY3Rpb25BbmNob3IgPSBnZXRBbmNob3Ioc2VjdGlvbik7XG4gICAgICAgICAgICB2YXIgc2xpZGVBbmNob3IgPSBnZXRBbmNob3Ioc2xpZGUpO1xuXG4gICAgICAgICAgICB2YXIgdGV4dCA9IFN0cmluZyhzZWN0aW9uQW5jaG9yKTtcblxuICAgICAgICAgICAgaWYgKHNsaWRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0ICsgJy0nICsgc2xpZGVBbmNob3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY2hhbmdpbmcgc2xhc2ggZm9yIGRhc2ggdG8gbWFrZSBpdCBhIHZhbGlkIENTUyBzdHlsZVxuICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgnLycsICctJykucmVwbGFjZSgnIycsICcnKTtcblxuICAgICAgICAgICAgLy9yZW1vdmluZyBwcmV2aW91cyBhbmNob3IgY2xhc3Nlc1xuICAgICAgICAgICAgdmFyIGNsYXNzUmUgPSBuZXcgUmVnRXhwKCdcXFxcYlxcXFxzPycgKyBWSUVXSU5HX1BSRUZJWCArICctW15cXFxcc10rXFxcXGInLCBcImdcIik7XG4gICAgICAgICAgICAkYm9keVswXS5jbGFzc05hbWUgPSAkYm9keVswXS5jbGFzc05hbWUucmVwbGFjZShjbGFzc1JlLCAnJyk7XG5cbiAgICAgICAgICAgIC8vYWRkaW5nIHRoZSBjdXJyZW50IGFuY2hvclxuICAgICAgICAgICAgJGJvZHkuYWRkQ2xhc3MoVklFV0lOR19QUkVGSVggKyAnLScgKyB0ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENoZWNrcyBmb3IgdHJhbnNsYXRlM2Qgc3VwcG9ydFxyXG4gICAgICAgICAqIEByZXR1cm4gYm9vbGVhblxyXG4gICAgICAgICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTY2MTY3MS9kZXRlY3RpbmctdHJhbnNmb3JtLXRyYW5zbGF0ZTNkLXN1cHBvcnRcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc3VwcG9ydDNkKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxuICAgICAgICAgICAgICAgIGhhczNkLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybXMgPSB7XG4gICAgICAgICAgICAgICAgJ3dlYmtpdFRyYW5zZm9ybSc6ICctd2Via2l0LXRyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgJ09UcmFuc2Zvcm0nOiAnLW8tdHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICAnbXNUcmFuc2Zvcm0nOiAnLW1zLXRyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgJ01velRyYW5zZm9ybSc6ICctbW96LXRyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2Zvcm0nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGJvZHkgdG8gZ2V0IHRoZSBjb21wdXRlZCBzdHlsZS5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGVsLCBudWxsKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgdCBpbiB0cmFuc2Zvcm1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsLnN0eWxlW3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGVbdF0gPSAndHJhbnNsYXRlM2QoMXB4LDFweCwxcHgpJztcbiAgICAgICAgICAgICAgICAgICAgaGFzM2QgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSh0cmFuc2Zvcm1zW3RdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuXG4gICAgICAgICAgICByZXR1cm4gaGFzM2QgIT09IHVuZGVmaW5lZCAmJiBoYXMzZC5sZW5ndGggPiAwICYmIGhhczNkICE9PSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmVzIHRoZSBhdXRvIHNjcm9sbGluZyBhY3Rpb24gZmlyZWQgYnkgdGhlIG1vdXNlIHdoZWVsIGFuZCB0cmFja3BhZC5cclxuICAgICAgICAgKiBBZnRlciB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCwgdGhlIG1vdXNld2hlZWwgYW5kIHRyYWNrcGFkIG1vdmVtZW50cyB3b24ndCBzY3JvbGwgdGhyb3VnaCBzZWN0aW9ucy5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTW91c2VXaGVlbEhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBNb3VzZVdoZWVsSGFuZGxlciwgZmFsc2UpOyAvL0lFOSwgQ2hyb21lLCBTYWZhcmksIE9wZXJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7IC8vRmlyZWZveFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ01vek1vdXNlUGl4ZWxTY3JvbGwnLCBNb3VzZVdoZWVsSGFuZGxlciwgZmFsc2UpOyAvL29sZCBGaXJlZm94XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRldGFjaEV2ZW50KCdvbm1vdXNld2hlZWwnLCBNb3VzZVdoZWVsSGFuZGxlcik7IC8vSUUgNi83LzhcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgdGhlIGF1dG8gc2Nyb2xsaW5nIGFjdGlvbiBmb3IgdGhlIG1vdXNlIHdoZWVsIGFuZCB0cmFja3BhZC5cclxuICAgICAgICAgKiBBZnRlciB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCwgdGhlIG1vdXNld2hlZWwgYW5kIHRyYWNrcGFkIG1vdmVtZW50cyB3aWxsIHNjcm9sbCB0aHJvdWdoIHNlY3Rpb25zXHJcbiAgICAgICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvRXZlbnRzL3doZWVsXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1vdXNlV2hlZWxIYW5kbGVyKCkge1xuICAgICAgICAgICAgdmFyIHByZWZpeCA9ICcnO1xuICAgICAgICAgICAgdmFyIF9hZGRFdmVudExpc3RlbmVyO1xuXG4gICAgICAgICAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lciA9IFwiYWRkRXZlbnRMaXN0ZW5lclwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lciA9IFwiYXR0YWNoRXZlbnRcIjtcbiAgICAgICAgICAgICAgICBwcmVmaXggPSAnb24nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkZXRlY3QgYXZhaWxhYmxlIHdoZWVsIGV2ZW50XG4gICAgICAgICAgICB2YXIgc3VwcG9ydCA9ICdvbndoZWVsJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSA/ICd3aGVlbCcgOiAvLyBNb2Rlcm4gYnJvd3NlcnMgc3VwcG9ydCBcIndoZWVsXCJcbiAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V3aGVlbCAhPT0gdW5kZWZpbmVkID8gJ21vdXNld2hlZWwnIDogLy8gV2Via2l0IGFuZCBJRSBzdXBwb3J0IGF0IGxlYXN0IFwibW91c2V3aGVlbFwiXG4gICAgICAgICAgICAnRE9NTW91c2VTY3JvbGwnOyAvLyBsZXQncyBhc3N1bWUgdGhhdCByZW1haW5pbmcgYnJvd3NlcnMgYXJlIG9sZGVyIEZpcmVmb3hcblxuXG4gICAgICAgICAgICBpZiAoc3VwcG9ydCA9PSAnRE9NTW91c2VTY3JvbGwnKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRbX2FkZEV2ZW50TGlzdGVuZXJdKHByZWZpeCArICdNb3pNb3VzZVBpeGVsU2Nyb2xsJywgTW91c2VXaGVlbEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9oYW5kbGUgTW96TW91c2VQaXhlbFNjcm9sbCBpbiBvbGRlciBGaXJlZm94XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRbX2FkZEV2ZW50TGlzdGVuZXJdKHByZWZpeCArIHN1cHBvcnQsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmluZGluZyB0aGUgbW91c2Vtb3ZlIHdoZW4gdGhlIG1vdXNlJ3MgbWlkZGxlIGJ1dHRvbiBpcyBwcmVzc2VkXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1pZGRsZVdoZWVsSGFuZGxlcigpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5vbignbW91c2Vkb3duJywgbW91c2VEb3duSGFuZGxlcikub24oJ21vdXNldXAnLCBtb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbmJpbmRpbmcgdGhlIG1vdXNlbW92ZSB3aGVuIHRoZSBtb3VzZSdzIG1pZGRsZSBidXR0b24gaXMgcmVsZWFzZWRcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTWlkZGxlV2hlZWxIYW5kbGVyKCkge1xuICAgICAgICAgICAgY29udGFpbmVyLm9mZignbW91c2Vkb3duJywgbW91c2VEb3duSGFuZGxlcikub2ZmKCdtb3VzZXVwJywgbW91c2VVcEhhbmRsZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyB0aGUgcG9zc2liaWxpdHkgdG8gYXV0byBzY3JvbGwgdGhyb3VnaCBzZWN0aW9ucyBvbiB0b3VjaCBkZXZpY2VzLlxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhZGRUb3VjaEhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAoaXNUb3VjaERldmljZSB8fCBpc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXV0b1Njcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAkYm9keS5vZmYoZXZlbnRzLnRvdWNobW92ZSkub24oZXZlbnRzLnRvdWNobW92ZSwgcHJldmVudEJvdW5jaW5nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkKFdSQVBQRVJfU0VMKS5vZmYoZXZlbnRzLnRvdWNoc3RhcnQpLm9uKGV2ZW50cy50b3VjaHN0YXJ0LCB0b3VjaFN0YXJ0SGFuZGxlcikub2ZmKGV2ZW50cy50b3VjaG1vdmUpLm9uKGV2ZW50cy50b3VjaG1vdmUsIHRvdWNoTW92ZUhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlcyB0aGUgYXV0byBzY3JvbGxpbmcgZm9yIHRvdWNoIGRldmljZXMuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRvdWNoSGFuZGxlcigpIHtcbiAgICAgICAgICAgIGlmIChpc1RvdWNoRGV2aWNlIHx8IGlzVG91Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hdXRvU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICRib2R5Lm9mZihldmVudHMudG91Y2htb3ZlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkKFdSQVBQRVJfU0VMKS5vZmYoZXZlbnRzLnRvdWNoc3RhcnQpLm9mZihldmVudHMudG91Y2htb3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBSZXR1cm5zIGFuZCBvYmplY3Qgd2l0aCBNaWNyb3NvZnQgcG9pbnRlcnMgKGZvciBJRTwxMSBhbmQgZm9yIElFID49IDExKVxyXG4gICAgICAgICogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2RuMzA0ODg2KHY9dnMuODUpLmFzcHhcclxuICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRNU1BvaW50ZXIoKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnRlcjtcblxuICAgICAgICAgICAgLy9JRSA+PSAxMSAmIHJlc3Qgb2YgYnJvd3NlcnNcbiAgICAgICAgICAgIGlmICh3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcG9pbnRlciA9IHsgZG93bjogJ3BvaW50ZXJkb3duJywgbW92ZTogJ3BvaW50ZXJtb3ZlJyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0lFIDwgMTFcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb2ludGVyID0geyBkb3duOiAnTVNQb2ludGVyRG93bicsIG1vdmU6ICdNU1BvaW50ZXJNb3ZlJyB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHBvaW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBwYWdlWCBhbmQgcGFnZVkgcHJvcGVydGllcyBkZXBlbmRpbmcgb24gdGhlIGJyb3dzZXIuXHJcbiAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL2FsdmFyb3RyaWdvL2Z1bGxQYWdlLmpzL2lzc3Vlcy8xOTQjaXNzdWVjb21tZW50LTM0MDY5ODU0XHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEV2ZW50c1BhZ2UoZSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cyA9IFtdO1xuXG4gICAgICAgICAgICBldmVudHMueSA9IHR5cGVvZiBlLnBhZ2VZICE9PSAndW5kZWZpbmVkJyAmJiAoZS5wYWdlWSB8fCBlLnBhZ2VYKSA/IGUucGFnZVkgOiBlLnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgICAgICBldmVudHMueCA9IHR5cGVvZiBlLnBhZ2VYICE9PSAndW5kZWZpbmVkJyAmJiAoZS5wYWdlWSB8fCBlLnBhZ2VYKSA/IGUucGFnZVggOiBlLnRvdWNoZXNbMF0ucGFnZVg7XG5cbiAgICAgICAgICAgIC8vaW4gdG91Y2ggZGV2aWNlcyB3aXRoIHNjcm9sbEJhcjp0cnVlLCBlLnBhZ2VZIGlzIGRldGVjdGVkLCBidXQgd2UgaGF2ZSB0byBkZWFsIHdpdGggdG91Y2ggZXZlbnRzLiAjMTAwOFxuICAgICAgICAgICAgaWYgKGlzVG91Y2ggJiYgaXNSZWFsbHlUb3VjaChlKSAmJiBvcHRpb25zLnNjcm9sbEJhcikge1xuICAgICAgICAgICAgICAgIGV2ZW50cy55ID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgICAgICAgICAgIGV2ZW50cy54ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2xpZGVzIHNpbGVudGx5ICh3aXRoIG5vIGFuaW1hdGlvbikgdGhlIGFjdGl2ZSBzbGlkZXIgdG8gdGhlIGdpdmVuIHNsaWRlLlxyXG4gICAgICAgICAqIEBwYXJhbSBub0NhbGxiYWNrIHtib29sfSB0cnVlIG9yIGRlZmluZWQgLT4gbm8gY2FsbGJhY2tzXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNpbGVudExhbmRzY2FwZVNjcm9sbChhY3RpdmVTbGlkZSwgbm9DYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHNldFNjcm9sbGluZ1NwZWVkKDAsICdpbnRlcm5hbCcpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vQ2FsbGJhY2tzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIC8vcHJldmVudGluZyBmaXJpbmcgY2FsbGJhY2tzIGFmdGVyU2xpZGVMb2FkIGV0Yy5cbiAgICAgICAgICAgICAgICBpc1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFuZHNjYXBlU2Nyb2xsKGFjdGl2ZVNsaWRlLmNsb3Nlc3QoU0xJREVTX1dSQVBQRVJfU0VMKSwgYWN0aXZlU2xpZGUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vQ2FsbGJhY2tzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGlzUmVzaXppbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0U2Nyb2xsaW5nU3BlZWQob3JpZ2luYWxzLnNjcm9sbGluZ1NwZWVkLCAnaW50ZXJuYWwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbHMgc2lsZW50bHkgKHdpdGggbm8gYW5pbWF0aW9uKSB0aGUgcGFnZSB0byB0aGUgZ2l2ZW4gWSBwb3NpdGlvbi5cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2lsZW50U2Nyb2xsKHRvcCkge1xuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IHNlY3Rpb24gY2FuIGhhdmUgYSBuZWdhdGl2ZSB2YWx1ZSBpbiBpT1MgMTAuIE5vdCBxdWl0ZSBzdXJlIHdoeTogLTAuMDE0MjgyMjI2NTYyNVxuICAgICAgICAgICAgLy8gdGhhdCdzIHdoeSB3ZSByb3VuZCBpdCB0byAwLlxuICAgICAgICAgICAgdmFyIHJvdW5kZWRUb3AgPSBNYXRoLnJvdW5kKHRvcCk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNzczMgJiYgb3B0aW9ucy5hdXRvU2Nyb2xsaW5nICYmICFvcHRpb25zLnNjcm9sbEJhcikge1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUzZCA9ICd0cmFuc2xhdGUzZCgwcHgsIC0nICsgcm91bmRlZFRvcCArICdweCwgMHB4KSc7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtQ29udGFpbmVyKHRyYW5zbGF0ZTNkLCBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYXV0b1Njcm9sbGluZyAmJiAhb3B0aW9ucy5zY3JvbGxCYXIpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKCd0b3AnLCAtcm91bmRlZFRvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRodG1sQm9keS5zY3JvbGxUb3Aocm91bmRlZFRvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBjcm9zcy1icm93c2VyIHRyYW5zZm9ybSBzdHJpbmcuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFRyYW5zZm9ybXModHJhbnNsYXRlM2QpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogdHJhbnNsYXRlM2QsXG4gICAgICAgICAgICAgICAgJy1tb3otdHJhbnNmb3JtJzogdHJhbnNsYXRlM2QsXG4gICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiB0cmFuc2xhdGUzZCxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogdHJhbnNsYXRlM2RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbGxvd2luZyBvciBkaXNhbGxvd2luZyB0aGUgbW91c2Uvc3dpcGUgc2Nyb2xsIGluIGEgZ2l2ZW4gZGlyZWN0aW9uLiAobm90IGZvciBrZXlib2FyZClcclxuICAgICAgICAgKiBAdHlwZSAgbSAobW91c2UpIG9yIGsgKGtleWJvYXJkKVxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRJc1Njcm9sbEFsbG93ZWQodmFsdWUsIGRpcmVjdGlvbiwgdHlwZSkge1xuICAgICAgICAgICAgLy91cCwgZG93biwgbGVmdCwgcmlnaHRcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgaXNTY3JvbGxBbGxvd2VkW3R5cGVdW2RpcmVjdGlvbl0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9hbGwgZGlyZWN0aW9ucz9cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2goT2JqZWN0LmtleXMoaXNTY3JvbGxBbGxvd2VkW3R5cGVdKSwgZnVuY3Rpb24gKGluZGV4LCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsQWxsb3dlZFt0eXBlXVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBEZXN0cm95cyBmdWxscGFnZS5qcyBwbHVnaW4gZXZlbnRzIGFuZCBvcHRpbmFsbHkgaXRzIGh0bWwgbWFya3VwIGFuZCBzdHlsZXNcclxuICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkZXN0cm95KGFsbCkge1xuICAgICAgICAgICAgc2V0QXV0b1Njcm9sbGluZyhmYWxzZSwgJ2ludGVybmFsJyk7XG4gICAgICAgICAgICBzZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICBzZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoREVTVFJPWUVEKTtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFmdGVyU2xpZGVMb2Fkc0lkKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhZnRlclNlY3Rpb25Mb2Fkc0lkKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChyZXNpemVJZCk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsSWQpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbElkMik7XG5cbiAgICAgICAgICAgICR3aW5kb3cub2ZmKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyKS5vZmYoJ2hhc2hjaGFuZ2UnLCBoYXNoQ2hhbmdlSGFuZGxlcikub2ZmKCdyZXNpemUnLCByZXNpemVIYW5kbGVyKTtcblxuICAgICAgICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2sgdG91Y2hzdGFydCcsIFNFQ1RJT05fTkFWX1NFTCArICcgYScpLm9mZignbW91c2VlbnRlcicsIFNFQ1RJT05fTkFWX1NFTCArICcgbGknKS5vZmYoJ21vdXNlbGVhdmUnLCBTRUNUSU9OX05BVl9TRUwgKyAnIGxpJykub2ZmKCdjbGljayB0b3VjaHN0YXJ0JywgU0xJREVTX05BVl9MSU5LX1NFTCkub2ZmKCdtb3VzZW92ZXInLCBvcHRpb25zLm5vcm1hbFNjcm9sbEVsZW1lbnRzKS5vZmYoJ21vdXNlb3V0Jywgb3B0aW9ucy5ub3JtYWxTY3JvbGxFbGVtZW50cyk7XG5cbiAgICAgICAgICAgICQoU0VDVElPTl9TRUwpLm9mZignY2xpY2sgdG91Y2hzdGFydCcsIFNMSURFU19BUlJPV19TRUwpO1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoYWZ0ZXJTbGlkZUxvYWRzSWQpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFmdGVyU2VjdGlvbkxvYWRzSWQpO1xuXG4gICAgICAgICAgICAvL2xldHMgbWFrZSBhIG1lc3MhXG4gICAgICAgICAgICBpZiAoYWxsKSB7XG4gICAgICAgICAgICAgICAgZGVzdHJveVN0cnVjdHVyZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLypcclxuICAgICAgICAqIFJlbW92ZXMgaW5saW5lIHN0eWxlcyBhZGRlZCBieSBmdWxscGFnZS5qc1xyXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lTdHJ1Y3R1cmUoKSB7XG4gICAgICAgICAgICAvL3Jlc2V0aW5nIHRoZSBgdG9wYCBvciBgdHJhbnNsYXRlYCBwcm9wZXJ0aWVzIHRvIDBcbiAgICAgICAgICAgIHNpbGVudFNjcm9sbCgwKTtcblxuICAgICAgICAgICAgLy9sb2FkaW5nIGFsbCB0aGUgbGF6eSBsb2FkIGNvbnRlbnRcbiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCdpbWdbZGF0YS1zcmNdLCBzb3VyY2VbZGF0YS1zcmNdLCBhdWRpb1tkYXRhLXNyY10sIGlmcmFtZVtkYXRhLXNyY10nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRTcmMoJCh0aGlzKSwgJ3NyYycpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCdpbWdbZGF0YS1zcmNzZXRdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0U3JjKCQodGhpcyksICdzcmNzZXQnKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKFNFQ1RJT05fTkFWX1NFTCArICcsICcgKyBTTElERVNfTkFWX1NFTCArICcsICcgKyBTTElERVNfQVJST1dfU0VMKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgLy9yZW1vdmluZyBpbmxpbmUgc3R5bGVzXG4gICAgICAgICAgICAkKFNFQ1RJT05fU0VMKS5jc3Moe1xuICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnJyxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcnLFxuICAgICAgICAgICAgICAgICdwYWRkaW5nJzogJydcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKFNMSURFX1NFTCkuY3NzKHtcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiAnJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnJyxcbiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnJyxcbiAgICAgICAgICAgICAgICAnLW1zLXRvdWNoLWFjdGlvbic6ICcnLFxuICAgICAgICAgICAgICAgICd0b3VjaC1hY3Rpb24nOiAnJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRodG1sQm9keS5jc3Moe1xuICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICcnLFxuICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSAuZnAtZW5hYmxlZCBjbGFzc1xuICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKEVOQUJMRUQpO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgLmZwLXJlc3BvbnNpdmUgY2xhc3NcbiAgICAgICAgICAgICRib2R5LnJlbW92ZUNsYXNzKFJFU1BPTlNJVkUpO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgYWxsIG9mIHRoZSAuZnAtdmlld2luZy0gY2xhc3Nlc1xuICAgICAgICAgICAgJC5lYWNoKCRib2R5LmdldCgwKS5jbGFzc05hbWUuc3BsaXQoL1xccysvKSwgZnVuY3Rpb24gKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lLmluZGV4T2YoVklFV0lOR19QUkVGSVgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRib2R5LnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vcmVtb3ZpbmcgYWRkZWQgY2xhc3Nlc1xuICAgICAgICAgICAgJChTRUNUSU9OX1NFTCArICcsICcgKyBTTElERV9TRUwpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlci5yZW1vdmUoJCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoVEFCTEUgKyAnICcgKyBBQ1RJVkUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJlbW92ZUFuaW1hdGlvbihjb250YWluZXIpO1xuXG4gICAgICAgICAgICAvL1Vud3JhcHBpbmcgY29udGVudFxuICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoVEFCTEVfQ0VMTF9TRUwgKyAnLCAnICsgU0xJREVTX0NPTlRBSU5FUl9TRUwgKyAnLCAnICsgU0xJREVTX1dSQVBQRVJfU0VMKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvL3Vud3JhcCBub3QgYmVpbmcgdXNlIGluIGNhc2UgdGhlcmUncyBubyBjaGlsZCBlbGVtZW50IGluc2lkZSBhbmQgaXRzIGp1c3QgdGV4dFxuICAgICAgICAgICAgICAgICQodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL3JlbW92aW5nIHRoZSBhcHBsaWVkIHRyYW5zaXRpb24gZnJvbSB0aGUgZnVsbHBhZ2Ugd3JhcHBlclxuICAgICAgICAgICAgY29udGFpbmVyLmNzcyh7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbic6ICdub25lJyxcbiAgICAgICAgICAgICAgICAndHJhbnNpdGlvbic6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vc2Nyb2xsaW5nIHRoZSBwYWdlIHRvIHRoZSB0b3Agd2l0aCBubyBhbmltYXRpb25cbiAgICAgICAgICAgICRodG1sQm9keS5zY3JvbGxUb3AoMCk7XG5cbiAgICAgICAgICAgIC8vcmVtb3Zpbmcgc2VsZWN0b3JzXG4gICAgICAgICAgICB2YXIgdXNlZFNlbGVjdG9ycyA9IFtTRUNUSU9OLCBTTElERSwgU0xJREVTX0NPTlRBSU5FUl07XG4gICAgICAgICAgICAkLmVhY2godXNlZFNlbGVjdG9ycywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICQoJy4nICsgdmFsdWUpLnJlbW92ZUNsYXNzKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcclxuICAgICAgICAqIFNldHMgdGhlIHN0YXRlIGZvciBhIHZhcmlhYmxlIHdpdGggbXVsdGlwbGUgc3RhdGVzIChvcmlnaW5hbCwgYW5kIHRlbXBvcmFsKVxyXG4gICAgICAgICogU29tZSB2YXJpYWJsZXMgc3VjaCBhcyBgYXV0b1Njcm9sbGluZ2Agb3IgYHJlY29yZEhpc3RvcnlgIG1pZ2h0IGNoYW5nZSBhdXRvbWF0aWNhbGx5IGl0cyBzdGF0ZSB3aGVuIHVzaW5nIGByZXNwb25zaXZlYCBvciBgYXV0b1Njcm9sbGluZzpmYWxzZWAuXHJcbiAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBib3RoIHN0YXRlcywgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGVtcG9yYWwgb25lLlxyXG4gICAgICAgICogSWYgdHlwZSBpcyBub3QgJ2ludGVybmFsJywgdGhlbiB3ZSBhc3N1bWUgdGhlIHVzZXIgaXMgZ2xvYmFsbHkgY2hhbmdpbmcgdGhlIHZhcmlhYmxlLlxyXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldFZhcmlhYmxlU3RhdGUodmFyaWFibGUsIHZhbHVlLCB0eXBlKSB7XG4gICAgICAgICAgICBvcHRpb25zW3ZhcmlhYmxlXSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHR5cGUgIT09ICdpbnRlcm5hbCcpIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbHNbdmFyaWFibGVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaXNwbGF5cyB3YXJuaW5nc1xyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaXNwbGF5V2FybmluZ3MoKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW5zaW9ucyA9IFsnZmFkaW5nRWZmZWN0JywgJ2NvbnRpbnVvdXNIb3Jpem9udGFsJywgJ3Njcm9sbEhvcml6b250YWxseScsICdpbnRlcmxvY2tlZFNsaWRlcycsICdyZXNldFNsaWRlcnMnLCAncmVzcG9uc2l2ZVNsaWRlcycsICdvZmZzZXRTZWN0aW9ucycsICdkcmFnQW5kTW92ZScsICdzY3JvbGxPdmVyZmxvd1Jlc2V0JywgJ3BhcmFsbGF4J107XG4gICAgICAgICAgICBpZiAoJCgnaHRtbCcpLmhhc0NsYXNzKEVOQUJMRUQpKSB7XG4gICAgICAgICAgICAgICAgc2hvd0Vycm9yKCdlcnJvcicsICdGdWxscGFnZS5qcyBjYW4gb25seSBiZSBpbml0aWFsaXplZCBvbmNlIGFuZCB5b3UgYXJlIGRvaW5nIGl0IG11bHRpcGxlIHRpbWVzIScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGlzYWJsZSBtdXR1YWxseSBleGNsdXNpdmUgc2V0dGluZ3NcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnRpbnVvdXNWZXJ0aWNhbCAmJiAob3B0aW9ucy5sb29wVG9wIHx8IG9wdGlvbnMubG9vcEJvdHRvbSkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbnRpbnVvdXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNob3dFcnJvcignd2FybicsICdPcHRpb24gYGxvb3BUb3AvbG9vcEJvdHRvbWAgaXMgbXV0dWFsbHkgZXhjbHVzaXZlIHdpdGggYGNvbnRpbnVvdXNWZXJ0aWNhbGA7IGBjb250aW51b3VzVmVydGljYWxgIGRpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbEJhciAmJiBvcHRpb25zLnNjcm9sbE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgc2hvd0Vycm9yKCd3YXJuJywgJ09wdGlvbiBgc2Nyb2xsQmFyYCBpcyBtdXR1YWxseSBleGNsdXNpdmUgd2l0aCBgc2Nyb2xsT3ZlcmZsb3dgLiBTZWN0aW9ucyB3aXRoIHNjcm9sbE92ZXJmbG93IG1pZ2h0IG5vdCB3b3JrIHdlbGwgaW4gRmlyZWZveCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jb250aW51b3VzVmVydGljYWwgJiYgKG9wdGlvbnMuc2Nyb2xsQmFyIHx8ICFvcHRpb25zLmF1dG9TY3JvbGxpbmcpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb250aW51b3VzVmVydGljYWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzaG93RXJyb3IoJ3dhcm4nLCAnU2Nyb2xsIGJhcnMgKGBzY3JvbGxCYXI6dHJ1ZWAgb3IgYGF1dG9TY3JvbGxpbmc6ZmFsc2VgKSBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIHdpdGggYGNvbnRpbnVvdXNWZXJ0aWNhbGA7IGBjb250aW51b3VzVmVydGljYWxgIGRpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNjcm9sbE92ZXJmbG93ICYmICFvcHRpb25zLnNjcm9sbE92ZXJmbG93SGFuZGxlcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2Nyb2xsT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzaG93RXJyb3IoJ2Vycm9yJywgJ1RoZSBvcHRpb24gYHNjcm9sbE92ZXJmbG93OnRydWVgIHJlcXVpcmVzIHRoZSBmaWxlIGBzY3JvbGxvdmVyZmxvdy5taW4uanNgLiBQbGVhc2UgaW5jbHVkZSBpdCBiZWZvcmUgZnVsbFBhZ2UuanMuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vdXNpbmcgZXh0ZW5zaW9ucz8gV3JvbmcgZmlsZSFcbiAgICAgICAgICAgICQuZWFjaChleHRlbnNpb25zLCBmdW5jdGlvbiAoaW5kZXgsIGV4dGVuc2lvbikge1xuICAgICAgICAgICAgICAgIC8vaXMgdGhlIG9wdGlvbiBzZXQgdG8gdHJ1ZT9cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc1tleHRlbnNpb25dKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dFcnJvcignd2FybicsICdmdWxscGFnZS5qcyBleHRlbnNpb25zIHJlcXVpcmUganF1ZXJ5LmZ1bGxwYWdlLmV4dGVuc2lvbnMubWluLmpzIGZpbGUgaW5zdGVhZCBvZiB0aGUgdXN1YWwganF1ZXJ5LmZ1bGxwYWdlLmpzLiBSZXF1ZXN0ZWQ6ICcgKyBleHRlbnNpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL2FuY2hvcnMgY2FuIG5vdCBoYXZlIHRoZSBzYW1lIHZhbHVlIGFzIGFueSBlbGVtZW50IElEIG9yIE5BTUVcbiAgICAgICAgICAgICQuZWFjaChvcHRpb25zLmFuY2hvcnMsIGZ1bmN0aW9uIChpbmRleCwgbmFtZSkge1xuXG4gICAgICAgICAgICAgICAgLy9jYXNlIGluc2Vuc2l0aXZlIHNlbGVjdG9ycyAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTk0NjUxODcvMTA4MTM5NilcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUF0dHIgPSAkZG9jdW1lbnQuZmluZCgnW25hbWVdJykuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuYXR0cignbmFtZScpICYmICQodGhpcykuYXR0cignbmFtZScpLnRvTG93ZXJDYXNlKCkgPT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlkQXR0ciA9ICRkb2N1bWVudC5maW5kKCdbaWRdJykuZmlsdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuYXR0cignaWQnKSAmJiAkKHRoaXMpLmF0dHIoJ2lkJykudG9Mb3dlckNhc2UoKSA9PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWRBdHRyLmxlbmd0aCB8fCBuYW1lQXR0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yKCdlcnJvcicsICdkYXRhLWFuY2hvciB0YWdzIGNhbiBub3QgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBhcyBhbnkgYGlkYCBlbGVtZW50IG9uIHRoZSBzaXRlIChvciBgbmFtZWAgZWxlbWVudCBmb3IgSUUpLicpO1xuICAgICAgICAgICAgICAgICAgICBpZEF0dHIubGVuZ3RoICYmIHNob3dFcnJvcignZXJyb3InLCAnXCInICsgbmFtZSArICdcIiBpcyBpcyBiZWluZyB1c2VkIGJ5IGFub3RoZXIgZWxlbWVudCBgaWRgIHByb3BlcnR5Jyk7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVBdHRyLmxlbmd0aCAmJiBzaG93RXJyb3IoJ2Vycm9yJywgJ1wiJyArIG5hbWUgKyAnXCIgaXMgaXMgYmVpbmcgdXNlZCBieSBhbm90aGVyIGVsZW1lbnQgYG5hbWVgIHByb3BlcnR5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTaG93cyBhIG1lc3NhZ2UgaW4gdGhlIGNvbnNvbGUgb2YgdGhlIGdpdmVuIHR5cGUuXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNob3dFcnJvcih0eXBlLCB0ZXh0KSB7XG4gICAgICAgICAgICBjb25zb2xlICYmIGNvbnNvbGVbdHlwZV0gJiYgY29uc29sZVt0eXBlXSgnZnVsbFBhZ2U6ICcgKyB0ZXh0KTtcbiAgICAgICAgfVxuICAgIH07IC8vZW5kIG9mICQuZm4uZnVsbHBhZ2Vcbn0pOyIsImNsYXNzIEFuaW1hdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdyYWRpZW50SW50ZXJ2YWw7XG4gICAgICAgIHRoaXMucGFyYW1zID0ge1xuICAgICAgICAgICAgbG9hZDoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIm1haW5NYXNrXCIsXG4gICAgICAgICAgICAgICAgYmVnaW5TdGVwOiAtMjAwMCxcbiAgICAgICAgICAgICAgICBmaW5pc2hTdGVwOiAxMDAwLFxuICAgICAgICAgICAgICAgIHN0ZXA6IDUwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIm1haW5NYXNrXCIsXG4gICAgICAgICAgICAgICAgYmVnaW5TdGVwOiAtMjkwMCxcbiAgICAgICAgICAgICAgICBmaW5pc2hTdGVwOiAxMDAwLFxuICAgICAgICAgICAgICAgIHN0ZXA6IDUwLFxuICAgICAgICAgICAgICAgIHRpbWU6IDI1MDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb2JpbGU6IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJtYWluTW9iaWxlTWFza1wiLFxuICAgICAgICAgICAgICAgIGJlZ2luU3RlcDogLTcwMCxcbiAgICAgICAgICAgICAgICBmaW5pc2hTdGVwOiA0MDAsXG4gICAgICAgICAgICAgICAgc3RlcDogMjUsXG4gICAgICAgICAgICAgICAgdGltZTogMzAwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgYW5pbWF0ZVRyYW5zZm9ybShzZWxlY3RvciwgYmVnaW5TdGVwLCBmaW5pc2hTdGVwLCBzdGVwLCBheGlzID0gJ1gnKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0ZUF4aXMgPSBheGlzID09PSAnWCcgPyBiZWdpblN0ZXAgOiAnMCwgJyArIGJlZ2luU3RlcDtcbiAgICAgICAgICAgIGJlZ2luU3RlcCArPSBzdGVwO1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJysgdHJhbnNsYXRlQXhpcyArJyknKTtcblxuICAgICAgICAgICAgYmVnaW5TdGVwID09PSBmaW5pc2hTdGVwID8gY2FuY2VsQW5pbWF0aW9uRnJhbWUodHJhbnNmb3JtKSA6IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0cmFuc2Zvcm0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0cmFuc2Zvcm0pO1xuICAgIH1cblxuICAgIHN0YXJ0QW5pbWF0aW9uKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGVUcmFuc2Zvcm0oXCJmaXJzdC1maWxsXCIsIDEwMCwgLTUsIC01LCBgWWApO1xuICAgICAgICB0aGlzLmFuaW1hdGVUcmFuc2Zvcm0oXCJzZWNvbmQtZmlsbFwiLCAtMjAwLCAxMCwgMTAsIGBZYCk7XG4gICAgICAgIHRoaXMuYW5pbWF0ZVRyYW5zZm9ybShcInRoaXJkLWZpbGxcIiwgLTEwMCwgNSwgNSwgYFlgKTtcbiAgICAgICAgdGhpcy5hbmltYXRlVHJhbnNmb3JtKFwiZm91cnRoLWZpbGxcIiwgMjAwLCAtMTAsIC0xMCwgYFlgKTtcbiAgICB9XG5cbiAgICBpbml0R3JhZGllbnQocGFyYW1zKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZVRyYW5zZm9ybSh0aGlzLnBhcmFtc1twYXJhbXNdLnNlbGVjdG9yLCB0aGlzLnBhcmFtc1twYXJhbXNdLmJlZ2luU3RlcCwgdGhpcy5wYXJhbXNbcGFyYW1zXS5maW5pc2hTdGVwLCB0aGlzLnBhcmFtc1twYXJhbXNdLnN0ZXApO1xuICAgIH1cblxuICAgIGluaXRHcmFkaWVudEludGVydmFsKHBhcmFtcykge1xuICAgICAgICB0aGlzLmdyYWRpZW50SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmluaXRHcmFkaWVudChwYXJhbXMpO1xuICAgICAgICB9LCB0aGlzLnBhcmFtc1twYXJhbXNdLnRpbWUpO1xuICAgIH1cblxuICAgIGNsZWFyR3JhZGllbnRJbnRlcnZhbCgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdyYWRpZW50SW50ZXJ2YWwpO1xuICAgIH1cbn1cblxuXG5jbGFzcyBWYWxpZGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZW1haWxQYXJhbXMgPSB7fTtcbiAgICB9XG5cbiAgICBjaGVja1ZhbGlkRmllbGQoZmllbGRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IG5ldyBSZWdFeHAoZmllbGRFbGVtZW50LnBhdHRlcm4pO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGZpZWxkRWxlbWVudC5pZCA9PT0gJ2VtYWlsLWZpZWxkJyA/IHRoaXMucGF0dGVybi5leGVjKGZpZWxkRWxlbWVudC52YWx1ZS50b0xvd2VyQ2FzZSgpKSA6IHRoaXMucGF0dGVybi5leGVjKGZpZWxkRWxlbWVudC52YWx1ZSk7XG4gICAgICAgIHRoaXMuY2hlY2tFbXB0eUZpZWxkKGZpZWxkRWxlbWVudCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnJlc3VsdCB8fCBmaWVsZEVsZW1lbnQuaWQgPT09ICdtZXNzYWdlLWZpZWxkJyAmJiBmaWVsZEVsZW1lbnQudmFsdWUubGVuZ3RoIDwgNTApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RXJyb3JDbGFzcyhmaWVsZEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbGVhckVycm9ycyhmaWVsZEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5lbWFpbFBhcmFtc1tmaWVsZEVsZW1lbnQubmFtZV0gPSBmaWVsZEVsZW1lbnQudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFcnJvckNsYXNzKGZpZWxkRWxlbWVudCkge1xuICAgICAgICBmaWVsZEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuICAgICAgICBmaWVsZEVsZW1lbnQudmFsaWRGaWVsZENvdW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY2xlYXJFcnJvcnMoZmllbGRFbGVtZW50KSB7XG4gICAgICAgIGZpZWxkRWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG4gICAgICAgIGZpZWxkRWxlbWVudC52YWxpZEZpZWxkQ291bnQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNoZWNrRW1wdHlGaWVsZChmaWVsZEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5ibG9ja0NsYXNzTGlzdCA9IGZpZWxkRWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdDtcbiAgICAgICAgZmllbGRFbGVtZW50LnZhbHVlID8gdGhpcy5ibG9ja0NsYXNzTGlzdC5hZGQoJ25vdC1lbXB0eScpIDogdGhpcy5ibG9ja0NsYXNzTGlzdC5yZW1vdmUoJ25vdC1lbXB0eScpO1xuICAgIH1cblxuICAgIHNlbmRGb3JtKCkge1xuICAgICAgICBjb25zdCBmaWVsZHMgPSAkKCcjZm9ybSAuZmllbGQnKTtcbiAgICAgICAgdGhpcy52YWxpZEZpZWxkc0NvdW50ID0gMDtcblxuICAgICAgICBmaWVsZHMuZWFjaCgoaW5kZXgsIGZpZWxkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsaWRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICBmaWVsZC52YWx1ZSAhPT0gJycgJiYgZmllbGQudmFsaWRGaWVsZENvdW50ID8gdGhpcy52YWxpZEZpZWxkc0NvdW50ICs9IDEgOiB0aGlzLnZhbGlkRmllbGRzQ291bnQgLT0gMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMudmFsaWRGaWVsZHNDb3VudCA9PT0gZmllbGRzLmxlbmd0aCkge1xuICAgICAgICAgICAgc2VuZEZvcm0uc2VuZCh0aGlzLmVtYWlsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5jbGFzcyBQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXRlUGx1Z2luV29ya2luZztcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLnN0YXRlUGx1Z2luV29ya2luZyA9IHRydWU7XG5cbiAgICAgICAgJCgnI2Z1bGxwYWdlJykuZnVsbHBhZ2Uoe1xuICAgICAgICAgICAgbmF2aWdhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIG5hdmlnYXRpb25Qb3NpdGlvbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgIG5hdmlnYXRpb25Ub29sdGlwczogWydIb21lJywgJ0Fib3V0JywgJ0NvbnRhY3QgVXMnXSxcbiAgICAgICAgICAgIHNob3dBY3RpdmVUb29sdGlwOiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsaW5nU3BlZWQ6IDEwMDAsXG4gICAgICAgICAgICBlYXNpbmdjc3MzOiAnbm9uZScsXG4gICAgICAgICAgICBmYWRpbmdFZmZlY3Q6IGZhbHNlLFxuICAgICAgICAgICAgYWZ0ZXJSZW5kZXI6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBhbmltYXRlLnN0YXJ0QW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZS5pbml0R3JhZGllbnRJbnRlcnZhbCgnbWFpbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN0YXRlUGx1Z2luV29ya2luZyA9IGZhbHNlO1xuICAgICAgICAkLmZuLmZ1bGxwYWdlLmRlc3Ryb3koJ2FsbCcpO1xuICAgIH1cbn1cblxuXG5jbGFzcyBXaW5kb3dSZXNpemUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlc2l6ZVBvaW50ID0gNzY3O1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgICQoXCIubG9hZGVyXCIpLnJlbW92ZSgpO1xuICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcblxuICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoID4gdGhpcy5yZXNpemVQb2ludCAmJiAhcGx1Z2luLnN0YXRlUGx1Z2luV29ya2luZykge1xuICAgICAgICAgICAgdGhpcy5kZXNrdG9wVmlldygpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA8PSB0aGlzLnJlc2l6ZVBvaW50KSB7XG4gICAgICAgICAgICBhbmltYXRlLmNsZWFyR3JhZGllbnRJbnRlcnZhbCgpO1xuICAgICAgICAgICAgYW5pbWF0ZS5pbml0R3JhZGllbnRJbnRlcnZhbCgnbW9iaWxlJyk7XG5cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc3RhdGVQbHVnaW5Xb3JraW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXNrdG9wVmlldygpIHtcbiAgICAgICAgYW5pbWF0ZS5jbGVhckdyYWRpZW50SW50ZXJ2YWwoKTtcbiAgICAgICAgJCgnLmFuY2hvcicpLnJlbW92ZUF0dHIoXCJuYW1lXCIpO1xuICAgICAgICBwbHVnaW4uaW5pdCgpO1xuICAgIH1cblxuICAgIG1vYmlsZVZpZXcoKSB7XG4gICAgICAgIHBsdWdpbi5kZXN0cm95KCk7XG4gICAgICAgICQoJyNzZWN0aW9uMiAuYW5jaG9yJykuYXR0cihcIm5hbWVcIixcIkFib3V0VXNcIik7XG4gICAgICAgICQoJyNzZWN0aW9uMyAuYW5jaG9yJykuYXR0cihcIm5hbWVcIixcIkNvbnRhY3RVU1wiKTtcbiAgICB9XG59XG5cblxuY2xhc3MgU2VuZEZvcm0ge1xuICAgIHNlbmQoZW1haWxNYXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTmFtZTogJHtlbWFpbE1hc3NhZ2UubmFtZX0gXFxuRW1haWw6ICR7ZW1haWxNYXNzYWdlLmVtYWlsfSBcXG5QaG9uZSBOdW1iZXI6ICR7ZW1haWxNYXNzYWdlLnBob25lfSBcXG5NZXNzYWdlOiAke2VtYWlsTWFzc2FnZS5tZXNzYWdlfWA7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0ge1xuICAgICAgICAgICAgXCJ0b1wiOiBcImluc3VyYW5jZXJldmVudWV0ZXN0QGdtYWlsLmNvbVwiLFxuICAgICAgICAgICAgXCJ1cmxcIjogXCJodHRwczovL2FwaTprZXktYWY5MzcwYTk2ZWU1M2RmMjdhNzY0NTU1YWFjYjM3ZjRAYXBpLm1haWxndW4ubmV0L3YzL3NhbmRib3hiMTdiMDc3YmUxY2U0YjBjYWYyNDMzNTc4NzYxZDkzOC5tYWlsZ3VuLm9yZy9tZXNzYWdlc1wiLFxuICAgICAgICAgICAgXCJtZXRob2RcIjogXCJQT1NUXCIsXG4gICAgICAgICAgICBcInN1YmplY3RcIjogXCJDb250YWN0IFVzIE1lc3NhZ2VcIixcbiAgICAgICAgICAgIFwidGV4dFwiOiBtZXNzYWdlLFxuICAgICAgICAgICAgXCJmcm9tXCI6IFwiRnJvbSBJdmFuIDxJdmFuQHNhbmRib3hiMTdiMDc3YmUxY2U0YjBjYWYyNDMzNTc4NzYxZDkzOC5tYWlsZ3VuLm9yZz5cIlxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc3VjY2VzcygpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHNldHRpbmdzLCAncGFyYW1zIGZvciBzZW5kJyk7XG5cbiAgICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UsICdyZXNwb25zZSBhZnRlciBzZW5kJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN1Y2Nlc3MoKSB7XG4gICAgICAgICQoJyNmb3JtJykuYWRkQ2xhc3MoJ2ludmlzaWJsZScpO1xuICAgICAgICAkKCcuc3VjY2Vzcy1tZXNzYWdlJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbn1cblxuXG5jbGFzcyBNZW51IHtcbiAgICBjaGVja1NhdGUoKSB7XG4gICAgICAgICQoJy5vcGVuLW1lbnUnKS5sZW5ndGggPyAkKCcubWVudS13cmFwJykucmVtb3ZlQ2xhc3MoJ29wZW4tbWVudScpIDogICQoJy5tZW51LXdyYXAnKS5hZGRDbGFzcygnb3Blbi1tZW51Jyk7XG4gICAgfVxufVxuXG5cbmNvbnN0IGFuaW1hdGUgPSBuZXcgQW5pbWF0ZSgpO1xuY29uc3QgdmFsaWRhdGUgPSBuZXcgVmFsaWRhdGUoKTtcbmNvbnN0IHBsdWdpbiA9IG5ldyAgUGx1Z2luKCk7XG5jb25zdCB3aW5kb3dSZXNpemUgPSBuZXcgV2luZG93UmVzaXplKCk7XG5jb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbmNvbnN0IHNlbmRGb3JtID0gbmV3IFNlbmRGb3JtKCk7XG5cblxuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGFuaW1hdGUuc3RhcnRBbmltYXRpb24oKTtcbiAgICAgICAgYW5pbWF0ZS5pbml0R3JhZGllbnQoJ2xvYWQnKTtcbiAgICB9LCAzMDApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHdpbmRvd1Jlc2l6ZS5pbml0KCk7XG4gICAgfSwgMjAwMCk7XG5cbiAgICAvLyAkKFwiI3Bob25lLWZpZWxkXCIpLm1hc2soXCIwMDAgMDAwIDAwIDAwXCIpO1xuXG4gICAgJChcIiNwaG9uZS1maWVsZFwiKS5tYXNrKFxuICAgICAgICAnIyMjICMjIycsIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgJyMnOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IC9hLXpBLVovLCByZWN1cnNpdmU6IHRydWVcblxuICAgICAgICAgICAgICAgICAgICAvLyBwYXR0ZXJuOiAvXFxeKFtBLVphLXpdK1xccz9bQS1aYS16XSkrJC8sIHJlY3Vyc2l2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAvLyAvXig/ISApKFtBLVphLXpcXHNdKSskL1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gJ0EnOiB7XG4gICAgICAgICAgICAgICAgLy8gICAgIHBhdHRlcm46IC9eW1xcc10rJC8sIHJlY3Vyc2l2ZTogZmFsc2VcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJyk7XG5cbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgdmFsaWRhdGUuY2xlYXJFcnJvcnMoZXZlbnQudGFyZ2V0KTtcbiAgICB9LCB0cnVlKTtcblxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIHZhbGlkYXRlLmNoZWNrRW1wdHlGaWVsZChldmVudC50YXJnZXQpO1xuICAgIH0sIHRydWUpO1xuXG4gICAgJCgnLm1lbnUtd3JhcCcpLmNsaWNrKCgpID0+IHttZW51LmNoZWNrU2F0ZSgpfSk7XG5cbiAgICAkKCcjc2VuZC1idXR0b24nKS5jbGljaygoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhbGlkYXRlLnNlbmRGb3JtKCk7XG4gICAgfSk7XG5cbn0pO1xuXG4kKHdpbmRvdykucmVzaXplKCgpID0+IHdpbmRvd1Jlc2l6ZS5pbml0KCkpO1xuIiwiLyoqXHJcbiAqIGpxdWVyeS5tYXNrLmpzXHJcbiAqIEB2ZXJzaW9uOiB2MS4xNC4xMlxyXG4gKiBAYXV0aG9yOiBJZ29yIEVzY29iYXJcclxuICpcclxuICogQ3JlYXRlZCBieSBJZ29yIEVzY29iYXIgb24gMjAxMi0wMy0xMC4gUGxlYXNlIHJlcG9ydCBhbnkgYnVnIGF0IGdpdGh1Yi5jb20vaWdvcmVzY29iYXIvalF1ZXJ5LU1hc2stUGx1Z2luXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBJZ29yIEVzY29iYXIgaHR0cDovL2lnb3Jlc2NvYmFyLmNvbVxyXG4gKlxyXG4gKiBUaGUgTUlUIExpY2Vuc2UgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxyXG4gKiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxyXG4gKiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXRcclxuICogcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXHJcbiAqIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxyXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xyXG4gKiBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXHJcbiAqIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXHJcbiAqIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXHJcbiAqIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxyXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcclxuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxyXG4gKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbiAqL1xyXG5cclxuLyoganNoaW50IGxheGJyZWFrOiB0cnVlICovXHJcbi8qIGpzaGludCBtYXhjb21wbGV4aXR5OjE3ICovXHJcbi8qIGdsb2JhbCBkZWZpbmUgKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8vIFVNRCAoVW5pdmVyc2FsIE1vZHVsZSBEZWZpbml0aW9uKSBwYXR0ZXJucyBmb3IgSmF2YVNjcmlwdCBtb2R1bGVzIHRoYXQgd29yayBldmVyeXdoZXJlLlxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9qcXVlcnlQbHVnaW4uanNcclxuKGZ1bmN0aW9uIChmYWN0b3J5LCBqUXVlcnksIFplcHRvKSB7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnkgfHwgWmVwdG8pO1xyXG4gICAgfVxyXG5cclxufShmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgIHZhciBNYXNrID0gZnVuY3Rpb24gKGVsLCBtYXNrLCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHZhciBwID0ge1xyXG4gICAgICAgICAgICBpbnZhbGlkOiBbXSxcclxuICAgICAgICAgICAgZ2V0Q2FyZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3RybCA9IGVsLmdldCgwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZFNlbCA9IGRvY3VtZW50LnNlbGVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY1NlbFN0YXJ0ID0gY3RybC5zZWxlY3Rpb25TdGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSUUgU3VwcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkU2VsICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ01TSUUgMTAnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsID0gZFNlbC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCAtcC52YWwoKS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBzZWwudGV4dC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggc3VwcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNTZWxTdGFydCB8fCBjU2VsU3RhcnQgPT09ICcwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBjU2VsU3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0Q2FyZXQ6IGZ1bmN0aW9uKHBvcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuaXMoJzpmb2N1cycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSwgY3RybCA9IGVsLmdldCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3gsIFdlYktpdCwgZXRjLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0U2VsZWN0aW9uUmFuZ2UocG9zLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBJRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSBjdHJsLmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBldmVudHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2tleWRvd24ubWFzaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuZGF0YSgnbWFzay1rZXljb2RlJywgZS5rZXlDb2RlIHx8IGUud2hpY2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdtYXNrLXByZXZpdXMtdmFsdWUnLCBlbC52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ21hc2stcHJldml1cy1jYXJldC1wb3MnLCBwLmdldENhcmV0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLm1hc2tEaWdpdFBvc01hcE9sZCA9IHAubWFza0RpZ2l0UG9zTWFwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCQuak1hc2tHbG9iYWxzLnVzZUlucHV0ID8gJ2lucHV0Lm1hc2snIDogJ2tleXVwLm1hc2snLCBwLmJlaGF2aW91cilcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3Bhc3RlLm1hc2sgZHJvcC5tYXNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5rZXlkb3duKCkua2V5dXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlLm1hc2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdjaGFuZ2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2JsdXIubWFzaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gcC52YWwoKSAmJiAhZWwuZGF0YSgnY2hhbmdlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdjaGFuZ2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyB2ZXJ5IGltcG9ydGFudCB0aGF0IHRoaXMgY2FsbGJhY2sgcmVtYWlucyBpbiB0aGlzIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aGlzZSBvbGRWYWx1ZSBpdCdzIGdvaW5nIHRvIHdvcmsgYnVnZ3lcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2JsdXIubWFzaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IHAudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3QgYWxsIHRleHQgb24gZm9jdXNcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2ZvY3VzLm1hc2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3RPbkZvY3VzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIHZhbHVlIGlmIGl0IG5vdCBjb21wbGV0ZSB0aGUgbWFza1xyXG4gICAgICAgICAgICAgICAgICAgIC5vbignZm9jdXNvdXQubWFzaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jbGVhcklmTm90TWF0Y2ggJiYgIXJlZ2V4TWFzay50ZXN0KHAudmFsKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0UmVnZXhNYXNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXNrQ2h1bmtzID0gW10sIHRyYW5zbGF0aW9uLCBwYXR0ZXJuLCBvcHRpb25hbCwgcmVjdXJzaXZlLCBvUmVjdXJzaXZlLCByO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFzay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gak1hc2sudHJhbnNsYXRpb25bbWFzay5jaGFyQXQoaSldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSB0cmFuc2xhdGlvbi5wYXR0ZXJuLnRvU3RyaW5nKCkucmVwbGFjZSgvLnsxfSR8Xi57MX0vZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbCA9IHRyYW5zbGF0aW9uLm9wdGlvbmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmUgPSB0cmFuc2xhdGlvbi5yZWN1cnNpdmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrQ2h1bmtzLnB1c2gobWFzay5jaGFyQXQoaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb1JlY3Vyc2l2ZSA9IHtkaWdpdDogbWFzay5jaGFyQXQoaSksIHBhdHRlcm46IHBhdHRlcm59O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0NodW5rcy5wdXNoKCFvcHRpb25hbCAmJiAhcmVjdXJzaXZlID8gcGF0dGVybiA6IChwYXR0ZXJuICsgJz8nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0NodW5rcy5wdXNoKG1hc2suY2hhckF0KGkpLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgciA9IG1hc2tDaHVua3Muam9pbignJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9SZWN1cnNpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByID0gci5yZXBsYWNlKG5ldyBSZWdFeHAoJygnICsgb1JlY3Vyc2l2ZS5kaWdpdCArICcoLionICsgb1JlY3Vyc2l2ZS5kaWdpdCArICcpPyknKSwgJygkMSk/JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cChvUmVjdXJzaXZlLmRpZ2l0LCAnZycpLCBvUmVjdXJzaXZlLnBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZXN0cm95RXZlbnRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGVsLm9mZihbJ2lucHV0JywgJ2tleWRvd24nLCAna2V5dXAnLCAncGFzdGUnLCAnZHJvcCcsICdibHVyJywgJ2ZvY3Vzb3V0JywgJyddLmpvaW4oJy5tYXNrICcpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdmFsOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGVsLmlzKCdpbnB1dCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IGlzSW5wdXQgPyAndmFsJyA6ICd0ZXh0JyxcclxuICAgICAgICAgICAgICAgICAgICByO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbFttZXRob2RdKCkgIT09IHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxbbWV0aG9kXSh2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgciA9IGVsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByID0gZWxbbWV0aG9kXSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxjdWxhdGVDYXJldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRWYWwgPSBlbC5kYXRhKCdtYXNrLXByZXZpdXMtdmFsdWUnKSB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWwgPSBwLmdldE1hc2tlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ID0gcC5nZXRDYXJldCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbCAhPT0gbmV3VmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zT2xkID0gZWwuZGF0YSgnbWFzay1wcmV2aXVzLWNhcmV0LXBvcycpIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbEwgPSBuZXdWYWwubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWxMID0gb2xkVmFsLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0FmdGVyQ2FyZXQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGwgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gY2FyZXRQb3NOZXc7IGkgPCBuZXdWYWxMOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLm1hc2tEaWdpdFBvc01hcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0FmdGVyQ2FyZXQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGNhcmV0UG9zTmV3IC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLm1hc2tEaWdpdFBvc01hcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYXJldFBvc05ldyAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLm1hc2tEaWdpdFBvc01hcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGNhcmV0UG9zT2xkIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAubWFza0RpZ2l0UG9zTWFwT2xkW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGN1cnNvciBpcyBhdCB0aGUgZW5kIGtlZXAgaXQgdGhlcmVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FyZXRQb3NOZXcgPiBvbGRWYWxMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ID0gbmV3VmFsTCAqIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FyZXRQb3NPbGQgPj0gY2FyZXRQb3NOZXcgJiYgY2FyZXRQb3NPbGQgIT09IG9sZFZhbEwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLm1hc2tEaWdpdFBvc01hcE9sZFtjYXJldFBvc05ld10pICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FyZXRQb3MgPSBjYXJldFBvc05ldztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3IC09IG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbE9sZCAtIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3IC09IG1hc2tEaWdpdHNCZWZvcmVDYXJldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLm1hc2tEaWdpdFBvc01hcFtjYXJldFBvc05ld10pICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgPSBjYXJldFBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjYXJldFBvc05ldyA+IGNhcmV0UG9zT2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ICs9IG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbCAtIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbE9sZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgKz0gbWFza0RpZ2l0c0FmdGVyQ2FyZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcmV0UG9zTmV3O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWhhdmlvdXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICAgICAgICAgIHAuaW52YWxpZCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZWwuZGF0YSgnbWFzay1rZXljb2RlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQuaW5BcnJheShrZXlDb2RlLCBqTWFzay5ieVBhc3NLZXlzKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsICAgPSBwLmdldE1hc2tlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvcyA9IHAuZ2V0Q2FyZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGNvbXBlbnNhdGlvbiB0byBkZXZpY2VzL2Jyb3dzZXJzIHRoYXQgZG9uJ3QgY29tcGVuc2F0ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhcmV0IHBvc2l0aW9uaW5nIHRoZSByaWdodCB3YXlcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLnNldENhcmV0KHAuY2FsY3VsYXRlQ2FyZXRQb3NpdGlvbigpKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHAudmFsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5zZXRDYXJldChjYXJldFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAuY2FsbGJhY2tzKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRNYXNrZWQ6IGZ1bmN0aW9uKHNraXBNYXNrQ2hhcnMsIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZiA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsID09PSB1bmRlZmluZWQgPyBwLnZhbCgpIDogdmFsICsgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbSA9IDAsIG1hc2tMZW4gPSBtYXNrLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICB2ID0gMCwgdmFsTGVuID0gdmFsdWUubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDEsIGFkZE1ldGhvZCA9ICdwdXNoJyxcclxuICAgICAgICAgICAgICAgICAgICByZXNldFBvcyA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdENvdW50ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRQb3NBcnIgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TWFza0NoYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZE1ldGhvZCA9ICd1bnNoaWZ0JztcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TWFza0NoYXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG0gPSBtYXNrTGVuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdmFsTGVuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPiAtMSAmJiB2ID4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE1hc2tDaGFyID0gbWFza0xlbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtIDwgbWFza0xlbiAmJiB2IDwgdmFsTGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RVbnRyYW5zbGF0ZWRNYXNrQ2hhcjtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChjaGVjaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hc2tEaWdpdCA9IG1hc2suY2hhckF0KG0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxEaWdpdCA9IHZhbHVlLmNoYXJBdCh2KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24gPSBqTWFzay50cmFuc2xhdGlvblttYXNrRGlnaXRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbERpZ2l0Lm1hdGNoKHRyYW5zbGF0aW9uLnBhdHRlcm4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZbYWRkTWV0aG9kXSh2YWxEaWdpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24ucmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc2V0UG9zID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldFBvcyA9IG07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSBsYXN0TWFza0NoYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHJlc2V0UG9zIC0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RNYXNrQ2hhciA9PT0gcmVzZXRQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSAtPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsRGlnaXQgPT09IGxhc3RVbnRyYW5zbGF0ZWRNYXNrQ2hhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2hlZCB0aGUgbGFzdCB1bnRyYW5zbGF0ZWQgKHJhdykgbWFzayBjaGFyYWN0ZXIgdGhhdCB3ZSBlbmNvdW50ZXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGlrZWx5IGFuIGluc2VydCBvZmZzZXQgdGhlIG1hc2sgY2hhcmFjdGVyIGZyb20gdGhlIGxhc3QgZW50cnk7IGZhbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm91Z2ggYW5kIG9ubHkgaW5jcmVtZW50IHZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdENvdW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VW50cmFuc2xhdGVkTWFza0NoYXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24ub3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAtPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24uZmFsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZlthZGRNZXRob2RdKHRyYW5zbGF0aW9uLmZhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAtPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmludmFsaWQucHVzaCh7cDogdiwgdjogdmFsRGlnaXQsIGU6IHRyYW5zbGF0aW9uLnBhdHRlcm59KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBNYXNrQ2hhcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZlthZGRNZXRob2RdKG1hc2tEaWdpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxEaWdpdCA9PT0gbWFza0RpZ2l0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRQb3NBcnIucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVudHJhbnNsYXRlZE1hc2tDaGFyID0gbWFza0RpZ2l0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0UG9zQXJyLnB1c2godiArIG1hc2tEaWdpdENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdE1hc2tDaGFyRGlnaXQgPSBtYXNrLmNoYXJBdChsYXN0TWFza0NoYXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hc2tMZW4gPT09IHZhbExlbiArIDEgJiYgIWpNYXNrLnRyYW5zbGF0aW9uW2xhc3RNYXNrQ2hhckRpZ2l0XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKGxhc3RNYXNrQ2hhckRpZ2l0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsID0gYnVmLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgcC5tYXBNYXNrZGlnaXRQb3NpdGlvbnMobmV3VmFsLCBtYXNrRGlnaXRQb3NBcnIsIHZhbExlbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VmFsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtYXBNYXNrZGlnaXRQb3NpdGlvbnM6IGZ1bmN0aW9uKG5ld1ZhbCwgbWFza0RpZ2l0UG9zQXJyLCB2YWxMZW4pIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXNrRGlmZiA9IG9wdGlvbnMucmV2ZXJzZSA/IG5ld1ZhbC5sZW5ndGggLSB2YWxMZW4gOiAwO1xyXG4gICAgICAgICAgICAgICAgcC5tYXNrRGlnaXRQb3NNYXAgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFza0RpZ2l0UG9zQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5tYXNrRGlnaXRQb3NNYXBbbWFza0RpZ2l0UG9zQXJyW2ldICsgbWFza0RpZmZdID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FsbGJhY2tzOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHAudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHZhbCAhPT0gb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFyZ3MgPSBbdmFsLCBlLCBlbCwgb3B0aW9uc10sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbihuYW1lLCBjcml0ZXJpYSwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNbbmFtZV0gPT09ICdmdW5jdGlvbicgJiYgY3JpdGVyaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbbmFtZV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdvbkNoYW5nZScsIGNoYW5nZWQgPT09IHRydWUsIGRlZmF1bHRBcmdzKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdvbktleVByZXNzJywgY2hhbmdlZCA9PT0gdHJ1ZSwgZGVmYXVsdEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ29uQ29tcGxldGUnLCB2YWwubGVuZ3RoID09PSBtYXNrLmxlbmd0aCwgZGVmYXVsdEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ29uSW52YWxpZCcsIHAuaW52YWxpZC5sZW5ndGggPiAwLCBbdmFsLCBlLCBlbCwgcC5pbnZhbGlkLCBvcHRpb25zXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBlbCA9ICQoZWwpO1xyXG4gICAgICAgIHZhciBqTWFzayA9IHRoaXMsIG9sZFZhbHVlID0gcC52YWwoKSwgcmVnZXhNYXNrO1xyXG5cclxuICAgICAgICBtYXNrID0gdHlwZW9mIG1hc2sgPT09ICdmdW5jdGlvbicgPyBtYXNrKHAudmFsKCksIHVuZGVmaW5lZCwgZWwsICBvcHRpb25zKSA6IG1hc2s7XHJcblxyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcbiAgICAgICAgak1hc2subWFzayA9IG1hc2s7XHJcbiAgICAgICAgak1hc2sub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgak1hc2sucmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXJldCA9IHAuZ2V0Q2FyZXQoKTtcclxuICAgICAgICAgICAgcC5kZXN0cm95RXZlbnRzKCk7XHJcbiAgICAgICAgICAgIHAudmFsKGpNYXNrLmdldENsZWFuVmFsKCkpO1xyXG4gICAgICAgICAgICBwLnNldENhcmV0KGNhcmV0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGdldCB2YWx1ZSB3aXRob3V0IG1hc2tcclxuICAgICAgICBqTWFzay5nZXRDbGVhblZhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcC5nZXRNYXNrZWQodHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IG1hc2tlZCB2YWx1ZSB3aXRob3V0IHRoZSB2YWx1ZSBiZWluZyBpbiB0aGUgaW5wdXQgb3IgZWxlbWVudFxyXG4gICAgICAgIGpNYXNrLmdldE1hc2tlZFZhbCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcC5nZXRNYXNrZWQoZmFsc2UsIHZhbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgak1hc2suaW5pdCA9IGZ1bmN0aW9uKG9ubHlNYXNrKSB7XHJcbiAgICAgICAgICAgIG9ubHlNYXNrID0gb25seU1hc2sgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgak1hc2suY2xlYXJJZk5vdE1hdGNoICA9ICQuak1hc2tHbG9iYWxzLmNsZWFySWZOb3RNYXRjaDtcclxuICAgICAgICAgICAgak1hc2suYnlQYXNzS2V5cyAgICAgICA9ICQuak1hc2tHbG9iYWxzLmJ5UGFzc0tleXM7XHJcbiAgICAgICAgICAgIGpNYXNrLnRyYW5zbGF0aW9uICAgICAgPSAkLmV4dGVuZCh7fSwgJC5qTWFza0dsb2JhbHMudHJhbnNsYXRpb24sIG9wdGlvbnMudHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgak1hc2sgPSAkLmV4dGVuZCh0cnVlLCB7fSwgak1hc2ssIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgcmVnZXhNYXNrID0gcC5nZXRSZWdleE1hc2soKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbmx5TWFzaykge1xyXG4gICAgICAgICAgICAgICAgcC5ldmVudHMoKTtcclxuICAgICAgICAgICAgICAgIHAudmFsKHAuZ2V0TWFza2VkKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hdHRyKCdwbGFjZWhvbGRlcicgLCBvcHRpb25zLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSwgb3RoZXJ3aXNlIGlmIHRoZSB1c2VyIHN1Ym1pdCB0aGUgZm9ybVxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHRoZW4gcHJlc3MgdGhlIFwiYmFja1wiIGJ1dHRvbiwgdGhlIGF1dG9jb21wbGV0ZSB3aWxsIGVyYXNlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgZGF0YS4gV29ya3MgZmluZSBvbiBJRTkrLCBGRiwgT3BlcmEsIFNhZmFyaS5cclxuICAgICAgICAgICAgICAgIGlmIChlbC5kYXRhKCdtYXNrJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hdHRyKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGV0ZWN0IGlmIGlzIG5lY2Vzc2FyeSBsZXQgdGhlIHVzZXIgdHlwZSBmcmVlbHkuXHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgaXMgYSBsb3QgZmFzdGVyIHRoYW4gZm9yRWFjaC5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXhsZW5ndGggPSB0cnVlOyBpIDwgbWFzay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGlvbiA9IGpNYXNrLnRyYW5zbGF0aW9uW21hc2suY2hhckF0KGkpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24gJiYgdHJhbnNsYXRpb24ucmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1heGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmF0dHIoJ21heGxlbmd0aCcsIG1hc2subGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwLmRlc3Ryb3lFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIHAuZXZlbnRzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNhcmV0ID0gcC5nZXRDYXJldCgpO1xyXG4gICAgICAgICAgICAgICAgcC52YWwocC5nZXRNYXNrZWQoKSk7XHJcbiAgICAgICAgICAgICAgICBwLnNldENhcmV0KGNhcmV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGpNYXNrLmluaXQoIWVsLmlzKCdpbnB1dCcpKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5tYXNrV2F0Y2hlcnMgPSB7fTtcclxuICAgIHZhciBIVE1MQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fSxcclxuICAgICAgICAgICAgICAgIHByZWZpeCA9ICdkYXRhLW1hc2stJyxcclxuICAgICAgICAgICAgICAgIG1hc2sgPSBpbnB1dC5hdHRyKCdkYXRhLW1hc2snKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5hdHRyKHByZWZpeCArICdyZXZlcnNlJykpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5hdHRyKHByZWZpeCArICdjbGVhcmlmbm90bWF0Y2gnKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jbGVhcklmTm90TWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5wdXQuYXR0cihwcmVmaXggKyAnc2VsZWN0b25mb2N1cycpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VsZWN0T25Gb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChub3RTYW1lTWFza09iamVjdChpbnB1dCwgbWFzaywgb3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dC5kYXRhKCdtYXNrJywgbmV3IE1hc2sodGhpcywgbWFzaywgb3B0aW9ucykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBub3RTYW1lTWFza09iamVjdCA9IGZ1bmN0aW9uKGZpZWxkLCBtYXNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgICAgICB2YXIgbWFza09iamVjdCA9ICQoZmllbGQpLmRhdGEoJ21hc2snKSxcclxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeSA9IEpTT04uc3RyaW5naWZ5LFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAkKGZpZWxkKS52YWwoKSB8fCAkKGZpZWxkKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1hc2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXNrID0gbWFzayh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG1hc2tPYmplY3QgIT09ICdvYmplY3QnIHx8IHN0cmluZ2lmeShtYXNrT2JqZWN0Lm9wdGlvbnMpICE9PSBzdHJpbmdpZnkob3B0aW9ucykgfHwgbWFza09iamVjdC5tYXNrICE9PSBtYXNrO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXZlbnRTdXBwb3J0ZWQgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIGlzU3VwcG9ydGVkO1xyXG5cclxuICAgICAgICAgICAgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50TmFtZTtcclxuICAgICAgICAgICAgaXNTdXBwb3J0ZWQgPSAoZXZlbnROYW1lIGluIGVsKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggIWlzU3VwcG9ydGVkICkge1xyXG4gICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGV2ZW50TmFtZSwgJ3JldHVybjsnKTtcclxuICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsW2V2ZW50TmFtZV0gPT09ICdmdW5jdGlvbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGlzU3VwcG9ydGVkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgJC5mbi5tYXNrID0gZnVuY3Rpb24obWFzaywgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IsXHJcbiAgICAgICAgICAgIGdsb2JhbHMgPSAkLmpNYXNrR2xvYmFscyxcclxuICAgICAgICAgICAgaW50ZXJ2YWwgPSBnbG9iYWxzLndhdGNoSW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIHdhdGNoSW5wdXRzID0gb3B0aW9ucy53YXRjaElucHV0cyB8fCBnbG9iYWxzLndhdGNoSW5wdXRzLFxyXG4gICAgICAgICAgICBtYXNrRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub3RTYW1lTWFza09iamVjdCh0aGlzLCBtYXNrLCBvcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ21hc2snLCBuZXcgTWFzayh0aGlzLCBtYXNrLCBvcHRpb25zKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICQodGhpcykuZWFjaChtYXNrRnVuY3Rpb24pO1xyXG5cclxuICAgICAgICBpZiAoc2VsZWN0b3IgJiYgc2VsZWN0b3IgIT09ICcnICYmIHdhdGNoSW5wdXRzKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoJC5tYXNrV2F0Y2hlcnNbc2VsZWN0b3JdKTtcclxuICAgICAgICAgICAgJC5tYXNrV2F0Y2hlcnNbc2VsZWN0b3JdID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmZpbmQoc2VsZWN0b3IpLmVhY2gobWFza0Z1bmN0aW9uKTtcclxuICAgICAgICAgICAgfSwgaW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5tYXNrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCdtYXNrJykuZ2V0TWFza2VkVmFsKHZhbCk7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4udW5tYXNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCgkLm1hc2tXYXRjaGVyc1t0aGlzLnNlbGVjdG9yXSk7XHJcbiAgICAgICAgZGVsZXRlICQubWFza1dhdGNoZXJzW3RoaXMuc2VsZWN0b3JdO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhTWFzayA9ICQodGhpcykuZGF0YSgnbWFzaycpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YU1hc2spIHtcclxuICAgICAgICAgICAgICAgIGRhdGFNYXNrLnJlbW92ZSgpLnJlbW92ZURhdGEoJ21hc2snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLmNsZWFuVmFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgnbWFzaycpLmdldENsZWFuVmFsKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICQuYXBwbHlEYXRhTWFzayA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAkLmpNYXNrR2xvYmFscy5tYXNrRWxlbWVudHM7XHJcbiAgICAgICAgdmFyICRzZWxlY3RvciA9IChzZWxlY3RvciBpbnN0YW5jZW9mICQpID8gc2VsZWN0b3IgOiAkKHNlbGVjdG9yKTtcclxuICAgICAgICAkc2VsZWN0b3IuZmlsdGVyKCQuak1hc2tHbG9iYWxzLmRhdGFNYXNrQXR0cikuZWFjaChIVE1MQXR0cmlidXRlcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBnbG9iYWxzID0ge1xyXG4gICAgICAgIG1hc2tFbGVtZW50czogJ2lucHV0LHRkLHNwYW4sZGl2JyxcclxuICAgICAgICBkYXRhTWFza0F0dHI6ICcqW2RhdGEtbWFza10nLFxyXG4gICAgICAgIGRhdGFNYXNrOiB0cnVlLFxyXG4gICAgICAgIHdhdGNoSW50ZXJ2YWw6IDMwMCxcclxuICAgICAgICB3YXRjaElucHV0czogdHJ1ZSxcclxuICAgICAgICAvLyBvbGQgdmVyc2lvbnMgb2YgY2hyb21lIGRvbnQgd29yayBncmVhdCB3aXRoIGlucHV0IGV2ZW50XHJcbiAgICAgICAgdXNlSW5wdXQ6ICEvQ2hyb21lXFwvWzItNF1bMC05XXxTYW1zdW5nQnJvd3Nlci8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgZXZlbnRTdXBwb3J0ZWQoJ2lucHV0JyksXHJcbiAgICAgICAgd2F0Y2hEYXRhTWFzazogZmFsc2UsXHJcbiAgICAgICAgYnlQYXNzS2V5czogWzksIDE2LCAxNywgMTgsIDM2LCAzNywgMzgsIDM5LCA0MCwgOTFdLFxyXG4gICAgICAgIHRyYW5zbGF0aW9uOiB7XHJcbiAgICAgICAgICAgICcwJzoge3BhdHRlcm46IC9cXGQvfSxcclxuICAgICAgICAgICAgJzknOiB7cGF0dGVybjogL1xcZC8sIG9wdGlvbmFsOiB0cnVlfSxcclxuICAgICAgICAgICAgJyMnOiB7cGF0dGVybjogL1xcZC8sIHJlY3Vyc2l2ZTogdHJ1ZX0sXHJcbiAgICAgICAgICAgICdBJzoge3BhdHRlcm46IC9bYS16QS1aMC05XS99LFxyXG4gICAgICAgICAgICAnUyc6IHtwYXR0ZXJuOiAvW2EtekEtWl0vfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJC5qTWFza0dsb2JhbHMgPSAkLmpNYXNrR2xvYmFscyB8fCB7fTtcclxuICAgIGdsb2JhbHMgPSAkLmpNYXNrR2xvYmFscyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBnbG9iYWxzLCAkLmpNYXNrR2xvYmFscyk7XHJcblxyXG4gICAgLy8gbG9va2luZyBmb3IgaW5wdXRzIHdpdGggZGF0YS1tYXNrIGF0dHJpYnV0ZVxyXG4gICAgaWYgKGdsb2JhbHMuZGF0YU1hc2spIHtcclxuICAgICAgICAkLmFwcGx5RGF0YU1hc2soKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJC5qTWFza0dsb2JhbHMud2F0Y2hEYXRhTWFzaykge1xyXG4gICAgICAgICAgICAkLmFwcGx5RGF0YU1hc2soKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBnbG9iYWxzLndhdGNoSW50ZXJ2YWwpO1xyXG59LCB3aW5kb3cualF1ZXJ5LCB3aW5kb3cuWmVwdG8pKTtcclxuIl19
